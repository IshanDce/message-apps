(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var Fd={exports:{}},Ka={},Ud={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function X0(){if(Wg)return xe;Wg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,U={};function L(V,K,Ie){this.props=V,this.context=K,this.refs=U,this.updater=Ie||B}L.prototype.isReactComponent={},L.prototype.setState=function(V,K){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,K,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function te(){}te.prototype=L.prototype;function ue(V,K,Ie){this.props=V,this.context=K,this.refs=U,this.updater=Ie||B}var ae=ue.prototype=new te;ae.constructor=ue,O(ae,L.prototype),ae.isPureReactComponent=!0;var ge=Array.isArray,Pe=Object.prototype.hasOwnProperty,ne={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(V,K,Ie){var Ee,ke={},Ne=null,ze=null;if(K!=null)for(Ee in K.ref!==void 0&&(ze=K.ref),K.key!==void 0&&(Ne=""+K.key),K)Pe.call(K,Ee)&&!k.hasOwnProperty(Ee)&&(ke[Ee]=K[Ee]);var Fe=arguments.length-2;if(Fe===1)ke.children=Ie;else if(1<Fe){for(var Ge=Array(Fe),Wt=0;Wt<Fe;Wt++)Ge[Wt]=arguments[Wt+2];ke.children=Ge}if(V&&V.defaultProps)for(Ee in Fe=V.defaultProps,Fe)ke[Ee]===void 0&&(ke[Ee]=Fe[Ee]);return{$$typeof:n,type:V,key:Ne,ref:ze,props:ke,_owner:ne.current}}function P(V,K){return{$$typeof:n,type:V.type,key:K,ref:V.ref,props:V.props,_owner:V._owner}}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var K={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Ie){return K[Ie]})}var M=/\/+/g;function C(V,K){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):K.toString(36)}function Le(V,K,Ie,Ee,ke){var Ne=typeof V;(Ne==="undefined"||Ne==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Ne){case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case n:case e:ze=!0}}if(ze)return ze=V,ke=ke(ze),V=Ee===""?"."+C(ze,0):Ee,ge(ke)?(Ie="",V!=null&&(Ie=V.replace(M,"$&/")+"/"),Le(ke,K,Ie,"",function(Wt){return Wt})):ke!=null&&(D(ke)&&(ke=P(ke,Ie+(!ke.key||ze&&ze.key===ke.key?"":(""+ke.key).replace(M,"$&/")+"/")+V)),K.push(ke)),1;if(ze=0,Ee=Ee===""?".":Ee+":",ge(V))for(var Fe=0;Fe<V.length;Fe++){Ne=V[Fe];var Ge=Ee+C(Ne,Fe);ze+=Le(Ne,K,Ie,Ge,ke)}else if(Ge=I(V),typeof Ge=="function")for(V=Ge.call(V),Fe=0;!(Ne=V.next()).done;)Ne=Ne.value,Ge=Ee+C(Ne,Fe++),ze+=Le(Ne,K,Ie,Ge,ke);else if(Ne==="object")throw K=String(V),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return ze}function ut(V,K,Ie){if(V==null)return V;var Ee=[],ke=0;return Le(V,Ee,"","",function(Ne){return K.call(Ie,Ne,ke++)}),Ee}function We(V){if(V._status===-1){var K=V._result;K=K(),K.then(function(Ie){(V._status===0||V._status===-1)&&(V._status=1,V._result=Ie)},function(Ie){(V._status===0||V._status===-1)&&(V._status=2,V._result=Ie)}),V._status===-1&&(V._status=0,V._result=K)}if(V._status===1)return V._result.default;throw V._result}var Ke={current:null},Z={transition:null},pe={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Z,ReactCurrentOwner:ne};function ie(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:ut,forEach:function(V,K,Ie){ut(V,function(){K.apply(this,arguments)},Ie)},count:function(V){var K=0;return ut(V,function(){K++}),K},toArray:function(V){return ut(V,function(K){return K})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},xe.Component=L,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=ue,xe.StrictMode=s,xe.Suspense=g,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,xe.act=ie,xe.cloneElement=function(V,K,Ie){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ee=O({},V.props),ke=V.key,Ne=V.ref,ze=V._owner;if(K!=null){if(K.ref!==void 0&&(Ne=K.ref,ze=ne.current),K.key!==void 0&&(ke=""+K.key),V.type&&V.type.defaultProps)var Fe=V.type.defaultProps;for(Ge in K)Pe.call(K,Ge)&&!k.hasOwnProperty(Ge)&&(Ee[Ge]=K[Ge]===void 0&&Fe!==void 0?Fe[Ge]:K[Ge])}var Ge=arguments.length-2;if(Ge===1)Ee.children=Ie;else if(1<Ge){Fe=Array(Ge);for(var Wt=0;Wt<Ge;Wt++)Fe[Wt]=arguments[Wt+2];Ee.children=Fe}return{$$typeof:n,type:V.type,key:ke,ref:Ne,props:Ee,_owner:ze}},xe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},xe.createElement=A,xe.createFactory=function(V){var K=A.bind(null,V);return K.type=V,K},xe.createRef=function(){return{current:null}},xe.forwardRef=function(V){return{$$typeof:f,render:V}},xe.isValidElement=D,xe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:We}},xe.memo=function(V,K){return{$$typeof:y,type:V,compare:K===void 0?null:K}},xe.startTransition=function(V){var K=Z.transition;Z.transition={};try{V()}finally{Z.transition=K}},xe.unstable_act=ie,xe.useCallback=function(V,K){return Ke.current.useCallback(V,K)},xe.useContext=function(V){return Ke.current.useContext(V)},xe.useDebugValue=function(){},xe.useDeferredValue=function(V){return Ke.current.useDeferredValue(V)},xe.useEffect=function(V,K){return Ke.current.useEffect(V,K)},xe.useId=function(){return Ke.current.useId()},xe.useImperativeHandle=function(V,K,Ie){return Ke.current.useImperativeHandle(V,K,Ie)},xe.useInsertionEffect=function(V,K){return Ke.current.useInsertionEffect(V,K)},xe.useLayoutEffect=function(V,K){return Ke.current.useLayoutEffect(V,K)},xe.useMemo=function(V,K){return Ke.current.useMemo(V,K)},xe.useReducer=function(V,K,Ie){return Ke.current.useReducer(V,K,Ie)},xe.useRef=function(V){return Ke.current.useRef(V)},xe.useState=function(V){return Ke.current.useState(V)},xe.useSyncExternalStore=function(V,K,Ie){return Ke.current.useSyncExternalStore(V,K,Ie)},xe.useTransition=function(){return Ke.current.useTransition()},xe.version="18.3.1",xe}var Kg;function Ff(){return Kg||(Kg=1,Ud.exports=X0()),Ud.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function J0(){if(Gg)return Ka;Gg=1;var n=Ff(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,g,y){var v,E={},I=null,B=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(B=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:I,ref:B,props:E,_owner:o.current}}return Ka.Fragment=t,Ka.jsx=c,Ka.jsxs=c,Ka}var Qg;function Z0(){return Qg||(Qg=1,Fd.exports=J0()),Fd.exports}var R=Z0(),de=Ff(),Wu={},jd={exports:{}},en={},Bd={exports:{}},zd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function eT(){return Yg||(Yg=1,(function(n){function e(Z,pe){var ie=Z.length;Z.push(pe);e:for(;0<ie;){var V=ie-1>>>1,K=Z[V];if(0<o(K,pe))Z[V]=pe,Z[ie]=K,ie=V;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var pe=Z[0],ie=Z.pop();if(ie!==pe){Z[0]=ie;e:for(var V=0,K=Z.length,Ie=K>>>1;V<Ie;){var Ee=2*(V+1)-1,ke=Z[Ee],Ne=Ee+1,ze=Z[Ne];if(0>o(ke,ie))Ne<K&&0>o(ze,ke)?(Z[V]=ze,Z[Ne]=ie,V=Ne):(Z[V]=ke,Z[Ee]=ie,V=Ee);else if(Ne<K&&0>o(ze,ie))Z[V]=ze,Z[Ne]=ie,V=Ne;else break e}}return pe}function o(Z,pe){var ie=Z.sortIndex-pe.sortIndex;return ie!==0?ie:Z.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var g=[],y=[],v=1,E=null,I=3,B=!1,O=!1,U=!1,L=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(Z){for(var pe=t(y);pe!==null;){if(pe.callback===null)s(y);else if(pe.startTime<=Z)s(y),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=t(y)}}function ge(Z){if(U=!1,ae(Z),!O)if(t(g)!==null)O=!0,We(Pe);else{var pe=t(y);pe!==null&&Ke(ge,pe.startTime-Z)}}function Pe(Z,pe){O=!1,U&&(U=!1,te(A),A=-1),B=!0;var ie=I;try{for(ae(pe),E=t(g);E!==null&&(!(E.expirationTime>pe)||Z&&!N());){var V=E.callback;if(typeof V=="function"){E.callback=null,I=E.priorityLevel;var K=V(E.expirationTime<=pe);pe=n.unstable_now(),typeof K=="function"?E.callback=K:E===t(g)&&s(g),ae(pe)}else s(g);E=t(g)}if(E!==null)var Ie=!0;else{var Ee=t(y);Ee!==null&&Ke(ge,Ee.startTime-pe),Ie=!1}return Ie}finally{E=null,I=ie,B=!1}}var ne=!1,k=null,A=-1,P=5,D=-1;function N(){return!(n.unstable_now()-D<P)}function M(){if(k!==null){var Z=n.unstable_now();D=Z;var pe=!0;try{pe=k(!0,Z)}finally{pe?C():(ne=!1,k=null)}}else ne=!1}var C;if(typeof ue=="function")C=function(){ue(M)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,ut=Le.port2;Le.port1.onmessage=M,C=function(){ut.postMessage(null)}}else C=function(){L(M,0)};function We(Z){k=Z,ne||(ne=!0,C())}function Ke(Z,pe){A=L(function(){Z(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){O||B||(O=!0,We(Pe))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(g)},n.unstable_next=function(Z){switch(I){case 1:case 2:case 3:var pe=3;break;default:pe=I}var ie=I;I=pe;try{return Z()}finally{I=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,pe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ie=I;I=Z;try{return pe()}finally{I=ie}},n.unstable_scheduleCallback=function(Z,pe,ie){var V=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?V+ie:V):ie=V,Z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ie+K,Z={id:v++,callback:pe,priorityLevel:Z,startTime:ie,expirationTime:K,sortIndex:-1},ie>V?(Z.sortIndex=ie,e(y,Z),t(g)===null&&Z===t(y)&&(U?(te(A),A=-1):U=!0,Ke(ge,ie-V))):(Z.sortIndex=K,e(g,Z),O||B||(O=!0,We(Pe))),Z},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Z){var pe=I;return function(){var ie=I;I=pe;try{return Z.apply(this,arguments)}finally{I=ie}}}})(zd)),zd}var Xg;function tT(){return Xg||(Xg=1,Bd.exports=eT()),Bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function nT(){if(Jg)return en;Jg=1;var n=Ff(),e=tT();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function I(r){return g.call(E,r)?!0:g.call(v,r)?!1:y.test(r)?E[r]=!0:(v[r]=!0,!1)}function B(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function O(r,i,a,h){if(i===null||typeof i>"u"||B(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function U(r,i,a,h,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new U(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function ue(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(te,ue);L[i]=new U(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(te,ue);L[i]=new U(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(te,ue);L[i]=new U(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function ae(r,i,a,h){var d=L.hasOwnProperty(i)?L[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(O(i,a,d,h)&&(a=null),h||d===null?I(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var ge=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pe=Symbol.for("react.element"),ne=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),Ke=Symbol.for("react.offscreen"),Z=Symbol.iterator;function pe(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,V;function K(r){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+r}var Ie=!1;function Ee(r,i){if(!r||Ie)return"";Ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var h=$}Reflect.construct(r,[],i)}else{try{i.call()}catch($){h=$}r.call(i.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),p=h.stack.split(`
`),w=d.length-1,S=p.length-1;1<=w&&0<=S&&d[w]!==p[S];)S--;for(;1<=w&&0<=S;w--,S--)if(d[w]!==p[S]){if(w!==1||S!==1)do if(w--,S--,0>S||d[w]!==p[S]){var x=`
`+d[w].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=w&&0<=S);break}}}finally{Ie=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?K(r):""}function ke(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Ee(r.type,!1),r;case 11:return r=Ee(r.type.render,!1),r;case 1:return r=Ee(r.type,!0),r;default:return""}}function Ne(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case ne:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Le:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case N:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case M:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ut:return i=r.displayName||null,i!==null?i:Ne(r.type)||"Memo";case We:i=r._payload,r=r._init;try{return Ne(r(i))}catch{}}return null}function ze(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Wt(r){var i=Ge(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,p.call(this,w)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Vi(r){r._valueTracker||(r._valueTracker=Wt(r))}function Zo(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=Ge(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function Wr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Li(r,i){var a=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Nl(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Mi(r,i){i=i.checked,i!=null&&ae(r,"checked",i,!1)}function Hs(r,i){Mi(r,i);var a=Fe(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?mt(r,i.type,a):i.hasOwnProperty("defaultValue")&&mt(r,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ea(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function mt(r,i,a){(i!=="number"||Wr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ct=Array.isArray;function kn(r,i,a,h){if(r=r.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=i.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function ta(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function na(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Fe(a)}}function bl(r,i){var a=Fe(i.value),h=Fe(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function Kr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function ra(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fi(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?ra(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Gr,Dl=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,d)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Gr=Gr||document.createElement("div"),Gr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Gr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Ws(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ol=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(r){Ol.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Qr[i]=Qr[r]})});function Yr(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Qr.hasOwnProperty(r)&&Qr[r]?(""+i).trim():i+"px"}function Ui(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Yr(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var sa=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xn(r,i){if(i){if(sa[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ji(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xr=null;function Bi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var yr=null,_r=null,it=null;function ia(r){if(r=ba(r)){if(typeof yr!="function")throw Error(t(280));var i=r.stateNode;i&&(i=au(i),yr(r.stateNode,r.type,i))}}function Jr(r){_r?it?it.push(r):it=[r]:_r=r}function Zr(){if(_r){var r=_r,i=it;if(it=_r=null,ia(r),i)for(r=0;r<i.length;r++)ia(i[r])}}function Vl(r,i){return r(i)}function Ll(){}var $n=!1;function Ml(r,i,a){if($n)return r(i,a);$n=!0;try{return Vl(r,i,a)}finally{$n=!1,(_r!==null||it!==null)&&(Ll(),Zr())}}function Ks(r,i){var a=r.stateNode;if(a===null)return null;var h=au(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var es=!1;if(f)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){es=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{es=!1}function Fl(r,i,a,h,d,p,w,S,x){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(Y){this.onError(Y)}}var vr=!1,qn=null,zi=!1,_n=null,Ul={onError:function(r){vr=!0,qn=r}};function jl(r,i,a,h,d,p,w,S,x){vr=!1,qn=null,Fl.apply(Ul,arguments)}function oa(r,i,a,h,d,p,w,S,x){if(jl.apply(this,arguments),vr){if(vr){var $=qn;vr=!1,qn=null}else throw Error(t(198));zi||(zi=!0,_n=$)}}function Nn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function aa(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Bl(r){if(Nn(r)!==r)throw Error(t(188))}function zl(r){var i=r.alternate;if(!i){if(i=Nn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Bl(d),r;if(p===h)return Bl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=p;else{for(var w=!1,S=d.child;S;){if(S===a){w=!0,a=d,h=p;break}if(S===h){w=!0,h=d,a=p;break}S=S.sibling}if(!w){for(S=p.child;S;){if(S===a){w=!0,a=p,h=d;break}if(S===h){w=!0,h=p,a=d;break}S=S.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function $l(r){return r=zl(r),r!==null?Gs(r):null}function Gs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Gs(r);if(i!==null)return i;r=r.sibling}return null}var la=e.unstable_scheduleCallback,$i=e.unstable_cancelCallback,Qs=e.unstable_shouldYield,wr=e.unstable_requestPaint,Je=e.unstable_now,mh=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,ua=e.unstable_UserBlockingPriority,Ys=e.unstable_NormalPriority,ca=e.unstable_LowPriority,Hi=e.unstable_IdlePriority,Xs=null,an=null;function ql(r){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Xs,r,void 0,(r.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Js,Hn=Math.log,vn=Math.LN2;function Js(r){return r>>>=0,r===0?32:31-(Hn(r)/vn|0)|0}var Wn=64,ns=4194304;function Be(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Er(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,p=r.pingedLanes,w=a&268435455;if(w!==0){var S=w&~d;S!==0?h=Be(S):(p&=w,p!==0&&(h=Be(p)))}else w=a&~d,w!==0?h=Be(w):p!==0&&(h=Be(p));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-ln(i),d=1<<a,h|=r[a],i&=~d;return h}function Zs(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ei(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var w=31-ln(p),S=1<<w,x=d[w];x===-1?((S&a)===0||(S&h)!==0)&&(d[w]=Zs(S,i)):x<=i&&(r.expiredLanes|=S),p&=~S}}function ha(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function da(){var r=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),r}function fa(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function ti(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-ln(i),r[i]=a}function gh(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-ln(a),p=1<<d;i[d]=0,h[d]=-1,r[d]=-1,a&=~p}}function pa(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-ln(a),d=1<<h;d&i|r[h]&i&&(r[h]|=i),a&=~d}}var Ve=0;function Kn(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ma,Wi,ga,ya,_a,Gn=!1,Ki=[],Qn=null,Yn=null,kt=null,ni=new Map,Tr=new Map,un=[],Hl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rs(r,i){switch(r){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":ni.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tr.delete(i.pointerId)}}function bn(r,i,a,h,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:p,targetContainers:[d]},i!==null&&(i=ba(i),i!==null&&Wi(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Wl(r,i,a,h,d){switch(i){case"focusin":return Qn=bn(Qn,r,i,a,h,d),!0;case"dragenter":return Yn=bn(Yn,r,i,a,h,d),!0;case"mouseover":return kt=bn(kt,r,i,a,h,d),!0;case"pointerover":var p=d.pointerId;return ni.set(p,bn(ni.get(p)||null,r,i,a,h,d)),!0;case"gotpointercapture":return p=d.pointerId,Tr.set(p,bn(Tr.get(p)||null,r,i,a,h,d)),!0}return!1}function Gi(r){var i=oi(r.target);if(i!==null){var a=Nn(i);if(a!==null){if(i=a.tag,i===13){if(i=aa(a),i!==null){r.blockedOn=i,_a(r.priority,function(){ga(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Qe(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Qi(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Xr=h,a.target.dispatchEvent(h),Xr=null}else return i=ba(a),i!==null&&Wi(i),r.blockedOn=a,!1;i.shift()}return!0}function Kl(r,i,a){Qe(r)&&a.delete(i)}function yh(){Gn=!1,Qn!==null&&Qe(Qn)&&(Qn=null),Yn!==null&&Qe(Yn)&&(Yn=null),kt!==null&&Qe(kt)&&(kt=null),ni.forEach(Kl),Tr.forEach(Kl)}function ss(r,i){r.blockedOn===i&&(r.blockedOn=null,Gn||(Gn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yh)))}function is(r){function i(d){return ss(d,r)}if(0<Ki.length){ss(Ki[0],r);for(var a=1;a<Ki.length;a++){var h=Ki[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Qn!==null&&ss(Qn,r),Yn!==null&&ss(Yn,r),kt!==null&&ss(kt,r),ni.forEach(i),Tr.forEach(i),a=0;a<un.length;a++)h=un[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<un.length&&(a=un[0],a.blockedOn===null);)Gi(a),a.blockedOn===null&&un.shift()}var Ir=ge.ReactCurrentBatchConfig,Sr=!0;function Xn(r,i,a,h){var d=Ve,p=Ir.transition;Ir.transition=null;try{Ve=1,va(r,i,a,h)}finally{Ve=d,Ir.transition=p}}function Gl(r,i,a,h){var d=Ve,p=Ir.transition;Ir.transition=null;try{Ve=4,va(r,i,a,h)}finally{Ve=d,Ir.transition=p}}function va(r,i,a,h){if(Sr){var d=Qi(r,i,a,h);if(d===null)Ph(r,i,h,Jn,a),rs(r,h);else if(Wl(d,r,i,a,h))h.stopPropagation();else if(rs(r,h),i&4&&-1<Hl.indexOf(r)){for(;d!==null;){var p=ba(d);if(p!==null&&ma(p),p=Qi(r,i,a,h),p===null&&Ph(r,i,h,Jn,a),p===d)break;d=p}d!==null&&h.stopPropagation()}else Ph(r,i,h,null,a)}}var Jn=null;function Qi(r,i,a,h){if(Jn=null,r=Bi(h),r=oi(r),r!==null)if(i=Nn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=aa(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Jn=r,null}function Yi(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mh()){case qi:return 1;case ua:return 4;case Ys:case ca:return 16;case Hi:return 536870912;default:return 16}default:return 16}}var cn=null,Xi=null,Ar=null;function Ql(){if(Ar)return Ar;var r,i=Xi,a=i.length,h,d="value"in cn?cn.value:cn.textContent,p=d.length;for(r=0;r<a&&i[r]===d[r];r++);var w=a-r;for(h=1;h<=w&&i[a-h]===d[p-h];h++);return Ar=d.slice(r,1<h?1-h:void 0)}function ri(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Zn(){return!0}function wa(){return!1}function Lt(r){function i(a,h,d,p,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(a=r[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zn:wa,this.isPropagationStopped=wa,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},si=Lt(er),os=ie({},er,{view:0,detail:0}),Ji=Lt(os),Zi,eo,hn,ii=ie({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==hn&&(hn&&r.type==="mousemove"?(Zi=r.screenX-hn.screenX,eo=r.screenY-hn.screenY):eo=Zi=0,hn=r),Zi)},movementY:function(r){return"movementY"in r?r.movementY:eo}}),Ea=Lt(ii),Yl=ie({},ii,{dataTransfer:0}),Xl=Lt(Yl),to=ie({},os,{relatedTarget:0}),xt=Lt(to),Jl=ie({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Zl=Lt(Jl),as=ie({},er,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Lt(as),m=ie({},er,{data:0}),_=Lt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ee(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=q[r])?!!i[r]:!1}function Ae(){return ee}var ht=ie({},os,{key:function(r){if(r.key){var i=T[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ri(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?j[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(r){return r.type==="keypress"?ri(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ri(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qe=Lt(ht),gt=ie({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dn=Lt(gt),Rr=ie({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),tr=Lt(Rr),nr=ie({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),no=Lt(nr),Ta=ie({},ii,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),HE=Lt(Ta),WE=[9,13,27,32],_h=f&&"CompositionEvent"in window,Ia=null;f&&"documentMode"in document&&(Ia=document.documentMode);var KE=f&&"TextEvent"in window&&!Ia,Fp=f&&(!_h||Ia&&8<Ia&&11>=Ia),Up=" ",jp=!1;function Bp(r,i){switch(r){case"keyup":return WE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ro=!1;function GE(r,i){switch(r){case"compositionend":return zp(i);case"keypress":return i.which!==32?null:(jp=!0,Up);case"textInput":return r=i.data,r===Up&&jp?null:r;default:return null}}function QE(r,i){if(ro)return r==="compositionend"||!_h&&Bp(r,i)?(r=Ql(),Ar=Xi=cn=null,ro=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fp&&i.locale!=="ko"?null:i.data;default:return null}}var YE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $p(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!YE[r.type]:i==="textarea"}function qp(r,i,a,h){Jr(h),i=su(i,"onChange"),0<i.length&&(a=new si("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Sa=null,Aa=null;function XE(r){lm(r,0)}function eu(r){var i=lo(r);if(Zo(i))return r}function JE(r,i){if(r==="change")return i}var Hp=!1;if(f){var vh;if(f){var wh="oninput"in document;if(!wh){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),wh=typeof Wp.oninput=="function"}vh=wh}else vh=!1;Hp=vh&&(!document.documentMode||9<document.documentMode)}function Kp(){Sa&&(Sa.detachEvent("onpropertychange",Gp),Aa=Sa=null)}function Gp(r){if(r.propertyName==="value"&&eu(Aa)){var i=[];qp(i,Aa,r,Bi(r)),Ml(XE,i)}}function ZE(r,i,a){r==="focusin"?(Kp(),Sa=i,Aa=a,Sa.attachEvent("onpropertychange",Gp)):r==="focusout"&&Kp()}function e0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return eu(Aa)}function t0(r,i){if(r==="click")return eu(i)}function n0(r,i){if(r==="input"||r==="change")return eu(i)}function r0(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Dn=typeof Object.is=="function"?Object.is:r0;function Ra(r,i){if(Dn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!g.call(i,d)||!Dn(r[d],i[d]))return!1}return!0}function Qp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Yp(r,i){var a=Qp(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qp(a)}}function Xp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Xp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Jp(){for(var r=window,i=Wr();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Wr(r.document)}return i}function Eh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function s0(r){var i=Jp(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&Xp(a.ownerDocument.documentElement,a)){if(h!==null&&Eh(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,p=Math.min(h.start,d);h=h.end===void 0?p:Math.min(h.end,d),!r.extend&&p>h&&(d=h,h=p,p=d),d=Yp(a,p);var w=Yp(a,h);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),p>h?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var i0=f&&"documentMode"in document&&11>=document.documentMode,so=null,Th=null,Ca=null,Ih=!1;function Zp(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ih||so==null||so!==Wr(h)||(h=so,"selectionStart"in h&&Eh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ca&&Ra(Ca,h)||(Ca=h,h=su(Th,"onSelect"),0<h.length&&(i=new si("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=so)))}function tu(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var io={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},Sh={},em={};f&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function nu(r){if(Sh[r])return Sh[r];if(!io[r])return r;var i=io[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in em)return Sh[r]=i[a];return r}var tm=nu("animationend"),nm=nu("animationiteration"),rm=nu("animationstart"),sm=nu("transitionend"),im=new Map,om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(r,i){im.set(r,i),l(i,[r])}for(var Ah=0;Ah<om.length;Ah++){var Rh=om[Ah],o0=Rh.toLowerCase(),a0=Rh[0].toUpperCase()+Rh.slice(1);ls(o0,"on"+a0)}ls(tm,"onAnimationEnd"),ls(nm,"onAnimationIteration"),ls(rm,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(sm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function am(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,oa(h,i,void 0,r),r.currentTarget=null}function lm(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var p=void 0;if(i)for(var w=h.length-1;0<=w;w--){var S=h[w],x=S.instance,$=S.currentTarget;if(S=S.listener,x!==p&&d.isPropagationStopped())break e;am(d,S,$),p=x}else for(w=0;w<h.length;w++){if(S=h[w],x=S.instance,$=S.currentTarget,S=S.listener,x!==p&&d.isPropagationStopped())break e;am(d,S,$),p=x}}}if(zi)throw r=_n,zi=!1,_n=null,r}function Ze(r,i){var a=i[Oh];a===void 0&&(a=i[Oh]=new Set);var h=r+"__bubble";a.has(h)||(um(i,r,2,!1),a.add(h))}function Ch(r,i,a){var h=0;i&&(h|=4),um(a,r,h,i)}var ru="_reactListening"+Math.random().toString(36).slice(2);function ka(r){if(!r[ru]){r[ru]=!0,s.forEach(function(a){a!=="selectionchange"&&(l0.has(a)||Ch(a,!1,r),Ch(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ru]||(i[ru]=!0,Ch("selectionchange",!1,i))}}function um(r,i,a,h){switch(Yi(i)){case 1:var d=Xn;break;case 4:d=Gl;break;default:d=va}a=d.bind(null,i,a,r),d=void 0,!es||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(i,a,{capture:!0,passive:d}):r.addEventListener(i,a,!0):d!==void 0?r.addEventListener(i,a,{passive:d}):r.addEventListener(i,a,!1)}function Ph(r,i,a,h,d){var p=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var S=h.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var x=w.tag;if((x===3||x===4)&&(x=w.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;w=w.return}for(;S!==null;){if(w=oi(S),w===null)return;if(x=w.tag,x===5||x===6){h=p=w;continue e}S=S.parentNode}}h=h.return}Ml(function(){var $=p,Y=Bi(a),X=[];e:{var Q=im.get(r);if(Q!==void 0){var se=si,ce=r;switch(r){case"keypress":if(ri(a)===0)break e;case"keydown":case"keyup":se=qe;break;case"focusin":ce="focus",se=xt;break;case"focusout":ce="blur",se=xt;break;case"beforeblur":case"afterblur":se=xt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ea;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=tr;break;case tm:case nm:case rm:se=Zl;break;case sm:se=no;break;case"scroll":se=Ji;break;case"wheel":se=HE;break;case"copy":case"cut":case"paste":se=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=dn}var he=(i&4)!==0,dt=!he&&r==="scroll",F=he?Q!==null?Q+"Capture":null:Q;he=[];for(var b=$,z;b!==null;){z=b;var J=z.stateNode;if(z.tag===5&&J!==null&&(z=J,F!==null&&(J=Ks(b,F),J!=null&&he.push(xa(b,J,z)))),dt)break;b=b.return}0<he.length&&(Q=new se(Q,ce,null,a,Y),X.push({event:Q,listeners:he}))}}if((i&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",Q&&a!==Xr&&(ce=a.relatedTarget||a.fromElement)&&(oi(ce)||ce[Cr]))break e;if((se||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=$,ce=ce?oi(ce):null,ce!==null&&(dt=Nn(ce),ce!==dt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=$),se!==ce)){if(he=Ea,J="onMouseLeave",F="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(he=dn,J="onPointerLeave",F="onPointerEnter",b="pointer"),dt=se==null?Q:lo(se),z=ce==null?Q:lo(ce),Q=new he(J,b+"leave",se,a,Y),Q.target=dt,Q.relatedTarget=z,J=null,oi(Y)===$&&(he=new he(F,b+"enter",ce,a,Y),he.target=z,he.relatedTarget=dt,J=he),dt=J,se&&ce)t:{for(he=se,F=ce,b=0,z=he;z;z=oo(z))b++;for(z=0,J=F;J;J=oo(J))z++;for(;0<b-z;)he=oo(he),b--;for(;0<z-b;)F=oo(F),z--;for(;b--;){if(he===F||F!==null&&he===F.alternate)break t;he=oo(he),F=oo(F)}he=null}else he=null;se!==null&&cm(X,Q,se,he,!1),ce!==null&&dt!==null&&cm(X,dt,ce,he,!0)}}e:{if(Q=$?lo($):window,se=Q.nodeName&&Q.nodeName.toLowerCase(),se==="select"||se==="input"&&Q.type==="file")var fe=JE;else if($p(Q))if(Hp)fe=n0;else{fe=e0;var ye=ZE}else(se=Q.nodeName)&&se.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(fe=t0);if(fe&&(fe=fe(r,$))){qp(X,fe,a,Y);break e}ye&&ye(r,Q,$),r==="focusout"&&(ye=Q._wrapperState)&&ye.controlled&&Q.type==="number"&&mt(Q,"number",Q.value)}switch(ye=$?lo($):window,r){case"focusin":($p(ye)||ye.contentEditable==="true")&&(so=ye,Th=$,Ca=null);break;case"focusout":Ca=Th=so=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,Zp(X,a,Y);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":Zp(X,a,Y)}var _e;if(_h)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ro?Bp(r,a)&&(Te="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Fp&&a.locale!=="ko"&&(ro||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ro&&(_e=Ql()):(cn=Y,Xi="value"in cn?cn.value:cn.textContent,ro=!0)),ye=su($,Te),0<ye.length&&(Te=new _(Te,r,null,a,Y),X.push({event:Te,listeners:ye}),_e?Te.data=_e:(_e=zp(a),_e!==null&&(Te.data=_e)))),(_e=KE?GE(r,a):QE(r,a))&&($=su($,"onBeforeInput"),0<$.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),X.push({event:Y,listeners:$}),Y.data=_e))}lm(X,i)})}function xa(r,i,a){return{instance:r,listener:i,currentTarget:a}}function su(r,i){for(var a=i+"Capture",h=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ks(r,a),p!=null&&h.unshift(xa(r,p,d)),p=Ks(r,i),p!=null&&h.push(xa(r,p,d))),r=r.return}return h}function oo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function cm(r,i,a,h,d){for(var p=i._reactName,w=[];a!==null&&a!==h;){var S=a,x=S.alternate,$=S.stateNode;if(x!==null&&x===h)break;S.tag===5&&$!==null&&(S=$,d?(x=Ks(a,p),x!=null&&w.unshift(xa(a,x,S))):d||(x=Ks(a,p),x!=null&&w.push(xa(a,x,S)))),a=a.return}w.length!==0&&r.push({event:i,listeners:w})}var u0=/\r\n?/g,c0=/\u0000|\uFFFD/g;function hm(r){return(typeof r=="string"?r:""+r).replace(u0,`
`).replace(c0,"")}function iu(r,i,a){if(i=hm(i),hm(r)!==i&&a)throw Error(t(425))}function ou(){}var kh=null,xh=null;function Nh(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bh=typeof setTimeout=="function"?setTimeout:void 0,h0=typeof clearTimeout=="function"?clearTimeout:void 0,dm=typeof Promise=="function"?Promise:void 0,d0=typeof queueMicrotask=="function"?queueMicrotask:typeof dm<"u"?function(r){return dm.resolve(null).then(r).catch(f0)}:bh;function f0(r){setTimeout(function(){throw r})}function Dh(r,i){var a=i,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),is(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);is(i)}function us(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function fm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var ao=Math.random().toString(36).slice(2),rr="__reactFiber$"+ao,Na="__reactProps$"+ao,Cr="__reactContainer$"+ao,Oh="__reactEvents$"+ao,p0="__reactListeners$"+ao,m0="__reactHandles$"+ao;function oi(r){var i=r[rr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Cr]||a[rr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=fm(r);r!==null;){if(a=r[rr])return a;r=fm(r)}return i}r=a,a=r.parentNode}return null}function ba(r){return r=r[rr]||r[Cr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function lo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function au(r){return r[Na]||null}var Vh=[],uo=-1;function cs(r){return{current:r}}function et(r){0>uo||(r.current=Vh[uo],Vh[uo]=null,uo--)}function Ye(r,i){uo++,Vh[uo]=r.current,r.current=i}var hs={},Mt=cs(hs),Qt=cs(!1),ai=hs;function co(r,i){var a=r.type.contextTypes;if(!a)return hs;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function Yt(r){return r=r.childContextTypes,r!=null}function lu(){et(Qt),et(Mt)}function pm(r,i,a){if(Mt.current!==hs)throw Error(t(168));Ye(Mt,i),Ye(Qt,a)}function mm(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,ze(r)||"Unknown",d));return ie({},a,h)}function uu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||hs,ai=Mt.current,Ye(Mt,r),Ye(Qt,Qt.current),!0}function gm(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=mm(r,i,ai),h.__reactInternalMemoizedMergedChildContext=r,et(Qt),et(Mt),Ye(Mt,r)):et(Qt),Ye(Qt,a)}var Pr=null,cu=!1,Lh=!1;function ym(r){Pr===null?Pr=[r]:Pr.push(r)}function g0(r){cu=!0,ym(r)}function ds(){if(!Lh&&Pr!==null){Lh=!0;var r=0,i=Ve;try{var a=Pr;for(Ve=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Pr=null,cu=!1}catch(d){throw Pr!==null&&(Pr=Pr.slice(r+1)),la(qi,ds),d}finally{Ve=i,Lh=!1}}return null}var ho=[],fo=0,hu=null,du=0,wn=[],En=0,li=null,kr=1,xr="";function ui(r,i){ho[fo++]=du,ho[fo++]=hu,hu=r,du=i}function _m(r,i,a){wn[En++]=kr,wn[En++]=xr,wn[En++]=li,li=r;var h=kr;r=xr;var d=32-ln(h)-1;h&=~(1<<d),a+=1;var p=32-ln(i)+d;if(30<p){var w=d-d%5;p=(h&(1<<w)-1).toString(32),h>>=w,d-=w,kr=1<<32-ln(i)+d|a<<d|h,xr=p+r}else kr=1<<p|a<<d|h,xr=r}function Mh(r){r.return!==null&&(ui(r,1),_m(r,1,0))}function Fh(r){for(;r===hu;)hu=ho[--fo],ho[fo]=null,du=ho[--fo],ho[fo]=null;for(;r===li;)li=wn[--En],wn[En]=null,xr=wn[--En],wn[En]=null,kr=wn[--En],wn[En]=null}var fn=null,pn=null,tt=!1,On=null;function vm(r,i){var a=An(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function wm(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,fn=r,pn=us(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,fn=r,pn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=li!==null?{id:kr,overflow:xr}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=An(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,fn=r,pn=null,!0):!1;default:return!1}}function Uh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function jh(r){if(tt){var i=pn;if(i){var a=i;if(!wm(r,i)){if(Uh(r))throw Error(t(418));i=us(a.nextSibling);var h=fn;i&&wm(r,i)?vm(h,a):(r.flags=r.flags&-4097|2,tt=!1,fn=r)}}else{if(Uh(r))throw Error(t(418));r.flags=r.flags&-4097|2,tt=!1,fn=r}}}function Em(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;fn=r}function fu(r){if(r!==fn)return!1;if(!tt)return Em(r),tt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Nh(r.type,r.memoizedProps)),i&&(i=pn)){if(Uh(r))throw Tm(),Error(t(418));for(;i;)vm(r,i),i=us(i.nextSibling)}if(Em(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){pn=us(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}pn=null}}else pn=fn?us(r.stateNode.nextSibling):null;return!0}function Tm(){for(var r=pn;r;)r=us(r.nextSibling)}function po(){pn=fn=null,tt=!1}function Bh(r){On===null?On=[r]:On.push(r)}var y0=ge.ReactCurrentBatchConfig;function Da(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,p=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var S=d.refs;w===null?delete S[p]:S[p]=w},i._stringRef=p,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function pu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Im(r){var i=r._init;return i(r._payload)}function Sm(r){function i(F,b){if(r){var z=F.deletions;z===null?(F.deletions=[b],F.flags|=16):z.push(b)}}function a(F,b){if(!r)return null;for(;b!==null;)i(F,b),b=b.sibling;return null}function h(F,b){for(F=new Map;b!==null;)b.key!==null?F.set(b.key,b):F.set(b.index,b),b=b.sibling;return F}function d(F,b){return F=ws(F,b),F.index=0,F.sibling=null,F}function p(F,b,z){return F.index=z,r?(z=F.alternate,z!==null?(z=z.index,z<b?(F.flags|=2,b):z):(F.flags|=2,b)):(F.flags|=1048576,b)}function w(F){return r&&F.alternate===null&&(F.flags|=2),F}function S(F,b,z,J){return b===null||b.tag!==6?(b=bd(z,F.mode,J),b.return=F,b):(b=d(b,z),b.return=F,b)}function x(F,b,z,J){var fe=z.type;return fe===k?Y(F,b,z.props.children,J,z.key):b!==null&&(b.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===We&&Im(fe)===b.type)?(J=d(b,z.props),J.ref=Da(F,b,z),J.return=F,J):(J=Fu(z.type,z.key,z.props,null,F.mode,J),J.ref=Da(F,b,z),J.return=F,J)}function $(F,b,z,J){return b===null||b.tag!==4||b.stateNode.containerInfo!==z.containerInfo||b.stateNode.implementation!==z.implementation?(b=Dd(z,F.mode,J),b.return=F,b):(b=d(b,z.children||[]),b.return=F,b)}function Y(F,b,z,J,fe){return b===null||b.tag!==7?(b=yi(z,F.mode,J,fe),b.return=F,b):(b=d(b,z),b.return=F,b)}function X(F,b,z){if(typeof b=="string"&&b!==""||typeof b=="number")return b=bd(""+b,F.mode,z),b.return=F,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pe:return z=Fu(b.type,b.key,b.props,null,F.mode,z),z.ref=Da(F,null,b),z.return=F,z;case ne:return b=Dd(b,F.mode,z),b.return=F,b;case We:var J=b._init;return X(F,J(b._payload),z)}if(ct(b)||pe(b))return b=yi(b,F.mode,z,null),b.return=F,b;pu(F,b)}return null}function Q(F,b,z,J){var fe=b!==null?b.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return fe!==null?null:S(F,b,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Pe:return z.key===fe?x(F,b,z,J):null;case ne:return z.key===fe?$(F,b,z,J):null;case We:return fe=z._init,Q(F,b,fe(z._payload),J)}if(ct(z)||pe(z))return fe!==null?null:Y(F,b,z,J,null);pu(F,z)}return null}function se(F,b,z,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number")return F=F.get(z)||null,S(b,F,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Pe:return F=F.get(J.key===null?z:J.key)||null,x(b,F,J,fe);case ne:return F=F.get(J.key===null?z:J.key)||null,$(b,F,J,fe);case We:var ye=J._init;return se(F,b,z,ye(J._payload),fe)}if(ct(J)||pe(J))return F=F.get(z)||null,Y(b,F,J,fe,null);pu(b,J)}return null}function ce(F,b,z,J){for(var fe=null,ye=null,_e=b,Te=b=0,Ct=null;_e!==null&&Te<z.length;Te++){_e.index>Te?(Ct=_e,_e=null):Ct=_e.sibling;var je=Q(F,_e,z[Te],J);if(je===null){_e===null&&(_e=Ct);break}r&&_e&&je.alternate===null&&i(F,_e),b=p(je,b,Te),ye===null?fe=je:ye.sibling=je,ye=je,_e=Ct}if(Te===z.length)return a(F,_e),tt&&ui(F,Te),fe;if(_e===null){for(;Te<z.length;Te++)_e=X(F,z[Te],J),_e!==null&&(b=p(_e,b,Te),ye===null?fe=_e:ye.sibling=_e,ye=_e);return tt&&ui(F,Te),fe}for(_e=h(F,_e);Te<z.length;Te++)Ct=se(_e,F,Te,z[Te],J),Ct!==null&&(r&&Ct.alternate!==null&&_e.delete(Ct.key===null?Te:Ct.key),b=p(Ct,b,Te),ye===null?fe=Ct:ye.sibling=Ct,ye=Ct);return r&&_e.forEach(function(Es){return i(F,Es)}),tt&&ui(F,Te),fe}function he(F,b,z,J){var fe=pe(z);if(typeof fe!="function")throw Error(t(150));if(z=fe.call(z),z==null)throw Error(t(151));for(var ye=fe=null,_e=b,Te=b=0,Ct=null,je=z.next();_e!==null&&!je.done;Te++,je=z.next()){_e.index>Te?(Ct=_e,_e=null):Ct=_e.sibling;var Es=Q(F,_e,je.value,J);if(Es===null){_e===null&&(_e=Ct);break}r&&_e&&Es.alternate===null&&i(F,_e),b=p(Es,b,Te),ye===null?fe=Es:ye.sibling=Es,ye=Es,_e=Ct}if(je.done)return a(F,_e),tt&&ui(F,Te),fe;if(_e===null){for(;!je.done;Te++,je=z.next())je=X(F,je.value,J),je!==null&&(b=p(je,b,Te),ye===null?fe=je:ye.sibling=je,ye=je);return tt&&ui(F,Te),fe}for(_e=h(F,_e);!je.done;Te++,je=z.next())je=se(_e,F,Te,je.value,J),je!==null&&(r&&je.alternate!==null&&_e.delete(je.key===null?Te:je.key),b=p(je,b,Te),ye===null?fe=je:ye.sibling=je,ye=je);return r&&_e.forEach(function(Y0){return i(F,Y0)}),tt&&ui(F,Te),fe}function dt(F,b,z,J){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Pe:e:{for(var fe=z.key,ye=b;ye!==null;){if(ye.key===fe){if(fe=z.type,fe===k){if(ye.tag===7){a(F,ye.sibling),b=d(ye,z.props.children),b.return=F,F=b;break e}}else if(ye.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===We&&Im(fe)===ye.type){a(F,ye.sibling),b=d(ye,z.props),b.ref=Da(F,ye,z),b.return=F,F=b;break e}a(F,ye);break}else i(F,ye);ye=ye.sibling}z.type===k?(b=yi(z.props.children,F.mode,J,z.key),b.return=F,F=b):(J=Fu(z.type,z.key,z.props,null,F.mode,J),J.ref=Da(F,b,z),J.return=F,F=J)}return w(F);case ne:e:{for(ye=z.key;b!==null;){if(b.key===ye)if(b.tag===4&&b.stateNode.containerInfo===z.containerInfo&&b.stateNode.implementation===z.implementation){a(F,b.sibling),b=d(b,z.children||[]),b.return=F,F=b;break e}else{a(F,b);break}else i(F,b);b=b.sibling}b=Dd(z,F.mode,J),b.return=F,F=b}return w(F);case We:return ye=z._init,dt(F,b,ye(z._payload),J)}if(ct(z))return ce(F,b,z,J);if(pe(z))return he(F,b,z,J);pu(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,b!==null&&b.tag===6?(a(F,b.sibling),b=d(b,z),b.return=F,F=b):(a(F,b),b=bd(z,F.mode,J),b.return=F,F=b),w(F)):a(F,b)}return dt}var mo=Sm(!0),Am=Sm(!1),mu=cs(null),gu=null,go=null,zh=null;function $h(){zh=go=gu=null}function qh(r){var i=mu.current;et(mu),r._currentValue=i}function Hh(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function yo(r,i){gu=r,zh=go=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Xt=!0),r.firstContext=null)}function Tn(r){var i=r._currentValue;if(zh!==r)if(r={context:r,memoizedValue:i,next:null},go===null){if(gu===null)throw Error(t(308));go=r,gu.dependencies={lanes:0,firstContext:r}}else go=go.next=r;return i}var ci=null;function Wh(r){ci===null?ci=[r]:ci.push(r)}function Rm(r,i,a,h){var d=i.interleaved;return d===null?(a.next=a,Wh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Nr(r,h)}function Nr(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var fs=!1;function Kh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function br(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ps(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ue&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,Nr(r,a)}return d=h.interleaved,d===null?(i.next=i,Wh(h)):(i.next=d.next,d.next=i),h.interleaved=i,Nr(r,a)}function yu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,pa(r,a)}}function Pm(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function _u(r,i,a,h){var d=r.updateQueue;fs=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var x=S,$=x.next;x.next=null,w===null?p=$:w.next=$,w=x;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==w&&(S===null?Y.firstBaseUpdate=$:S.next=$,Y.lastBaseUpdate=x))}if(p!==null){var X=d.baseState;w=0,Y=$=x=null,S=p;do{var Q=S.lane,se=S.eventTime;if((h&Q)===Q){Y!==null&&(Y=Y.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ce=r,he=S;switch(Q=i,se=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){X=ce.call(se,X,Q);break e}X=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,Q=typeof ce=="function"?ce.call(se,X,Q):ce,Q==null)break e;X=ie({},X,Q);break e;case 2:fs=!0}}S.callback!==null&&S.lane!==0&&(r.flags|=64,Q=d.effects,Q===null?d.effects=[S]:Q.push(S))}else se={eventTime:se,lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?($=Y=se,x=X):Y=Y.next=se,w|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(Y===null&&(x=X),d.baseState=x,d.firstBaseUpdate=$,d.lastBaseUpdate=Y,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);fi|=w,r.lanes=w,r.memoizedState=X}}function km(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var Oa={},sr=cs(Oa),Va=cs(Oa),La=cs(Oa);function hi(r){if(r===Oa)throw Error(t(174));return r}function Gh(r,i){switch(Ye(La,i),Ye(Va,r),Ye(sr,Oa),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Fi(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Fi(i,r)}et(sr),Ye(sr,i)}function _o(){et(sr),et(Va),et(La)}function xm(r){hi(La.current);var i=hi(sr.current),a=Fi(i,r.type);i!==a&&(Ye(Va,r),Ye(sr,a))}function Qh(r){Va.current===r&&(et(sr),et(Va))}var nt=cs(0);function vu(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yh=[];function Xh(){for(var r=0;r<Yh.length;r++)Yh[r]._workInProgressVersionPrimary=null;Yh.length=0}var wu=ge.ReactCurrentDispatcher,Jh=ge.ReactCurrentBatchConfig,di=0,rt=null,Et=null,At=null,Eu=!1,Ma=!1,Fa=0,_0=0;function Ft(){throw Error(t(321))}function Zh(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Dn(r[a],i[a]))return!1;return!0}function ed(r,i,a,h,d,p){if(di=p,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,wu.current=r===null||r.memoizedState===null?T0:I0,r=a(h,d),Ma){p=0;do{if(Ma=!1,Fa=0,25<=p)throw Error(t(301));p+=1,At=Et=null,i.updateQueue=null,wu.current=S0,r=a(h,d)}while(Ma)}if(wu.current=Su,i=Et!==null&&Et.next!==null,di=0,At=Et=rt=null,Eu=!1,i)throw Error(t(300));return r}function td(){var r=Fa!==0;return Fa=0,r}function ir(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?rt.memoizedState=At=r:At=At.next=r,At}function In(){if(Et===null){var r=rt.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var i=At===null?rt.memoizedState:At.next;if(i!==null)At=i,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},At===null?rt.memoizedState=At=r:At=At.next=r}return At}function Ua(r,i){return typeof i=="function"?i(r):i}function nd(r){var i=In(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=Et,d=h.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}h.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,h=h.baseState;var S=w=null,x=null,$=p;do{var Y=$.lane;if((di&Y)===Y)x!==null&&(x=x.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var X={lane:Y,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};x===null?(S=x=X,w=h):x=x.next=X,rt.lanes|=Y,fi|=Y}$=$.next}while($!==null&&$!==p);x===null?w=h:x.next=S,Dn(h,i.memoizedState)||(Xt=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=x,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do p=d.lane,rt.lanes|=p,fi|=p,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function rd(r){var i=In(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=r(p,w.action),w=w.next;while(w!==d);Dn(p,i.memoizedState)||(Xt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,h]}function Nm(){}function bm(r,i){var a=rt,h=In(),d=i(),p=!Dn(h.memoizedState,d);if(p&&(h.memoizedState=d,Xt=!0),h=h.queue,sd(Vm.bind(null,a,h,r),[r]),h.getSnapshot!==i||p||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,ja(9,Om.bind(null,a,h,d,i),void 0,null),Rt===null)throw Error(t(349));(di&30)!==0||Dm(a,i,d)}return d}function Dm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Om(r,i,a,h){i.value=a,i.getSnapshot=h,Lm(i)&&Mm(r)}function Vm(r,i,a){return a(function(){Lm(i)&&Mm(r)})}function Lm(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Dn(r,a)}catch{return!0}}function Mm(r){var i=Nr(r,1);i!==null&&Fn(i,r,1,-1)}function Fm(r){var i=ir();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:r},i.queue=r,r=r.dispatch=E0.bind(null,rt,r),[i.memoizedState,r]}function ja(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function Um(){return In().memoizedState}function Tu(r,i,a,h){var d=ir();rt.flags|=r,d.memoizedState=ja(1|i,a,void 0,h===void 0?null:h)}function Iu(r,i,a,h){var d=In();h=h===void 0?null:h;var p=void 0;if(Et!==null){var w=Et.memoizedState;if(p=w.destroy,h!==null&&Zh(h,w.deps)){d.memoizedState=ja(i,a,p,h);return}}rt.flags|=r,d.memoizedState=ja(1|i,a,p,h)}function jm(r,i){return Tu(8390656,8,r,i)}function sd(r,i){return Iu(2048,8,r,i)}function Bm(r,i){return Iu(4,2,r,i)}function zm(r,i){return Iu(4,4,r,i)}function $m(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function qm(r,i,a){return a=a!=null?a.concat([r]):null,Iu(4,4,$m.bind(null,i,r),a)}function id(){}function Hm(r,i){var a=In();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Zh(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function Wm(r,i){var a=In();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Zh(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function Km(r,i,a){return(di&21)===0?(r.baseState&&(r.baseState=!1,Xt=!0),r.memoizedState=a):(Dn(a,i)||(a=da(),rt.lanes|=a,fi|=a,r.baseState=!0),i)}function v0(r,i){var a=Ve;Ve=a!==0&&4>a?a:4,r(!0);var h=Jh.transition;Jh.transition={};try{r(!1),i()}finally{Ve=a,Jh.transition=h}}function Gm(){return In().memoizedState}function w0(r,i,a){var h=_s(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Qm(r))Ym(i,a);else if(a=Rm(r,i,a,h),a!==null){var d=Gt();Fn(a,r,h,d),Xm(a,i,h)}}function E0(r,i,a){var h=_s(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qm(r))Ym(i,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,S=p(w,a);if(d.hasEagerState=!0,d.eagerState=S,Dn(S,w)){var x=i.interleaved;x===null?(d.next=d,Wh(i)):(d.next=x.next,x.next=d),i.interleaved=d;return}}catch{}finally{}a=Rm(r,i,d,h),a!==null&&(d=Gt(),Fn(a,r,h,d),Xm(a,i,h))}}function Qm(r){var i=r.alternate;return r===rt||i!==null&&i===rt}function Ym(r,i){Ma=Eu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Xm(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,pa(r,a)}}var Su={readContext:Tn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},T0={readContext:Tn,useCallback:function(r,i){return ir().memoizedState=[r,i===void 0?null:i],r},useContext:Tn,useEffect:jm,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,Tu(4194308,4,$m.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Tu(4194308,4,r,i)},useInsertionEffect:function(r,i){return Tu(4,2,r,i)},useMemo:function(r,i){var a=ir();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=ir();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=w0.bind(null,rt,r),[h.memoizedState,r]},useRef:function(r){var i=ir();return r={current:r},i.memoizedState=r},useState:Fm,useDebugValue:id,useDeferredValue:function(r){return ir().memoizedState=r},useTransition:function(){var r=Fm(!1),i=r[0];return r=v0.bind(null,r[1]),ir().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=rt,d=ir();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Rt===null)throw Error(t(349));(di&30)!==0||Dm(h,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,jm(Vm.bind(null,h,p,r),[r]),h.flags|=2048,ja(9,Om.bind(null,h,p,a,i),void 0,null),a},useId:function(){var r=ir(),i=Rt.identifierPrefix;if(tt){var a=xr,h=kr;a=(h&~(1<<32-ln(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=Fa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=_0++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},I0={readContext:Tn,useCallback:Hm,useContext:Tn,useEffect:sd,useImperativeHandle:qm,useInsertionEffect:Bm,useLayoutEffect:zm,useMemo:Wm,useReducer:nd,useRef:Um,useState:function(){return nd(Ua)},useDebugValue:id,useDeferredValue:function(r){var i=In();return Km(i,Et.memoizedState,r)},useTransition:function(){var r=nd(Ua)[0],i=In().memoizedState;return[r,i]},useMutableSource:Nm,useSyncExternalStore:bm,useId:Gm,unstable_isNewReconciler:!1},S0={readContext:Tn,useCallback:Hm,useContext:Tn,useEffect:sd,useImperativeHandle:qm,useInsertionEffect:Bm,useLayoutEffect:zm,useMemo:Wm,useReducer:rd,useRef:Um,useState:function(){return rd(Ua)},useDebugValue:id,useDeferredValue:function(r){var i=In();return Et===null?i.memoizedState=r:Km(i,Et.memoizedState,r)},useTransition:function(){var r=rd(Ua)[0],i=In().memoizedState;return[r,i]},useMutableSource:Nm,useSyncExternalStore:bm,useId:Gm,unstable_isNewReconciler:!1};function Vn(r,i){if(r&&r.defaultProps){i=ie({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function od(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:ie({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Au={isMounted:function(r){return(r=r._reactInternals)?Nn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=Gt(),d=_s(r),p=br(h,d);p.payload=i,a!=null&&(p.callback=a),i=ps(r,p,d),i!==null&&(Fn(i,r,d,h),yu(i,r,d))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=Gt(),d=_s(r),p=br(h,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=ps(r,p,d),i!==null&&(Fn(i,r,d,h),yu(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Gt(),h=_s(r),d=br(a,h);d.tag=2,i!=null&&(d.callback=i),i=ps(r,d,h),i!==null&&(Fn(i,r,h,a),yu(i,r,h))}};function Jm(r,i,a,h,d,p,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,p,w):i.prototype&&i.prototype.isPureReactComponent?!Ra(a,h)||!Ra(d,p):!0}function Zm(r,i,a){var h=!1,d=hs,p=i.contextType;return typeof p=="object"&&p!==null?p=Tn(p):(d=Yt(i)?ai:Mt.current,h=i.contextTypes,p=(h=h!=null)?co(r,d):hs),i=new i(a,p),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Au,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),i}function eg(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&Au.enqueueReplaceState(i,i.state,null)}function ad(r,i,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Kh(r);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Tn(p):(p=Yt(i)?ai:Mt.current,d.context=co(r,p)),d.state=r.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(od(r,i,p,a),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Au.enqueueReplaceState(d,d.state,null),_u(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function vo(r,i){try{var a="",h=i;do a+=ke(h),h=h.return;while(h);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:i,stack:d,digest:null}}function ld(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function ud(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var A0=typeof WeakMap=="function"?WeakMap:Map;function tg(r,i,a){a=br(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){bu||(bu=!0,Sd=h),ud(r,i)},a}function ng(r,i,a){a=br(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){ud(r,i)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){ud(r,i),typeof h!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function rg(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new A0;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),r=U0.bind(null,r,i,a),i.then(r,r))}function sg(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function ig(r,i,a,h,d){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=br(-1,1),i.tag=2,ps(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var R0=ge.ReactCurrentOwner,Xt=!1;function Kt(r,i,a,h){i.child=r===null?Am(i,null,a,h):mo(i,r.child,a,h)}function og(r,i,a,h,d){a=a.render;var p=i.ref;return yo(i,d),h=ed(r,i,a,h,p,d),a=td(),r!==null&&!Xt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,Dr(r,i,d)):(tt&&a&&Mh(i),i.flags|=1,Kt(r,i,h,d),i.child)}function ag(r,i,a,h,d){if(r===null){var p=a.type;return typeof p=="function"&&!Nd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,lg(r,i,p,h,d)):(r=Fu(a.type,null,h,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,(r.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ra,a(w,h)&&r.ref===i.ref)return Dr(r,i,d)}return i.flags|=1,r=ws(p,h),r.ref=i.ref,r.return=i,i.child=r}function lg(r,i,a,h,d){if(r!==null){var p=r.memoizedProps;if(Ra(p,h)&&r.ref===i.ref)if(Xt=!1,i.pendingProps=h=p,(r.lanes&d)!==0)(r.flags&131072)!==0&&(Xt=!0);else return i.lanes=r.lanes,Dr(r,i,d)}return cd(r,i,a,h,d)}function ug(r,i,a){var h=i.pendingProps,d=h.children,p=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Eo,mn),mn|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ye(Eo,mn),mn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=p!==null?p.baseLanes:a,Ye(Eo,mn),mn|=h}else p!==null?(h=p.baseLanes|a,i.memoizedState=null):h=a,Ye(Eo,mn),mn|=h;return Kt(r,i,d,a),i.child}function cg(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function cd(r,i,a,h,d){var p=Yt(a)?ai:Mt.current;return p=co(i,p),yo(i,d),a=ed(r,i,a,h,p,d),h=td(),r!==null&&!Xt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,Dr(r,i,d)):(tt&&h&&Mh(i),i.flags|=1,Kt(r,i,a,d),i.child)}function hg(r,i,a,h,d){if(Yt(a)){var p=!0;uu(i)}else p=!1;if(yo(i,d),i.stateNode===null)Cu(r,i),Zm(i,a,h),ad(i,a,h,d),h=!0;else if(r===null){var w=i.stateNode,S=i.memoizedProps;w.props=S;var x=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=Tn($):($=Yt(a)?ai:Mt.current,$=co(i,$));var Y=a.getDerivedStateFromProps,X=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";X||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==h||x!==$)&&eg(i,w,h,$),fs=!1;var Q=i.memoizedState;w.state=Q,_u(i,h,w,d),x=i.memoizedState,S!==h||Q!==x||Qt.current||fs?(typeof Y=="function"&&(od(i,a,Y,h),x=i.memoizedState),(S=fs||Jm(i,a,S,h,Q,x,$))?(X||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=x),w.props=h,w.state=x,w.context=$,h=S):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,Cm(r,i),S=i.memoizedProps,$=i.type===i.elementType?S:Vn(i.type,S),w.props=$,X=i.pendingProps,Q=w.context,x=a.contextType,typeof x=="object"&&x!==null?x=Tn(x):(x=Yt(a)?ai:Mt.current,x=co(i,x));var se=a.getDerivedStateFromProps;(Y=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==X||Q!==x)&&eg(i,w,h,x),fs=!1,Q=i.memoizedState,w.state=Q,_u(i,h,w,d);var ce=i.memoizedState;S!==X||Q!==ce||Qt.current||fs?(typeof se=="function"&&(od(i,a,se,h),ce=i.memoizedState),($=fs||Jm(i,a,$,h,Q,ce,x)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ce,x),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ce,x)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ce),w.props=h,w.state=ce,w.context=x,h=$):(typeof w.componentDidUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&Q===r.memoizedState||(i.flags|=1024),h=!1)}return hd(r,i,a,h,p,d)}function hd(r,i,a,h,d,p){cg(r,i);var w=(i.flags&128)!==0;if(!h&&!w)return d&&gm(i,a,!1),Dr(r,i,p);h=i.stateNode,R0.current=i;var S=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&w?(i.child=mo(i,r.child,null,p),i.child=mo(i,null,S,p)):Kt(r,i,S,p),i.memoizedState=h.state,d&&gm(i,a,!0),i.child}function dg(r){var i=r.stateNode;i.pendingContext?pm(r,i.pendingContext,i.pendingContext!==i.context):i.context&&pm(r,i.context,!1),Gh(r,i.containerInfo)}function fg(r,i,a,h,d){return po(),Bh(d),i.flags|=256,Kt(r,i,a,h),i.child}var dd={dehydrated:null,treeContext:null,retryLane:0};function fd(r){return{baseLanes:r,cachePool:null,transitions:null}}function pg(r,i,a){var h=i.pendingProps,d=nt.current,p=!1,w=(i.flags&128)!==0,S;if((S=w)||(S=r!==null&&r.memoizedState===null?!1:(d&2)!==0),S?(p=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Ye(nt,d&1),r===null)return jh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,r=h.fallback,p?(h=i.mode,p=i.child,w={mode:"hidden",children:w},(h&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Uu(w,h,0,null),r=yi(r,h,a,null),p.return=i,r.return=i,p.sibling=r,i.child=p,i.child.memoizedState=fd(a),i.memoizedState=dd,r):pd(i,w));if(d=r.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return C0(r,i,w,h,S,d,a);if(p){p=h.fallback,w=i.mode,d=r.child,S=d.sibling;var x={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=x,i.deletions=null):(h=ws(d,x),h.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=ws(S,p):(p=yi(p,w,a,null),p.flags|=2),p.return=i,h.return=i,h.sibling=p,i.child=h,h=p,p=i.child,w=r.child.memoizedState,w=w===null?fd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=r.childLanes&~a,i.memoizedState=dd,h}return p=r.child,r=p.sibling,h=ws(p,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function pd(r,i){return i=Uu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Ru(r,i,a,h){return h!==null&&Bh(h),mo(i,r.child,null,a),r=pd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function C0(r,i,a,h,d,p,w){if(a)return i.flags&256?(i.flags&=-257,h=ld(Error(t(422))),Ru(r,i,w,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(p=h.fallback,d=i.mode,h=Uu({mode:"visible",children:h.children},d,0,null),p=yi(p,d,w,null),p.flags|=2,h.return=i,p.return=i,h.sibling=p,i.child=h,(i.mode&1)!==0&&mo(i,r.child,null,w),i.child.memoizedState=fd(w),i.memoizedState=dd,p);if((i.mode&1)===0)return Ru(r,i,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var S=h.dgst;return h=S,p=Error(t(419)),h=ld(p,h,void 0),Ru(r,i,w,h)}if(S=(w&r.childLanes)!==0,Xt||S){if(h=Rt,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Nr(r,d),Fn(h,r,d,-1))}return xd(),h=ld(Error(t(421))),Ru(r,i,w,h)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=j0.bind(null,r),d._reactRetry=i,null):(r=p.treeContext,pn=us(d.nextSibling),fn=i,tt=!0,On=null,r!==null&&(wn[En++]=kr,wn[En++]=xr,wn[En++]=li,kr=r.id,xr=r.overflow,li=i),i=pd(i,h.children),i.flags|=4096,i)}function mg(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Hh(r.return,i,a)}function md(r,i,a,h,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=h,p.tail=a,p.tailMode=d)}function gg(r,i,a){var h=i.pendingProps,d=h.revealOrder,p=h.tail;if(Kt(r,i,h.children,a),h=nt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&mg(r,a,i);else if(r.tag===19)mg(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(nt,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)r=a.alternate,r!==null&&vu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),md(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&vu(r)===null){i.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}md(i,!0,a,null,p);break;case"together":md(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Cu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Dr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),fi|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=ws(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=ws(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function P0(r,i,a){switch(i.tag){case 3:dg(i),po();break;case 5:xm(i);break;case 1:Yt(i.type)&&uu(i);break;case 4:Gh(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;Ye(mu,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Ye(nt,nt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?pg(r,i,a):(Ye(nt,nt.current&1),r=Dr(r,i,a),r!==null?r.sibling:null);Ye(nt,nt.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return gg(r,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(nt,nt.current),h)break;return null;case 22:case 23:return i.lanes=0,ug(r,i,a)}return Dr(r,i,a)}var yg,gd,_g,vg;yg=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},gd=function(){},_g=function(r,i,a,h){var d=r.memoizedProps;if(d!==h){r=i.stateNode,hi(sr.current);var p=null;switch(a){case"input":d=Li(r,d),h=Li(r,h),p=[];break;case"select":d=ie({},d,{value:void 0}),h=ie({},h,{value:void 0}),p=[];break;case"textarea":d=ta(r,d),h=ta(r,h),p=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=ou)}xn(a,h);var w;a=null;for($ in d)if(!h.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var S=d[$];for(w in S)S.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?p||(p=[]):(p=p||[]).push($,null));for($ in h){var x=h[$];if(S=d!=null?d[$]:void 0,h.hasOwnProperty($)&&x!==S&&(x!=null||S!=null))if($==="style")if(S){for(w in S)!S.hasOwnProperty(w)||x&&x.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in x)x.hasOwnProperty(w)&&S[w]!==x[w]&&(a||(a={}),a[w]=x[w])}else a||(p||(p=[]),p.push($,a)),a=x;else $==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,S=S?S.__html:void 0,x!=null&&S!==x&&(p=p||[]).push($,x)):$==="children"?typeof x!="string"&&typeof x!="number"||(p=p||[]).push($,""+x):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(x!=null&&$==="onScroll"&&Ze("scroll",r),p||S===x||(p=[])):(p=p||[]).push($,x))}a&&(p=p||[]).push("style",a);var $=p;(i.updateQueue=$)&&(i.flags|=4)}},vg=function(r,i,a,h){a!==h&&(i.flags|=4)};function Ba(r,i){if(!tt)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function k0(r,i,a){var h=i.pendingProps;switch(Fh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(i),null;case 1:return Yt(i.type)&&lu(),Ut(i),null;case 3:return h=i.stateNode,_o(),et(Qt),et(Mt),Xh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(fu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,On!==null&&(Cd(On),On=null))),gd(r,i),Ut(i),null;case 5:Qh(i);var d=hi(La.current);if(a=i.type,r!==null&&i.stateNode!=null)_g(r,i,a,h,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Ut(i),null}if(r=hi(sr.current),fu(i)){h=i.stateNode,a=i.type;var p=i.memoizedProps;switch(h[rr]=i,h[Na]=p,r=(i.mode&1)!==0,a){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(d=0;d<Pa.length;d++)Ze(Pa[d],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":Nl(h,p),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",h);break;case"textarea":na(h,p),Ze("invalid",h)}xn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var S=p[w];w==="children"?typeof S=="string"?h.textContent!==S&&(p.suppressHydrationWarning!==!0&&iu(h.textContent,S,r),d=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&iu(h.textContent,S,r),d=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Ze("scroll",h)}switch(a){case"input":Vi(h),ea(h,p,!0);break;case"textarea":Vi(h),Kr(h);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(h.onclick=ou)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ra(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[rr]=i,r[Na]=h,yg(r,i,!1,!1),i.stateNode=r;e:{switch(w=ji(a,h),a){case"dialog":Ze("cancel",r),Ze("close",r),d=h;break;case"iframe":case"object":case"embed":Ze("load",r),d=h;break;case"video":case"audio":for(d=0;d<Pa.length;d++)Ze(Pa[d],r);d=h;break;case"source":Ze("error",r),d=h;break;case"img":case"image":case"link":Ze("error",r),Ze("load",r),d=h;break;case"details":Ze("toggle",r),d=h;break;case"input":Nl(r,h),d=Li(r,h),Ze("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=ie({},h,{value:void 0}),Ze("invalid",r);break;case"textarea":na(r,h),d=ta(r,h),Ze("invalid",r);break;default:d=h}xn(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var x=S[p];p==="style"?Ui(r,x):p==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Dl(r,x)):p==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&Ws(r,x):typeof x=="number"&&Ws(r,""+x):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?x!=null&&p==="onScroll"&&Ze("scroll",r):x!=null&&ae(r,p,x,w))}switch(a){case"input":Vi(r),ea(r,h,!1);break;case"textarea":Vi(r),Kr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Fe(h.value));break;case"select":r.multiple=!!h.multiple,p=h.value,p!=null?kn(r,!!h.multiple,p,!1):h.defaultValue!=null&&kn(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=ou)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ut(i),null;case 6:if(r&&i.stateNode!=null)vg(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=hi(La.current),hi(sr.current),fu(i)){if(h=i.stateNode,a=i.memoizedProps,h[rr]=i,(p=h.nodeValue!==a)&&(r=fn,r!==null))switch(r.tag){case 3:iu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&iu(h.nodeValue,a,(r.mode&1)!==0)}p&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[rr]=i,i.stateNode=h}return Ut(i),null;case 13:if(et(nt),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(tt&&pn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Tm(),po(),i.flags|=98560,p=!1;else if(p=fu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[rr]=i}else po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),p=!1}else On!==null&&(Cd(On),On=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(nt.current&1)!==0?Tt===0&&(Tt=3):xd())),i.updateQueue!==null&&(i.flags|=4),Ut(i),null);case 4:return _o(),gd(r,i),r===null&&ka(i.stateNode.containerInfo),Ut(i),null;case 10:return qh(i.type._context),Ut(i),null;case 17:return Yt(i.type)&&lu(),Ut(i),null;case 19:if(et(nt),p=i.memoizedState,p===null)return Ut(i),null;if(h=(i.flags&128)!==0,w=p.rendering,w===null)if(h)Ba(p,!1);else{if(Tt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=vu(r),w!==null){for(i.flags|=128,Ba(p,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)p=a,r=h,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,r=w.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ye(nt,nt.current&1|2),i.child}r=r.sibling}p.tail!==null&&Je()>To&&(i.flags|=128,h=!0,Ba(p,!1),i.lanes=4194304)}else{if(!h)if(r=vu(w),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ba(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!tt)return Ut(i),null}else 2*Je()-p.renderingStartTime>To&&a!==1073741824&&(i.flags|=128,h=!0,Ba(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Je(),i.sibling=null,a=nt.current,Ye(nt,h?a&1|2:a&1),i):(Ut(i),null);case 22:case 23:return kd(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(mn&1073741824)!==0&&(Ut(i),i.subtreeFlags&6&&(i.flags|=8192)):Ut(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function x0(r,i){switch(Fh(i),i.tag){case 1:return Yt(i.type)&&lu(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return _o(),et(Qt),et(Mt),Xh(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Qh(i),null;case 13:if(et(nt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));po()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return et(nt),null;case 4:return _o(),null;case 10:return qh(i.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var Pu=!1,jt=!1,N0=typeof WeakSet=="function"?WeakSet:Set,le=null;function wo(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(r,i,h)}else a.current=null}function yd(r,i,a){try{a()}catch(h){ot(r,i,h)}}var wg=!1;function b0(r,i){if(kh=Sr,r=Jp(),Eh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,p=h.focusNode;h=h.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,S=-1,x=-1,$=0,Y=0,X=r,Q=null;t:for(;;){for(var se;X!==a||d!==0&&X.nodeType!==3||(S=w+d),X!==p||h!==0&&X.nodeType!==3||(x=w+h),X.nodeType===3&&(w+=X.nodeValue.length),(se=X.firstChild)!==null;)Q=X,X=se;for(;;){if(X===r)break t;if(Q===a&&++$===d&&(S=w),Q===p&&++Y===h&&(x=w),(se=X.nextSibling)!==null)break;X=Q,Q=X.parentNode}X=se}a=S===-1||x===-1?null:{start:S,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(xh={focusedElem:r,selectionRange:a},Sr=!1,le=i;le!==null;)if(i=le,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,le=r;else for(;le!==null;){i=le;try{var ce=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,dt=ce.memoizedState,F=i.stateNode,b=F.getSnapshotBeforeUpdate(i.elementType===i.type?he:Vn(i.type,he),dt);F.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){ot(i,i.return,J)}if(r=i.sibling,r!==null){r.return=i.return,le=r;break}le=i.return}return ce=wg,wg=!1,ce}function za(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&yd(i,a,p)}d=d.next}while(d!==h)}}function ku(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function _d(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function Eg(r){var i=r.alternate;i!==null&&(r.alternate=null,Eg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[rr],delete i[Na],delete i[Oh],delete i[p0],delete i[m0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Tg(r){return r.tag===5||r.tag===3||r.tag===4}function Ig(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Tg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vd(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ou));else if(h!==4&&(r=r.child,r!==null))for(vd(r,i,a),r=r.sibling;r!==null;)vd(r,i,a),r=r.sibling}function wd(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(wd(r,i,a),r=r.sibling;r!==null;)wd(r,i,a),r=r.sibling}var Nt=null,Ln=!1;function ms(r,i,a){for(a=a.child;a!==null;)Sg(r,i,a),a=a.sibling}function Sg(r,i,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Xs,a)}catch{}switch(a.tag){case 5:jt||wo(a,i);case 6:var h=Nt,d=Ln;Nt=null,ms(r,i,a),Nt=h,Ln=d,Nt!==null&&(Ln?(r=Nt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Ln?(r=Nt,a=a.stateNode,r.nodeType===8?Dh(r.parentNode,a):r.nodeType===1&&Dh(r,a),is(r)):Dh(Nt,a.stateNode));break;case 4:h=Nt,d=Ln,Nt=a.stateNode.containerInfo,Ln=!0,ms(r,i,a),Nt=h,Ln=d;break;case 0:case 11:case 14:case 15:if(!jt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&yd(a,i,w),d=d.next}while(d!==h)}ms(r,i,a);break;case 1:if(!jt&&(wo(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(S){ot(a,i,S)}ms(r,i,a);break;case 21:ms(r,i,a);break;case 22:a.mode&1?(jt=(h=jt)||a.memoizedState!==null,ms(r,i,a),jt=h):ms(r,i,a);break;default:ms(r,i,a)}}function Ag(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new N0),i.forEach(function(h){var d=B0.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function Mn(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var p=r,w=i,S=w;e:for(;S!==null;){switch(S.tag){case 5:Nt=S.stateNode,Ln=!1;break e;case 3:Nt=S.stateNode.containerInfo,Ln=!0;break e;case 4:Nt=S.stateNode.containerInfo,Ln=!0;break e}S=S.return}if(Nt===null)throw Error(t(160));Sg(p,w,d),Nt=null,Ln=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch($){ot(d,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Rg(i,r),i=i.sibling}function Rg(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Mn(i,r),or(r),h&4){try{za(3,r,r.return),ku(3,r)}catch(he){ot(r,r.return,he)}try{za(5,r,r.return)}catch(he){ot(r,r.return,he)}}break;case 1:Mn(i,r),or(r),h&512&&a!==null&&wo(a,a.return);break;case 5:if(Mn(i,r),or(r),h&512&&a!==null&&wo(a,a.return),r.flags&32){var d=r.stateNode;try{Ws(d,"")}catch(he){ot(r,r.return,he)}}if(h&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,w=a!==null?a.memoizedProps:p,S=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Mi(d,p),ji(S,w);var $=ji(S,p);for(w=0;w<x.length;w+=2){var Y=x[w],X=x[w+1];Y==="style"?Ui(d,X):Y==="dangerouslySetInnerHTML"?Dl(d,X):Y==="children"?Ws(d,X):ae(d,Y,X,$)}switch(S){case"input":Hs(d,p);break;case"textarea":bl(d,p);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var se=p.value;se!=null?kn(d,!!p.multiple,se,!1):Q!==!!p.multiple&&(p.defaultValue!=null?kn(d,!!p.multiple,p.defaultValue,!0):kn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Na]=p}catch(he){ot(r,r.return,he)}}break;case 6:if(Mn(i,r),or(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(he){ot(r,r.return,he)}}break;case 3:if(Mn(i,r),or(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{is(i.containerInfo)}catch(he){ot(r,r.return,he)}break;case 4:Mn(i,r),or(r);break;case 13:Mn(i,r),or(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Id=Je())),h&4&&Ag(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(jt=($=jt)||Y,Mn(i,r),jt=$):Mn(i,r),or(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Y&&(r.mode&1)!==0)for(le=r,Y=r.child;Y!==null;){for(X=le=Y;le!==null;){switch(Q=le,se=Q.child,Q.tag){case 0:case 11:case 14:case 15:za(4,Q,Q.return);break;case 1:wo(Q,Q.return);var ce=Q.stateNode;if(typeof ce.componentWillUnmount=="function"){h=Q,a=Q.return;try{i=h,ce.props=i.memoizedProps,ce.state=i.memoizedState,ce.componentWillUnmount()}catch(he){ot(h,a,he)}}break;case 5:wo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){kg(X);continue}}se!==null?(se.return=Q,le=se):kg(X)}Y=Y.sibling}e:for(Y=null,X=r;;){if(X.tag===5){if(Y===null){Y=X;try{d=X.stateNode,$?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=X.stateNode,x=X.memoizedProps.style,w=x!=null&&x.hasOwnProperty("display")?x.display:null,S.style.display=Yr("display",w))}catch(he){ot(r,r.return,he)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=$?"":X.memoizedProps}catch(he){ot(r,r.return,he)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===r)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===r)break e;for(;X.sibling===null;){if(X.return===null||X.return===r)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Mn(i,r),or(r),h&4&&Ag(r);break;case 21:break;default:Mn(i,r),or(r)}}function or(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Tg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Ws(d,""),h.flags&=-33);var p=Ig(r);wd(r,p,d);break;case 3:case 4:var w=h.stateNode.containerInfo,S=Ig(r);vd(r,S,w);break;default:throw Error(t(161))}}catch(x){ot(r,r.return,x)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function D0(r,i,a){le=r,Cg(r)}function Cg(r,i,a){for(var h=(r.mode&1)!==0;le!==null;){var d=le,p=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||Pu;if(!w){var S=d.alternate,x=S!==null&&S.memoizedState!==null||jt;S=Pu;var $=jt;if(Pu=w,(jt=x)&&!$)for(le=d;le!==null;)w=le,x=w.child,w.tag===22&&w.memoizedState!==null?xg(d):x!==null?(x.return=w,le=x):xg(d);for(;p!==null;)le=p,Cg(p),p=p.sibling;le=d,Pu=S,jt=$}Pg(r)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,le=p):Pg(r)}}function Pg(r){for(;le!==null;){var i=le;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:jt||ku(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!jt)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Vn(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&km(i,p,h);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}km(i,w,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var x=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var Y=$.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&is(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||i.flags&512&&_d(i)}catch(Q){ot(i,i.return,Q)}}if(i===r){le=null;break}if(a=i.sibling,a!==null){a.return=i.return,le=a;break}le=i.return}}function kg(r){for(;le!==null;){var i=le;if(i===r){le=null;break}var a=i.sibling;if(a!==null){a.return=i.return,le=a;break}le=i.return}}function xg(r){for(;le!==null;){var i=le;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ku(4,i)}catch(x){ot(i,a,x)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(x){ot(i,d,x)}}var p=i.return;try{_d(i)}catch(x){ot(i,p,x)}break;case 5:var w=i.return;try{_d(i)}catch(x){ot(i,w,x)}}}catch(x){ot(i,i.return,x)}if(i===r){le=null;break}var S=i.sibling;if(S!==null){S.return=i.return,le=S;break}le=i.return}}var O0=Math.ceil,xu=ge.ReactCurrentDispatcher,Ed=ge.ReactCurrentOwner,Sn=ge.ReactCurrentBatchConfig,Ue=0,Rt=null,yt=null,bt=0,mn=0,Eo=cs(0),Tt=0,$a=null,fi=0,Nu=0,Td=0,qa=null,Jt=null,Id=0,To=1/0,Or=null,bu=!1,Sd=null,gs=null,Du=!1,ys=null,Ou=0,Ha=0,Ad=null,Vu=-1,Lu=0;function Gt(){return(Ue&6)!==0?Je():Vu!==-1?Vu:Vu=Je()}function _s(r){return(r.mode&1)===0?1:(Ue&2)!==0&&bt!==0?bt&-bt:y0.transition!==null?(Lu===0&&(Lu=da()),Lu):(r=Ve,r!==0||(r=window.event,r=r===void 0?16:Yi(r.type)),r)}function Fn(r,i,a,h){if(50<Ha)throw Ha=0,Ad=null,Error(t(185));ti(r,a,h),((Ue&2)===0||r!==Rt)&&(r===Rt&&((Ue&2)===0&&(Nu|=a),Tt===4&&vs(r,bt)),Zt(r,h),a===1&&Ue===0&&(i.mode&1)===0&&(To=Je()+500,cu&&ds()))}function Zt(r,i){var a=r.callbackNode;ei(r,i);var h=Er(r,r===Rt?bt:0);if(h===0)a!==null&&$i(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&$i(a),i===1)r.tag===0?g0(bg.bind(null,r)):ym(bg.bind(null,r)),d0(function(){(Ue&6)===0&&ds()}),a=null;else{switch(Kn(h)){case 1:a=qi;break;case 4:a=ua;break;case 16:a=Ys;break;case 536870912:a=Hi;break;default:a=Ys}a=jg(a,Ng.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function Ng(r,i){if(Vu=-1,Lu=0,(Ue&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Io()&&r.callbackNode!==a)return null;var h=Er(r,r===Rt?bt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Mu(r,h);else{i=h;var d=Ue;Ue|=2;var p=Og();(Rt!==r||bt!==i)&&(Or=null,To=Je()+500,mi(r,i));do try{M0();break}catch(S){Dg(r,S)}while(!0);$h(),xu.current=p,Ue=d,yt!==null?i=0:(Rt=null,bt=0,i=Tt)}if(i!==0){if(i===2&&(d=ha(r),d!==0&&(h=d,i=Rd(r,d))),i===1)throw a=$a,mi(r,0),vs(r,h),Zt(r,Je()),a;if(i===6)vs(r,h);else{if(d=r.current.alternate,(h&30)===0&&!V0(d)&&(i=Mu(r,h),i===2&&(p=ha(r),p!==0&&(h=p,i=Rd(r,p))),i===1))throw a=$a,mi(r,0),vs(r,h),Zt(r,Je()),a;switch(r.finishedWork=d,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:gi(r,Jt,Or);break;case 3:if(vs(r,h),(h&130023424)===h&&(i=Id+500-Je(),10<i)){if(Er(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Gt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=bh(gi.bind(null,r,Jt,Or),i);break}gi(r,Jt,Or);break;case 4:if(vs(r,h),(h&4194240)===h)break;for(i=r.eventTimes,d=-1;0<h;){var w=31-ln(h);p=1<<w,w=i[w],w>d&&(d=w),h&=~p}if(h=d,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*O0(h/1960))-h,10<h){r.timeoutHandle=bh(gi.bind(null,r,Jt,Or),h);break}gi(r,Jt,Or);break;case 5:gi(r,Jt,Or);break;default:throw Error(t(329))}}}return Zt(r,Je()),r.callbackNode===a?Ng.bind(null,r):null}function Rd(r,i){var a=qa;return r.current.memoizedState.isDehydrated&&(mi(r,i).flags|=256),r=Mu(r,i),r!==2&&(i=Jt,Jt=a,i!==null&&Cd(i)),r}function Cd(r){Jt===null?Jt=r:Jt.push.apply(Jt,r)}function V0(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],p=d.getSnapshot;d=d.value;try{if(!Dn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vs(r,i){for(i&=~Td,i&=~Nu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-ln(i),h=1<<a;r[a]=-1,i&=~h}}function bg(r){if((Ue&6)!==0)throw Error(t(327));Io();var i=Er(r,0);if((i&1)===0)return Zt(r,Je()),null;var a=Mu(r,i);if(r.tag!==0&&a===2){var h=ha(r);h!==0&&(i=h,a=Rd(r,h))}if(a===1)throw a=$a,mi(r,0),vs(r,i),Zt(r,Je()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,gi(r,Jt,Or),Zt(r,Je()),null}function Pd(r,i){var a=Ue;Ue|=1;try{return r(i)}finally{Ue=a,Ue===0&&(To=Je()+500,cu&&ds())}}function pi(r){ys!==null&&ys.tag===0&&(Ue&6)===0&&Io();var i=Ue;Ue|=1;var a=Sn.transition,h=Ve;try{if(Sn.transition=null,Ve=1,r)return r()}finally{Ve=h,Sn.transition=a,Ue=i,(Ue&6)===0&&ds()}}function kd(){mn=Eo.current,et(Eo)}function mi(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,h0(a)),yt!==null)for(a=yt.return;a!==null;){var h=a;switch(Fh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&lu();break;case 3:_o(),et(Qt),et(Mt),Xh();break;case 5:Qh(h);break;case 4:_o();break;case 13:et(nt);break;case 19:et(nt);break;case 10:qh(h.type._context);break;case 22:case 23:kd()}a=a.return}if(Rt=r,yt=r=ws(r.current,null),bt=mn=i,Tt=0,$a=null,Td=Nu=fi=0,Jt=qa=null,ci!==null){for(i=0;i<ci.length;i++)if(a=ci[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,h.next=w}a.pending=h}ci=null}return r}function Dg(r,i){do{var a=yt;try{if($h(),wu.current=Su,Eu){for(var h=rt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Eu=!1}if(di=0,At=Et=rt=null,Ma=!1,Fa=0,Ed.current=null,a===null||a.return===null){Tt=1,$a=i,yt=null;break}e:{var p=r,w=a.return,S=a,x=i;if(i=bt,S.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=x,Y=S,X=Y.tag;if((Y.mode&1)===0&&(X===0||X===11||X===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var se=sg(w);if(se!==null){se.flags&=-257,ig(se,w,S,p,i),se.mode&1&&rg(p,$,i),i=se,x=$;var ce=i.updateQueue;if(ce===null){var he=new Set;he.add(x),i.updateQueue=he}else ce.add(x);break e}else{if((i&1)===0){rg(p,$,i),xd();break e}x=Error(t(426))}}else if(tt&&S.mode&1){var dt=sg(w);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),ig(dt,w,S,p,i),Bh(vo(x,S));break e}}p=x=vo(x,S),Tt!==4&&(Tt=2),qa===null?qa=[p]:qa.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var F=tg(p,x,i);Pm(p,F);break e;case 1:S=x;var b=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(gs===null||!gs.has(z)))){p.flags|=65536,i&=-i,p.lanes|=i;var J=ng(p,S,i);Pm(p,J);break e}}p=p.return}while(p!==null)}Lg(a)}catch(fe){i=fe,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function Og(){var r=xu.current;return xu.current=Su,r===null?Su:r}function xd(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||(fi&268435455)===0&&(Nu&268435455)===0||vs(Rt,bt)}function Mu(r,i){var a=Ue;Ue|=2;var h=Og();(Rt!==r||bt!==i)&&(Or=null,mi(r,i));do try{L0();break}catch(d){Dg(r,d)}while(!0);if($h(),Ue=a,xu.current=h,yt!==null)throw Error(t(261));return Rt=null,bt=0,Tt}function L0(){for(;yt!==null;)Vg(yt)}function M0(){for(;yt!==null&&!Qs();)Vg(yt)}function Vg(r){var i=Ug(r.alternate,r,mn);r.memoizedProps=r.pendingProps,i===null?Lg(r):yt=i,Ed.current=null}function Lg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=k0(a,i,mn),a!==null){yt=a;return}}else{if(a=x0(a,i),a!==null){a.flags&=32767,yt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=r}while(i!==null);Tt===0&&(Tt=5)}function gi(r,i,a){var h=Ve,d=Sn.transition;try{Sn.transition=null,Ve=1,F0(r,i,a,h)}finally{Sn.transition=d,Ve=h}return null}function F0(r,i,a,h){do Io();while(ys!==null);if((Ue&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(gh(r,p),r===Rt&&(yt=Rt=null,bt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Du||(Du=!0,jg(Ys,function(){return Io(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Sn.transition,Sn.transition=null;var w=Ve;Ve=1;var S=Ue;Ue|=4,Ed.current=null,b0(r,a),Rg(a,r),s0(xh),Sr=!!kh,xh=kh=null,r.current=a,D0(a),wr(),Ue=S,Ve=w,Sn.transition=p}else r.current=a;if(Du&&(Du=!1,ys=r,Ou=d),p=r.pendingLanes,p===0&&(gs=null),ql(a.stateNode),Zt(r,Je()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(bu)throw bu=!1,r=Sd,Sd=null,r;return(Ou&1)!==0&&r.tag!==0&&Io(),p=r.pendingLanes,(p&1)!==0?r===Ad?Ha++:(Ha=0,Ad=r):Ha=0,ds(),null}function Io(){if(ys!==null){var r=Kn(Ou),i=Sn.transition,a=Ve;try{if(Sn.transition=null,Ve=16>r?16:r,ys===null)var h=!1;else{if(r=ys,ys=null,Ou=0,(Ue&6)!==0)throw Error(t(331));var d=Ue;for(Ue|=4,le=r.current;le!==null;){var p=le,w=p.child;if((le.flags&16)!==0){var S=p.deletions;if(S!==null){for(var x=0;x<S.length;x++){var $=S[x];for(le=$;le!==null;){var Y=le;switch(Y.tag){case 0:case 11:case 15:za(8,Y,p)}var X=Y.child;if(X!==null)X.return=Y,le=X;else for(;le!==null;){Y=le;var Q=Y.sibling,se=Y.return;if(Eg(Y),Y===$){le=null;break}if(Q!==null){Q.return=se,le=Q;break}le=se}}}var ce=p.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var dt=he.sibling;he.sibling=null,he=dt}while(he!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,le=w;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:za(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,le=F;break e}le=p.return}}var b=r.current;for(le=b;le!==null;){w=le;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,le=z;else e:for(w=b;le!==null;){if(S=le,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:ku(9,S)}}catch(fe){ot(S,S.return,fe)}if(S===w){le=null;break e}var J=S.sibling;if(J!==null){J.return=S.return,le=J;break e}le=S.return}}if(Ue=d,ds(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Xs,r)}catch{}h=!0}return h}finally{Ve=a,Sn.transition=i}}return!1}function Mg(r,i,a){i=vo(a,i),i=tg(r,i,1),r=ps(r,i,1),i=Gt(),r!==null&&(ti(r,1,i),Zt(r,i))}function ot(r,i,a){if(r.tag===3)Mg(r,r,a);else for(;i!==null;){if(i.tag===3){Mg(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(gs===null||!gs.has(h))){r=vo(a,r),r=ng(i,r,1),i=ps(i,r,1),r=Gt(),i!==null&&(ti(i,1,r),Zt(i,r));break}}i=i.return}}function U0(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=Gt(),r.pingedLanes|=r.suspendedLanes&a,Rt===r&&(bt&a)===a&&(Tt===4||Tt===3&&(bt&130023424)===bt&&500>Je()-Id?mi(r,0):Td|=a),Zt(r,i)}function Fg(r,i){i===0&&((r.mode&1)===0?i=1:(i=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var a=Gt();r=Nr(r,i),r!==null&&(ti(r,i,a),Zt(r,a))}function j0(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Fg(r,a)}function B0(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Fg(r,a)}var Ug;Ug=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||Qt.current)Xt=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return Xt=!1,P0(r,i,a);Xt=(r.flags&131072)!==0}else Xt=!1,tt&&(i.flags&1048576)!==0&&_m(i,du,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Cu(r,i),r=i.pendingProps;var d=co(i,Mt.current);yo(i,a),d=ed(null,i,h,r,d,a);var p=td();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(h)?(p=!0,uu(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Kh(i),d.updater=Au,i.stateNode=d,d._reactInternals=i,ad(i,h,r,a),i=hd(null,i,h,!0,p,a)):(i.tag=0,tt&&p&&Mh(i),Kt(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(Cu(r,i),r=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=$0(h),r=Vn(h,r),d){case 0:i=cd(null,i,h,r,a);break e;case 1:i=hg(null,i,h,r,a);break e;case 11:i=og(null,i,h,r,a);break e;case 14:i=ag(null,i,h,Vn(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Vn(h,d),cd(r,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Vn(h,d),hg(r,i,h,d,a);case 3:e:{if(dg(i),r===null)throw Error(t(387));h=i.pendingProps,p=i.memoizedState,d=p.element,Cm(r,i),_u(i,h,null,a);var w=i.memoizedState;if(h=w.element,p.isDehydrated)if(p={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=vo(Error(t(423)),i),i=fg(r,i,h,a,d);break e}else if(h!==d){d=vo(Error(t(424)),i),i=fg(r,i,h,a,d);break e}else for(pn=us(i.stateNode.containerInfo.firstChild),fn=i,tt=!0,On=null,a=Am(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(po(),h===d){i=Dr(r,i,a);break e}Kt(r,i,h,a)}i=i.child}return i;case 5:return xm(i),r===null&&jh(i),h=i.type,d=i.pendingProps,p=r!==null?r.memoizedProps:null,w=d.children,Nh(h,d)?w=null:p!==null&&Nh(h,p)&&(i.flags|=32),cg(r,i),Kt(r,i,w,a),i.child;case 6:return r===null&&jh(i),null;case 13:return pg(r,i,a);case 4:return Gh(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=mo(i,null,h,a):Kt(r,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Vn(h,d),og(r,i,h,d,a);case 7:return Kt(r,i,i.pendingProps,a),i.child;case 8:return Kt(r,i,i.pendingProps.children,a),i.child;case 12:return Kt(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Ye(mu,h._currentValue),h._currentValue=w,p!==null)if(Dn(p.value,w)){if(p.children===d.children&&!Qt.current){i=Dr(r,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var S=p.dependencies;if(S!==null){w=p.child;for(var x=S.firstContext;x!==null;){if(x.context===h){if(p.tag===1){x=br(-1,a&-a),x.tag=2;var $=p.updateQueue;if($!==null){$=$.shared;var Y=$.pending;Y===null?x.next=x:(x.next=Y.next,Y.next=x),$.pending=x}}p.lanes|=a,x=p.alternate,x!==null&&(x.lanes|=a),Hh(p.return,a,i),S.lanes|=a;break}x=x.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,S=w.alternate,S!==null&&(S.lanes|=a),Hh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Kt(r,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,yo(i,a),d=Tn(d),h=h(d),i.flags|=1,Kt(r,i,h,a),i.child;case 14:return h=i.type,d=Vn(h,i.pendingProps),d=Vn(h.type,d),ag(r,i,h,d,a);case 15:return lg(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Vn(h,d),Cu(r,i),i.tag=1,Yt(h)?(r=!0,uu(i)):r=!1,yo(i,a),Zm(i,h,d),ad(i,h,d,a),hd(null,i,h,!0,r,a);case 19:return gg(r,i,a);case 22:return ug(r,i,a)}throw Error(t(156,i.tag))};function jg(r,i){return la(r,i)}function z0(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,i,a,h){return new z0(r,i,a,h)}function Nd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $0(r){if(typeof r=="function")return Nd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===ut)return 14}return 2}function ws(r,i){var a=r.alternate;return a===null?(a=An(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Fu(r,i,a,h,d,p){var w=2;if(h=r,typeof r=="function")Nd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case k:return yi(a.children,d,p,i);case A:w=8,d|=8;break;case P:return r=An(12,a,i,d|2),r.elementType=P,r.lanes=p,r;case C:return r=An(13,a,i,d),r.elementType=C,r.lanes=p,r;case Le:return r=An(19,a,i,d),r.elementType=Le,r.lanes=p,r;case Ke:return Uu(a,d,p,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:w=10;break e;case N:w=9;break e;case M:w=11;break e;case ut:w=14;break e;case We:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=An(w,a,i,d),i.elementType=r,i.type=h,i.lanes=p,i}function yi(r,i,a,h){return r=An(7,r,h,i),r.lanes=a,r}function Uu(r,i,a,h){return r=An(22,r,h,i),r.elementType=Ke,r.lanes=a,r.stateNode={isHidden:!1},r}function bd(r,i,a){return r=An(6,r,null,i),r.lanes=a,r}function Dd(r,i,a){return i=An(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function q0(r,i,a,h,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Od(r,i,a,h,d,p,w,S,x){return r=new q0(r,i,a,S,x),i===1?(i=1,p===!0&&(i|=8)):i=0,p=An(3,null,null,i),r.current=p,p.stateNode=r,p.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(p),r}function H0(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function Bg(r){if(!r)return hs;r=r._reactInternals;e:{if(Nn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Yt(a))return mm(r,a,i)}return i}function zg(r,i,a,h,d,p,w,S,x){return r=Od(a,h,!0,r,d,p,w,S,x),r.context=Bg(null),a=r.current,h=Gt(),d=_s(a),p=br(h,d),p.callback=i??null,ps(a,p,d),r.current.lanes=d,ti(r,d,h),Zt(r,h),r}function ju(r,i,a,h){var d=i.current,p=Gt(),w=_s(d);return a=Bg(a),i.context===null?i.context=a:i.pendingContext=a,i=br(p,w),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=ps(d,i,w),r!==null&&(Fn(r,d,w,p),yu(r,d,w)),w}function Bu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function $g(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Vd(r,i){$g(r,i),(r=r.alternate)&&$g(r,i)}function W0(){return null}var qg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Ld(r){this._internalRoot=r}zu.prototype.render=Ld.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));ju(r,i,null,null)},zu.prototype.unmount=Ld.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;pi(function(){ju(null,r,null,null)}),i[Cr]=null}};function zu(r){this._internalRoot=r}zu.prototype.unstable_scheduleHydration=function(r){if(r){var i=ya();r={blockedOn:null,target:r,priority:i};for(var a=0;a<un.length&&i!==0&&i<un[a].priority;a++);un.splice(a,0,r),a===0&&Gi(r)}};function Md(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function $u(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Hg(){}function K0(r,i,a,h,d){if(d){if(typeof h=="function"){var p=h;h=function(){var $=Bu(w);p.call($)}}var w=zg(i,h,r,0,null,!1,!1,"",Hg);return r._reactRootContainer=w,r[Cr]=w.current,ka(r.nodeType===8?r.parentNode:r),pi(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var S=h;h=function(){var $=Bu(x);S.call($)}}var x=Od(r,0,!1,null,null,!1,!1,"",Hg);return r._reactRootContainer=x,r[Cr]=x.current,ka(r.nodeType===8?r.parentNode:r),pi(function(){ju(i,x,a,h)}),x}function qu(r,i,a,h,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var S=d;d=function(){var x=Bu(w);S.call(x)}}ju(i,w,r,d)}else w=K0(a,i,r,d,h);return Bu(w)}ma=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=Be(i.pendingLanes);a!==0&&(pa(i,a|1),Zt(i,Je()),(Ue&6)===0&&(To=Je()+500,ds()))}break;case 13:pi(function(){var h=Nr(r,1);if(h!==null){var d=Gt();Fn(h,r,1,d)}}),Vd(r,1)}},Wi=function(r){if(r.tag===13){var i=Nr(r,134217728);if(i!==null){var a=Gt();Fn(i,r,134217728,a)}Vd(r,134217728)}},ga=function(r){if(r.tag===13){var i=_s(r),a=Nr(r,i);if(a!==null){var h=Gt();Fn(a,r,i,h)}Vd(r,i)}},ya=function(){return Ve},_a=function(r,i){var a=Ve;try{return Ve=r,i()}finally{Ve=a}},yr=function(r,i,a){switch(i){case"input":if(Hs(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var d=au(h);if(!d)throw Error(t(90));Zo(h),Hs(h,d)}}}break;case"textarea":bl(r,a);break;case"select":i=a.value,i!=null&&kn(r,!!a.multiple,i,!1)}},Vl=Pd,Ll=pi;var G0={usingClientEntryPoint:!1,Events:[ba,lo,au,Jr,Zr,Pd]},Wa={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q0={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=$l(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||W0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Xs=Hu.inject(Q0),an=Hu}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0,en.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(i))throw Error(t(200));return H0(r,i,null,a)},en.createRoot=function(r,i){if(!Md(r))throw Error(t(299));var a=!1,h="",d=qg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Od(r,1,!1,null,null,a,!1,h,d),r[Cr]=i.current,ka(r.nodeType===8?r.parentNode:r),new Ld(i)},en.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=$l(i),r=r===null?null:r.stateNode,r},en.flushSync=function(r){return pi(r)},en.hydrate=function(r,i,a){if(!$u(i))throw Error(t(200));return qu(null,r,i,!0,a)},en.hydrateRoot=function(r,i,a){if(!Md(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,p="",w=qg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=zg(i,null,r,1,a??null,d,!1,p,w),r[Cr]=i.current,ka(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new zu(i)},en.render=function(r,i,a){if(!$u(i))throw Error(t(200));return qu(null,r,i,!1,a)},en.unmountComponentAtNode=function(r){if(!$u(r))throw Error(t(40));return r._reactRootContainer?(pi(function(){qu(null,null,r,!1,function(){r._reactRootContainer=null,r[Cr]=null})}),!0):!1},en.unstable_batchedUpdates=Pd,en.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!$u(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return qu(r,i,a,!1,h)},en.version="18.3.1-next-f1338f8080-20240426",en}var Zg;function rT(){if(Zg)return jd.exports;Zg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jd.exports=nT(),jd.exports}var ey;function sT(){if(ey)return Wu;ey=1;var n=rT();return Wu.createRoot=n.createRoot,Wu.hydrateRoot=n.hydrateRoot,Wu}var iT=sT();const oT=()=>{};var ty={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],g=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},G_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,B=y&63;g||(B=64,c||(I=64)),s.push(t[v],t[E],t[I],t[B])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new lT;const I=l<<2|f>>4;if(s.push(I),y!==64){const B=f<<4&240|y>>2;if(s.push(B),E!==64){const O=y<<6&192|E;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uT=function(n){const e=K_(n);return G_.encodeByteArray(e,!0)},pc=function(n){return uT(n).replace(/\./g,"")},Q_=function(n){try{return G_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=()=>cT().__FIREBASE_DEFAULTS__,dT=()=>{if(typeof process>"u"||typeof ty>"u")return;const n=ty.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Q_(n[1]);return e&&JSON.parse(e)},Lc=()=>{try{return oT()||hT()||dT()||fT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Y_=n=>{var e,t;return(t=(e=Lc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},pT=n=>{const e=Y_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},X_=()=>{var n;return(n=Lc())==null?void 0:n.config},J_=n=>{var e;return(e=Lc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[pc(JSON.stringify(t)),pc(JSON.stringify(c)),""].join(".")}const tl={};function yT(){const n={prod:[],emulator:[]};for(const e of Object.keys(tl))tl[e]?n.emulator.push(e):n.prod.push(e);return n}function _T(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ny=!1;function ev(n,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||tl[n]===e||tl[n]||ny)return;tl[n]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=yT().prod.length>0;function c(){const I=document.getElementById(s);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,B){I.setAttribute("width","24"),I.setAttribute("id",B),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{ny=!0,c()},I}function v(I,B){I.setAttribute("id",B),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=_T(s),B=t("text"),O=document.getElementById(B)||document.createElement("span"),U=t("learnmore"),L=document.getElementById(U)||document.createElement("a"),te=t("preprendIcon"),ue=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ae=I.element;f(ae),v(L,U);const ge=y();g(ue,te),ae.append(ue,O,L,ge),document.body.appendChild(ae)}l?(O.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function wT(){var e;const n=(e=Lc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ST(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function AT(){return!wT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RT(){try{return typeof indexedDB=="object"}catch{return!1}}function CT(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="FirebaseError";class qr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=PT,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?kT(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new qr(o,f,s)}}function kT(n,e){return n.replace(xT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const xT=/\{\$([^}]+)}/g;function NT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ds(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(ry(l)&&ry(c)){if(!Ds(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function ry(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Qa(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ya(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bT(n,e){const t=new DT(n,e);return t.subscribe.bind(t)}class DT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");OT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=$d),o.error===void 0&&(o.error=$d),o.complete===void 0&&(o.complete=$d);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $d(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class Si{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new mT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MT(e))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=_i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_i){return this.instances.has(e)}getOptions(e=_i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:LT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=_i){return this.component?this.component.multipleInstances?e:_i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LT(n){return n===_i?void 0:n}function MT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const UT={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},jT=be.INFO,BT={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},zT=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=BT[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uf{constructor(e){this.name=e,this._logLevel=jT,this._logHandler=zT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const $T=(n,e)=>e.some(t=>n instanceof t);let sy,iy;function qT(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HT(){return iy||(iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tv=new WeakMap,of=new WeakMap,nv=new WeakMap,qd=new WeakMap,jf=new WeakMap;function WT(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ps(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&tv.set(t,n)}).catch(()=>{}),jf.set(e,n),e}function KT(n){if(of.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});of.set(n,e)}let af={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return of.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GT(n){af=n(af)}function QT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Hd(this),e,...t);return nv.set(s,e.sort?e.sort():[e]),Ps(s)}:HT().includes(n)?function(...e){return n.apply(Hd(this),e),Ps(tv.get(this))}:function(...e){return Ps(n.apply(Hd(this),e))}}function YT(n){return typeof n=="function"?QT(n):(n instanceof IDBTransaction&&KT(n),$T(n,qT())?new Proxy(n,af):n)}function Ps(n){if(n instanceof IDBRequest)return WT(n);if(qd.has(n))return qd.get(n);const e=YT(n);return e!==n&&(qd.set(n,e),jf.set(e,n)),e}const Hd=n=>jf.get(n);function XT(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=Ps(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Ps(c.result),g.oldVersion,g.newVersion,Ps(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const JT=["get","getKey","getAll","getAllKeys","count"],ZT=["put","add","delete","clear"],Wd=new Map;function oy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=ZT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||JT.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Wd.set(e,l),l}GT(n=>({...n,get:(e,t,s)=>oy(e,t)||n.get(e,t,s),has:(e,t)=>!!oy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function tI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",ay="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Uf("@firebase/app"),nI="@firebase/app-compat",rI="@firebase/analytics-compat",sI="@firebase/analytics",iI="@firebase/app-check-compat",oI="@firebase/app-check",aI="@firebase/auth",lI="@firebase/auth-compat",uI="@firebase/database",cI="@firebase/data-connect",hI="@firebase/database-compat",dI="@firebase/functions",fI="@firebase/functions-compat",pI="@firebase/installations",mI="@firebase/installations-compat",gI="@firebase/messaging",yI="@firebase/messaging-compat",_I="@firebase/performance",vI="@firebase/performance-compat",wI="@firebase/remote-config",EI="@firebase/remote-config-compat",TI="@firebase/storage",II="@firebase/storage-compat",SI="@firebase/firestore",AI="@firebase/ai",RI="@firebase/firestore-compat",CI="firebase",PI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",kI={[lf]:"fire-core",[nI]:"fire-core-compat",[sI]:"fire-analytics",[rI]:"fire-analytics-compat",[oI]:"fire-app-check",[iI]:"fire-app-check-compat",[aI]:"fire-auth",[lI]:"fire-auth-compat",[uI]:"fire-rtdb",[cI]:"fire-data-connect",[hI]:"fire-rtdb-compat",[dI]:"fire-fn",[fI]:"fire-fn-compat",[pI]:"fire-iid",[mI]:"fire-iid-compat",[gI]:"fire-fcm",[yI]:"fire-fcm-compat",[_I]:"fire-perf",[vI]:"fire-perf-compat",[wI]:"fire-rc",[EI]:"fire-rc-compat",[TI]:"fire-gcs",[II]:"fire-gcs-compat",[SI]:"fire-fst",[RI]:"fire-fst-compat",[AI]:"fire-vertex","fire-js":"fire-js",[CI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,xI=new Map,cf=new Map;function ly(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Do(n){const e=n.name;if(cf.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,n);for(const t of mc.values())ly(t,n);for(const t of xI.values())ly(t,n);return!0}function Bf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new gl("app","Firebase",NI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=PI;function rv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:uf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ks.create("bad-app-name",{appName:String(o)});if(t||(t=X_()),!t)throw ks.create("no-options");const l=mc.get(o);if(l){if(Ds(t,l.options)&&Ds(s,l.config))return l;throw ks.create("duplicate-app",{appName:o})}const c=new FT(o);for(const g of cf.values())c.addComponent(g);const f=new bI(t,s,c);return mc.set(o,f),f}function sv(n=uf){const e=mc.get(n);if(!e&&n===uf&&X_())return rv();if(!e)throw ks.create("no-app",{appName:n});return e}function xs(n,e,t){let s=kI[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(c.join(" "));return}Do(new Si(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebase-heartbeat-database",OI=1,al="firebase-heartbeat-store";let Kd=null;function iv(){return Kd||(Kd=XT(DI,OI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(n=>{throw ks.create("idb-open",{originalErrorMessage:n.message})})),Kd}async function VI(n){try{const t=(await iv()).transaction(al),s=await t.objectStore(al).get(ov(n));return await t.done,s}catch(e){if(e instanceof qr)Ur.warn(e.message);else{const t=ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}}async function uy(n,e){try{const s=(await iv()).transaction(al,"readwrite");await s.objectStore(al).put(e,ov(n)),await s.done}catch(t){if(t instanceof qr)Ur.warn(t.message);else{const s=ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(s.message)}}}function ov(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=1024,MI=30;class FI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=cy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>MI){const c=BI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ur.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cy(),{heartbeatsToSend:s,unsentEntries:o}=UI(this._heartbeatsCache.heartbeats),l=pc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ur.warn(t),""}}}function cy(){return new Date().toISOString().substring(0,10)}function UI(n,e=LI){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),hy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),hy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class jI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RT()?CT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return uy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return uy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hy(n){return pc(JSON.stringify({version:2,heartbeats:n})).length}function BI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n){Do(new Si("platform-logger",e=>new eI(e),"PRIVATE")),Do(new Si("heartbeat",e=>new FI(e),"PRIVATE")),xs(lf,ay,n),xs(lf,ay,"esm2020"),xs("fire-js","")}zI("");var $I="firebase",qI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs($I,qI,"app");function av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HI=av,lv=new gl("auth","Firebase",av());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Uf("@firebase/auth");function WI(n,...e){gc.logLevel<=be.WARN&&gc.warn(`Auth (${$o}): ${n}`,...e)}function ec(n,...e){gc.logLevel<=be.ERROR&&gc.error(`Auth (${$o}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(n,...e){throw zf(n,...e)}function ur(n,...e){return zf(n,...e)}function uv(n,e,t){const s={...HI(),[e]:t};return new gl("auth","Firebase",s).create(e,{appName:n.name})}function Mr(n){return uv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zf(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return lv.create(n,...e)}function ve(n,e,...t){if(!n)throw zf(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ec(e),new Error(e)}function jr(n,e){n||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function KI(){return dy()==="http:"||dy()==="https:"}function dy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KI()||TT()||"connection"in navigator)?navigator.onLine:!0}function QI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=vT()||IT()}get(){return GI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n,e){jr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JI=new _l(3e4,6e4);function js(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Bs(n,e,t,s,o={}){return hv(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=yl({key:n.config.apiKey,...c}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return ET()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&zo(n.emulatorConfig.host)&&(y.credentials="include"),cv.fetch()(await dv(n,n.config.apiHost,t,f),y)})}async function hv(n,e,t){n._canInitEmulator=!1;const s={...YI,...e};try{const o=new eS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ku(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(n,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Ku(n,"email-already-in-use",c);if(g==="USER_DISABLED")throw Ku(n,"user-disabled",c);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw uv(n,v,y);jn(n,v)}}catch(o){if(o instanceof qr)throw o;jn(n,"network-request-failed",{message:String(o)})}}async function vl(n,e,t,s,o={}){const l=await Bs(n,e,t,s,o);return"mfaPendingCredential"in l&&jn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function dv(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?$f(n.config,o):`${n.config.apiScheme}://${o}`;return XI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function ZI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ur(this.auth,"network-request-failed")),JI.get())})}}function Ku(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ur(n,e,s);return o.customData._tokenResponse=t,o}function fy(n){return n!==void 0&&n.enterprise!==void 0}class tS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ZI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nS(n,e){return Bs(n,"GET","/v2/recaptchaConfig",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(n,e){return Bs(n,"POST","/v1/accounts:delete",e)}async function yc(n,e){return Bs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sS(n,e=!1){const t=St(n),s=await t.getIdToken(e),o=qf(s);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:nl(Gd(o.auth_time)),issuedAtTime:nl(Gd(o.iat)),expirationTime:nl(Gd(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Gd(n){return Number(n)*1e3}function qf(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=Q_(t);return o?JSON.parse(o):(ec("Failed to decode base64 JWT payload"),null)}catch(o){return ec("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function py(n){const e=qf(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof qr&&iS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function iS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ll(n,yc(e,{idToken:t}));ve(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?fv(o.providerUserInfo):[],c=lS(n.providerData,l),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),y=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new df(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function aS(n){const e=St(n);await _c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lS(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function fv(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(n,e){const t=await hv(n,{},async()=>{const s=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await dv(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return n.emulatorConfig&&zo(n.emulatorConfig.host)&&(g.credentials="include"),cv.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cS(n,e){return Bs(n,"POST","/v2/accounts:revokeToken",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=py(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await uS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new ko;return s&&(ve(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(ve(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Un{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new oS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new df(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sS(this,e)}reload(){return aS(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await _c(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await ll(this,rS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:B,providerData:O,stsTokenManager:U}=t;ve(E&&U,e,"internal-error");const L=ko.fromJSON(this.name,U);ve(typeof E=="string",e,"internal-error"),Ts(s,e.name),Ts(o,e.name),ve(typeof I=="boolean",e,"internal-error"),ve(typeof B=="boolean",e,"internal-error"),Ts(l,e.name),Ts(c,e.name),Ts(f,e.name),Ts(g,e.name),Ts(y,e.name),Ts(v,e.name);const te=new Un({uid:E,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:B,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:y,lastLoginAt:v});return O&&Array.isArray(O)&&(te.providerData=O.map(ue=>({...ue}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,t,s=!1){const o=new ko;o.updateFromServerResponse(t);const l=new Un({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _c(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?fv(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ko;f.updateFromIdToken(s);const g=new Un({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new df(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map;function Lr(n){jr(n instanceof Function,"Expected a class definition");let e=my.get(n);return e?(jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,my.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pv.type="NONE";const gy=pv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n,e,t){return`firebase:${n}:${e}:${t}`}class xo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=tc(this.userKey,o.apiKey,l),this.fullPersistenceKey=tc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yc(this.auth,{idToken:e}).catch(()=>{});return t?Un._fromGetAccountInfoResponse(this.auth,t,e):null}return Un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new xo(Lr(gy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(gy);const c=tc(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(c);if(v){let E;if(typeof v=="string"){const I=await yc(e,{idToken:v}).catch(()=>{});if(!I)break;E=await Un._fromGetAccountInfoResponse(e,I,v)}else E=Un._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new xo(l,e,s):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new xo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_v(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wv(e))return"Blackberry";if(Ev(e))return"Webos";if(gv(e))return"Safari";if((e.includes("chrome/")||yv(e))&&!e.includes("edge/"))return"Chrome";if(vv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function mv(n=Ht()){return/firefox\//i.test(n)}function gv(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yv(n=Ht()){return/crios\//i.test(n)}function _v(n=Ht()){return/iemobile/i.test(n)}function vv(n=Ht()){return/android/i.test(n)}function wv(n=Ht()){return/blackberry/i.test(n)}function Ev(n=Ht()){return/webos/i.test(n)}function Hf(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hS(n=Ht()){var e;return Hf(n)&&!!((e=window.navigator)!=null&&e.standalone)}function dS(){return ST()&&document.documentMode===10}function Tv(n=Ht()){return Hf(n)||vv(n)||Ev(n)||wv(n)||/windows phone/i.test(n)||_v(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n,e=[]){let t;switch(n){case"Browser":t=yy(Ht());break;case"Worker":t=`${yy(Ht())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(n,e={}){return Bs(n,"GET","/v2/passwordPolicy",js(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=6;class gS{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??mS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new fS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yc(this,{idToken:e}),s=await Un._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Rn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===f)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _c(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Mr(this));const t=e?St(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pS(this),t=new gS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await cS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&WI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ni(n){return St(n)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=bT(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _S(n){Mc=n}function Sv(n){return Mc.loadJS(n)}function vS(){return Mc.recaptchaEnterpriseScript}function wS(){return Mc.gapiScript}function ES(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class TS{constructor(){this.enterprise=new IS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class IS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const SS="recaptcha-enterprise",Av="NO_RECAPTCHA";class AS{constructor(e){this.type=SS,this.auth=Ni(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{nS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new tS(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(g=>{f(g)})})}function o(l,c,f){const g=window.grecaptcha;fy(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(Av)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TS().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&fy(window.grecaptcha))o(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vS();g.length!==0&&(g+=f),Sv(g).then(()=>{o(f,l,c)}).catch(y=>{c(y)})}}).catch(f=>{c(f)})})}}async function vy(n,e,t,s=!1,o=!1){const l=new AS(n);let c;if(o)c=Av;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function ff(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await vy(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await vy(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n,e){const t=Bf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ds(l,e??{}))return o;jn(o,"already-initialized")}return t.initialize({options:e})}function CS(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Lr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function PS(n,e,t){const s=Ni(n);ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Rv(e),{host:c,port:f}=kS(e),g=f===null?"":`:${f}`,y={url:`${l}//${c}${g}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ve(Ds(y,s.config.emulator)&&Ds(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,zo(c)?(Z_(`${l}//${c}${g}`),ev("Auth",!0)):xS()}function Rv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kS(n){const e=Rv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:wy(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:wy(c)}}}function wy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xS(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function NS(n,e){return Bs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(n,e){return vl(n,"POST","/v1/accounts:signInWithPassword",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(n,e){return vl(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))}async function OS(n,e){return vl(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Wf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ul(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ul(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,t,"signInWithPassword",bS);case"emailLink":return DS(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,s,"signUpPassword",NS);case"emailLink":return OS(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(n,e){return vl(n,"POST","/v1/accounts:signInWithIdp",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="http://localhost";class Ai extends Wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Ai(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,No(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:VS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MS(n){const e=Qa(Ya(n)).link,t=e?Qa(Ya(e)).deep_link_id:null,s=Qa(Ya(n)).deep_link_id;return(s?Qa(Ya(s)).link:null)||s||t||e||n}class Kf{constructor(e){const t=Qa(Ya(e)),s=t.apiKey??null,o=t.oobCode??null,l=LS(t.mode??null);ve(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=MS(e);try{return new Kf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return ul._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Kf.parseLink(t);return ve(s,"argument-error"),ul._fromEmailAndCode(e,s.code,s.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Cv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends wl{constructor(){super("facebook.com")}static credential(e){return Ai._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ai._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ss.credential(t,s)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends wl{constructor(){super("github.com")}static credential(e){return Ai._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.GITHUB_SIGN_IN_METHOD="github.com";As.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends wl{constructor(){super("twitter.com")}static credential(e,t){return Ai._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Rs.credential(t,s)}catch{return null}}}Rs.TWITTER_SIGN_IN_METHOD="twitter.com";Rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(n,e){return vl(n,"POST","/v1/accounts:signUp",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Un._fromIdTokenResponse(e,s,o),c=Ey(s);return new Ri({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ey(s);return new Ri({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ey(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends qr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new vc(e,t,s,o)}}function Pv(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(n,l,e,s):l})}async function US(n,e,t=!1){const s=await ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ri._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n,e,t=!1){const{auth:s}=n;if(Rn(s.app))return Promise.reject(Mr(s));const o="reauthenticate";try{const l=await ll(n,Pv(s,o,e,n),t);ve(l.idToken,s,"internal-error");const c=qf(l.idToken);ve(c,s,"internal-error");const{sub:f}=c;return ve(n.uid===f,s,"user-mismatch"),Ri._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&jn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kv(n,e,t=!1){if(Rn(n.app))return Promise.reject(Mr(n));const s="signIn",o=await Pv(n,s,e),l=await Ri._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function BS(n,e){return kv(Ni(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xv(n){const e=Ni(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zS(n,e,t){if(Rn(n.app))return Promise.reject(Mr(n));const s=Ni(n),c=await ff(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FS).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&xv(n),g}),f=await Ri._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function $S(n,e,t){return Rn(n.app)?Promise.reject(Mr(n)):BS(St(n),qo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&xv(n),s})}function qS(n,e,t,s){return St(n).onIdTokenChanged(e,t,s)}function HS(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function WS(n,e,t,s){return St(n).onAuthStateChanged(e,t,s)}function KS(n){return St(n).signOut()}const wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wc,"1"),this.storage.removeItem(wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=1e3,QS=10;class bv extends Nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);dS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,QS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},GS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bv.type="LOCAL";const YS=bv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends Nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dv.type="SESSION";const Ov=Dv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Fc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),g=await XS(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const y=Gf("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function ZS(n){cr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function e1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function n1(){return Vv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="firebaseLocalStorageDb",r1=1,Ec="firebaseLocalStorage",Mv="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(n,e){return n.transaction([Ec],e?"readwrite":"readonly").objectStore(Ec)}function s1(){const n=indexedDB.deleteDatabase(Lv);return new El(n).toPromise()}function pf(){const n=indexedDB.open(Lv,r1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ec,{keyPath:Mv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ec)?e(s):(s.close(),await s1(),e(await pf()))})})}async function Ty(n,e,t){const s=Uc(n,!0).put({[Mv]:e,value:t});return new El(s).toPromise()}async function i1(n,e){const t=Uc(n,!1).get(e),s=await new El(t).toPromise();return s===void 0?null:s.value}function Iy(n,e){const t=Uc(n,!0).delete(e);return new El(t).toPromise()}const o1=800,a1=3;class Fv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>a1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(n1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await e1(),!this.activeServiceWorker)return;this.sender=new JS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pf();return await Ty(e,wc,"1"),await Iy(e,wc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ty(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>i1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new El(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fv.type="LOCAL";const l1=Fv;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n,e){return e?Lr(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends Wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function c1(n){return kv(n.auth,new Qf(n),n.bypassAuthState)}function h1(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),jS(t,new Qf(n),n.bypassAuthState)}async function d1(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),US(t,new Qf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c1;case"linkViaPopup":case"linkViaRedirect":return d1;case"reauthViaPopup":case"reauthViaRedirect":return h1;default:jn(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new _l(2e3,1e4);class Po extends Uv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f1.get())};e()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="pendingRedirect",nc=new Map;class m1 extends Uv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=nc.get(this.auth._key());if(!e){try{const s=await g1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}nc.set(this.auth._key(),e)}return this.bypassAuthState||nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g1(n,e){const t=v1(e),s=_1(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function y1(n,e){nc.set(n._key(),e)}function _1(n){return Lr(n._redirectPersistence)}function v1(n){return tc(p1,n.config.apiKey,n.name)}async function w1(n,e,t=!1){if(Rn(n.app))return Promise.reject(Mr(n));const s=Ni(n),o=u1(s,e),c=await new m1(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=600*1e3;class T1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!jv(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(n,e={}){return Bs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R1=/^https?/;async function C1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await S1(n);for(const t of e)try{if(P1(t))return}catch{}jn(n,"unauthorized-domain")}function P1(n){const e=hf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!R1.test(t))return!1;if(A1.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new _l(3e4,6e4);function Ay(){const n=cr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function x1(n){return new Promise((e,t)=>{var o,l,c;function s(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),t(ur(n,"network-request-failed"))},timeout:k1.get()})}if((l=(o=cr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=cr().gapi)!=null&&c.load)s();else{const f=ES("iframefcb");return cr()[f]=()=>{gapi.load?s():t(ur(n,"network-request-failed"))},Sv(`${wS()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw rc=null,e})}let rc=null;function N1(n){return rc=rc||x1(n),rc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new _l(5e3,15e3),D1="__/auth/iframe",O1="emulator/auth/iframe",V1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M1(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$f(e,O1):`https://${n.config.authDomain}/${D1}`,s={apiKey:e.apiKey,appName:n.name,v:$o},o=L1.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${yl(s).slice(1)}`}async function F1(n){const e=await N1(n),t=cr().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:M1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=ur(n,"network-request-failed"),f=cr().setTimeout(()=>{l(c)},b1.get());function g(){cr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j1=500,B1=600,z1="_blank",$1="http://localhost";class Ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q1(n,e,t,s=j1,o=B1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...U1,width:s.toString(),height:o.toString(),top:l,left:c},y=Ht().toLowerCase();t&&(f=yv(y)?z1:t),mv(y)&&(e=e||$1,g.scrollbars="yes");const v=Object.entries(g).reduce((I,[B,O])=>`${I}${B}=${O},`,"");if(hS(y)&&f!=="_self")return H1(e||"",f),new Ry(null);const E=window.open(e||"",f,v);ve(E,n,"popup-blocked");try{E.focus()}catch{}return new Ry(E)}function H1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="__/auth/handler",K1="emulator/auth/handler",G1=encodeURIComponent("fac");async function Cy(n,e,t,s,o,l){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:$o,eventId:o};if(e instanceof Cv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",NT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof wl){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await n._getAppCheckToken(),y=g?`#${G1}=${encodeURIComponent(g)}`:"";return`${Q1(n)}?${yl(f).slice(1)}${y}`}function Q1({config:n}){return n.emulator?$f(n,K1):`https://${n.authDomain}/${W1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="webStorageSupport";class Y1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ov,this._completeRedirectFn=w1,this._overrideRedirectResult=y1}async _openPopup(e,t,s,o){var c;jr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Cy(e,t,s,hf(),o);return q1(e,l,Gf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Cy(e,t,s,hf(),o);return ZS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(jr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await F1(e),s=new T1(e);return t.register("authEvent",o=>(ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qd,{type:Qd},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Qd];l!==void 0&&t(!!l),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=C1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tv()||gv()||Hf()}}const X1=Y1;var Py="@firebase/auth",ky="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eA(n){Do(new Si("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;ve(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iv(n)},y=new yS(s,o,l,g);return CS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Do(new Si("auth-internal",e=>{const t=Ni(e.getProvider("auth").getImmediate());return(s=>new J1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(Py,ky,Z1(n)),xs(Py,ky,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=300,nA=J_("authIdTokenMaxAge")||tA;let xy=null;const rA=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>nA)return;const o=t==null?void 0:t.token;xy!==o&&(xy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sA(n=sv()){const e=Bf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=RS(n,{popupRedirectResolver:X1,persistence:[l1,YS,Ov]}),s=J_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=rA(l.toString());HS(t,c,()=>c(t.currentUser)),qS(t,f=>c(f))}}const o=Y_("auth");return o&&PS(t,`http://${o}`),t}function iA(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}_S({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=ur("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",iA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eA("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ns,Bv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function P(){}P.prototype=A.prototype,k.F=A.prototype,k.prototype=new P,k.prototype.constructor=k,k.D=function(D,N,M){for(var C=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)C[Le-2]=arguments[Le];return A.prototype[N].apply(D,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,P){P||(P=0);const D=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)D[N]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(N=0;N<16;++N)D[N]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=k.g[0],P=k.g[1],N=k.g[2];let M=k.g[3],C;C=A+(M^P&(N^M))+D[0]+3614090360&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+D[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+D[2]+606105819&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+D[3]+3250441966&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(M^P&(N^M))+D[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+D[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+D[6]+2821735955&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+D[7]+4249261313&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(M^P&(N^M))+D[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+D[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+D[10]+4294925233&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+D[11]+2304563134&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(M^P&(N^M))+D[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=M+(N^A&(P^N))+D[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=N+(P^M&(A^P))+D[14]+2792965006&4294967295,N=M+(C<<17&4294967295|C>>>15),C=P+(A^N&(M^A))+D[15]+1236535329&4294967295,P=N+(C<<22&4294967295|C>>>10),C=A+(N^M&(P^N))+D[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+D[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+D[11]+643717713&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+D[0]+3921069994&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(N^M&(P^N))+D[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+D[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+D[15]+3634488961&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+D[4]+3889429448&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(N^M&(P^N))+D[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+D[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+D[3]+4107603335&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+D[8]+1163531501&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(N^M&(P^N))+D[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=M+(P^N&(A^P))+D[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=N+(A^P&(M^A))+D[7]+1735328473&4294967295,N=M+(C<<14&4294967295|C>>>18),C=P+(M^A&(N^M))+D[12]+2368359562&4294967295,P=N+(C<<20&4294967295|C>>>12),C=A+(P^N^M)+D[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+D[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+D[11]+1839030562&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+D[14]+4259657740&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(P^N^M)+D[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+D[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+D[7]+4139469664&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+D[10]+3200236656&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(P^N^M)+D[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+D[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+D[3]+3572445317&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+D[6]+76029189&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(P^N^M)+D[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=M+(A^P^N)+D[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=N+(M^A^P)+D[15]+530742520&4294967295,N=M+(C<<16&4294967295|C>>>16),C=P+(N^M^A)+D[2]+3299628645&4294967295,P=N+(C<<23&4294967295|C>>>9),C=A+(N^(P|~M))+D[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+D[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+D[14]+2878612391&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+D[5]+4237533241&4294967295,P=N+(C<<21&4294967295|C>>>11),C=A+(N^(P|~M))+D[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+D[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+D[10]+4293915773&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+D[1]+2240044497&4294967295,P=N+(C<<21&4294967295|C>>>11),C=A+(N^(P|~M))+D[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+D[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+D[6]+2734768916&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+D[13]+1309151649&4294967295,P=N+(C<<21&4294967295|C>>>11),C=A+(N^(P|~M))+D[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=M+(P^(A|~N))+D[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=N+(A^(M|~P))+D[2]+718787259&4294967295,N=M+(C<<15&4294967295|C>>>17),C=P+(M^(N|~A))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+M&4294967295}s.prototype.v=function(k,A){A===void 0&&(A=k.length);const P=A-this.blockSize,D=this.C;let N=this.h,M=0;for(;M<A;){if(N==0)for(;M<=P;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<A;)if(D[N++]=k.charCodeAt(M++),N==this.blockSize){o(this,D),N=0;break}}else for(;M<A;)if(D[N++]=k[M++],N==this.blockSize){o(this,D),N=0;break}}this.h=N,this.o+=A},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var P=k.length-8;P<k.length;++P)k[P]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,P=0;P<4;++P)for(let D=0;D<32;D+=8)k[A++]=this.g[P]>>>D&255;return k};function l(k,A){var P=f;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=A(k)}function c(k,A){this.h=A;const P=[];let D=!0;for(let N=k.length-1;N>=0;N--){const M=k[N]|0;D&&M==A||(P[N]=M,D=!1)}this.g=P}var f={};function g(k){return-128<=k&&k<128?l(k,function(A){return new c([A|0],A<0?-1:0)}):new c([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return E;if(k<0)return L(y(-k));const A=[];let P=1;for(let D=0;k>=P;D++)A[D]=k/P|0,P*=4294967296;return new c(A,0)}function v(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return L(v(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(A,8));let D=E;for(let M=0;M<k.length;M+=8){var N=Math.min(8,k.length-M);const C=parseInt(k.substring(M,M+N),A);N<8?(N=y(Math.pow(A,N)),D=D.j(N).add(y(C))):(D=D.j(P),D=D.add(y(C)))}return D}var E=g(0),I=g(1),B=g(16777216);n=c.prototype,n.m=function(){if(U(this))return-L(this).m();let k=0,A=1;for(let P=0;P<this.g.length;P++){const D=this.i(P);k+=(D>=0?D:4294967296+D)*A,A*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(U(this))return"-"+L(this).toString(k);const A=y(Math.pow(k,6));var P=this;let D="";for(;;){const N=ge(P,A).g;P=te(P,N.j(A));let M=((P.g.length>0?P.g[0]:P.h)>>>0).toString(k);if(P=N,O(P))return M+D;for(;M.length<6;)M="0"+M;D=M+D}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function U(k){return k.h==-1}n.l=function(k){return k=te(this,k),U(k)?-1:O(k)?0:1};function L(k){const A=k.g.length,P=[];for(let D=0;D<A;D++)P[D]=~k.g[D];return new c(P,~k.h).add(I)}n.abs=function(){return U(this)?L(this):this},n.add=function(k){const A=Math.max(this.g.length,k.g.length),P=[];let D=0;for(let N=0;N<=A;N++){let M=D+(this.i(N)&65535)+(k.i(N)&65535),C=(M>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);D=C>>>16,M&=65535,C&=65535,P[N]=C<<16|M}return new c(P,P[P.length-1]&-2147483648?-1:0)};function te(k,A){return k.add(L(A))}n.j=function(k){if(O(this)||O(k))return E;if(U(this))return U(k)?L(this).j(L(k)):L(L(this).j(k));if(U(k))return L(this.j(L(k)));if(this.l(B)<0&&k.l(B)<0)return y(this.m()*k.m());const A=this.g.length+k.g.length,P=[];for(var D=0;D<2*A;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(let N=0;N<k.g.length;N++){const M=this.i(D)>>>16,C=this.i(D)&65535,Le=k.i(N)>>>16,ut=k.i(N)&65535;P[2*D+2*N]+=C*ut,ue(P,2*D+2*N),P[2*D+2*N+1]+=M*ut,ue(P,2*D+2*N+1),P[2*D+2*N+1]+=C*Le,ue(P,2*D+2*N+1),P[2*D+2*N+2]+=M*Le,ue(P,2*D+2*N+2)}for(k=0;k<A;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=A;k<2*A;k++)P[k]=0;return new c(P,0)};function ue(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function ae(k,A){this.g=k,this.h=A}function ge(k,A){if(O(A))throw Error("division by zero");if(O(k))return new ae(E,E);if(U(k))return A=ge(L(k),A),new ae(L(A.g),L(A.h));if(U(A))return A=ge(k,L(A)),new ae(L(A.g),A.h);if(k.g.length>30){if(U(k)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var P=I,D=A;D.l(k)<=0;)P=Pe(P),D=Pe(D);var N=ne(P,1),M=ne(D,1);for(D=ne(D,2),P=ne(P,2);!O(D);){var C=M.add(D);C.l(k)<=0&&(N=N.add(P),M=C),D=ne(D,1),P=ne(P,1)}return A=te(k,N.j(A)),new ae(N,A)}for(N=E;k.l(A)>=0;){for(P=Math.max(1,Math.floor(k.m()/A.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),M=y(P),C=M.j(A);U(C)||C.l(k)>0;)P-=D,M=y(P),C=M.j(A);O(M)&&(M=I),N=N.add(M),k=te(k,C)}return new ae(N,k)}n.B=function(k){return ge(this,k).h},n.and=function(k){const A=Math.max(this.g.length,k.g.length),P=[];for(let D=0;D<A;D++)P[D]=this.i(D)&k.i(D);return new c(P,this.h&k.h)},n.or=function(k){const A=Math.max(this.g.length,k.g.length),P=[];for(let D=0;D<A;D++)P[D]=this.i(D)|k.i(D);return new c(P,this.h|k.h)},n.xor=function(k){const A=Math.max(this.g.length,k.g.length),P=[];for(let D=0;D<A;D++)P[D]=this.i(D)^k.i(D);return new c(P,this.h^k.h)};function Pe(k){const A=k.g.length+1,P=[];for(let D=0;D<A;D++)P[D]=k.i(D)<<1|k.i(D-1)>>>31;return new c(P,k.h)}function ne(k,A){const P=A>>5;A%=32;const D=k.g.length-P,N=[];for(let M=0;M<D;M++)N[M]=A>0?k.i(M+P)>>>A|k.i(M+P+1)<<32-A:k.i(M+P);return new c(N,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Bv=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,Ns=c}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zv,Xa,$v,sc,mf,qv,Hv,Wv;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in _))break e;_=_[j]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,j,q){for(var ee=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ee[Ae-2]=arguments[Ae];return m.prototype[j].apply(T,ee)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function B(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function O(u,m){for(let T=1;T<arguments.length;T++){const j=arguments[T];var _=typeof j;if(_=_!="object"?_:j?Array.isArray(j)?"array":_:"null",_=="array"||_=="object"&&typeof j.length=="number"){_=u.length||0;const q=j.length||0;u.length=_+q;for(let ee=0;ee<q;ee++)u[_+ee]=j[ee]}else u.push(j)}}class U{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function L(u){c.setTimeout(()=>{throw u},0)}function te(){var u=k;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ue{constructor(){this.h=this.g=null}add(m,_){const T=ae.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ae=new U(()=>new ge,u=>u.reset());class ge{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,ne=!1,k=new ue,A=()=>{const u=Promise.resolve(void 0);Pe=()=>{u.then(P)}};function P(){for(var u;u=te();){try{u.h.call(u.g)}catch(_){L(_)}var m=ae;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ne=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};c.addEventListener("test",_,m),c.removeEventListener("test",_,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Le(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(Le,N),Le.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),We=0;function Ke(u,m,_,T,j){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=j,this.key=++We,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ie(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function V(u){const m={};for(const _ in u)m[_]=u[_];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(u,m){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)u[_]=T[_];for(let q=0;q<K.length;q++)_=K[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,m,_,T,j){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const ee=Ne(u,m,T,j);return ee>-1?(m=u[ee],_||(m.fa=!1)):(m=new Ke(m,this.src,q,!!T,j),m.fa=_,u.push(m)),m};function ke(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],j=Array.prototype.indexOf.call(T,m,void 0),q;(q=j>=0)&&Array.prototype.splice.call(T,j,1),q&&(Z(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ne(u,m,_,T){for(let j=0;j<u.length;++j){const q=u[j];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==T)return j}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Fe={};function Ge(u,m,_,T,j){if(Array.isArray(m)){for(let q=0;q<m.length;q++)Ge(u,m[q],_,T,j);return null}return _=ea(_),u&&u[ut]?u.J(m,_,f(T)?!!T.capture:!1,j):Wt(u,m,_,!1,T,j)}function Wt(u,m,_,T,j,q){if(!m)throw Error("Invalid event type");const ee=f(j)?!!j.capture:!!j;let Ae=Mi(u);if(Ae||(u[ze]=Ae=new Ee(u)),_=Ae.add(m,_,T,ee,q),_.proxy)return _;if(T=Vi(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)M||(j=ee),j===void 0&&(j=!1),u.addEventListener(m.toString(),T,j);else if(u.attachEvent)u.attachEvent(Li(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Vi(){function u(_){return m.call(u.src,u.listener,_)}const m=Nl;return u}function Zo(u,m,_,T,j){if(Array.isArray(m))for(var q=0;q<m.length;q++)Zo(u,m[q],_,T,j);else T=f(T)?!!T.capture:!!T,_=ea(_),u&&u[ut]?(u=u.i,q=String(m).toString(),q in u.g&&(m=u.g[q],_=Ne(m,_,T,j),_>-1&&(Z(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[q],u.h--)))):u&&(u=Mi(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ne(m,_,T,j)),(_=u>-1?m[u]:null)&&Wr(_))}function Wr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ut])ke(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Li(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Mi(m))?(ke(_,u),_.h==0&&(_.src=null,m[ze]=null)):Z(u)}}}function Li(u){return u in Fe?Fe[u]:Fe[u]="on"+u}function Nl(u,m){if(u.da)u=!0;else{m=new Le(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Wr(u),u=_.call(T,m)}return u}function Mi(u){return u=u[ze],u instanceof Ee?u:null}var Hs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ea(u){return typeof u=="function"?u:(u[Hs]||(u[Hs]=function(m){return u.handleEvent(m)}),u[Hs])}function mt(){D.call(this),this.i=new Ee(this),this.M=this,this.G=null}E(mt,D),mt.prototype[ut]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Zo(this,u,m,_,T)};function ct(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var j=m;m=new N(T,u),Ie(m,j)}j=!0;let q,ee;if(_)for(ee=_.length-1;ee>=0;ee--)q=m.g=_[ee],j=kn(q,T,!0,m)&&j;if(q=m.g=u,j=kn(q,T,!0,m)&&j,j=kn(q,T,!1,m)&&j,_)for(ee=0;ee<_.length;ee++)q=m.g=_[ee],j=kn(q,T,!1,m)&&j}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)Z(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function kn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let q=0;q<m.length;++q){const ee=m[q];if(ee&&!ee.da&&ee.capture==_){const Ae=ee.listener,ht=ee.ha||ee.src;ee.fa&&ke(u.i,ee),j=Ae.call(ht,T)!==!1&&j}}return j&&!T.defaultPrevented}function ta(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:c.setTimeout(u,m||0)}function na(u){u.g=ta(()=>{u.g=null,u.i&&(u.i=!1,na(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bl extends D{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:na(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(u){D.call(this),this.h=u,this.g={}}E(Kr,D);var ra=[];function Fi(u){pe(u.g,function(m,_){this.g.hasOwnProperty(_)&&Wr(m)},u),u.g={}}Kr.prototype.N=function(){Kr.Z.N.call(this),Fi(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gr=c.JSON.stringify,Dl=c.JSON.parse,Ws=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Qr(){}function Ol(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ui(){N.call(this,"d")}E(Ui,N);function sa(){N.call(this,"c")}E(sa,N);var xn={},ji=null;function Xr(){return ji=ji||new mt}xn.Ia="serverreachability";function Bi(u){N.call(this,xn.Ia,u)}E(Bi,N);function yr(u){const m=Xr();ct(m,new Bi(m))}xn.STAT_EVENT="statevent";function _r(u,m){N.call(this,xn.STAT_EVENT,u),this.stat=m}E(_r,N);function it(u){const m=Xr();ct(m,new _r(m,u))}xn.Ja="timingevent";function ia(u,m){N.call(this,xn.Ja,u),this.size=m}E(ia,N);function Jr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},m)}function Zr(){this.g=!0}Zr.prototype.ua=function(){this.g=!1};function Vl(u,m,_,T,j,q){u.info(function(){if(u.g)if(q){var ee="",Ae=q.split("&");for(let qe=0;qe<Ae.length;qe++){var ht=Ae[qe].split("=");if(ht.length>1){const gt=ht[0];ht=ht[1];const dn=gt.split("_");ee=dn.length>=2&&dn[1]=="type"?ee+(gt+"="+ht+"&"):ee+(gt+"=redacted&")}}}else ee=null;else ee=q;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+_+`
`+ee})}function Ll(u,m,_,T,j,q,ee){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+_+`
`+q+" "+ee})}function $n(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ks(u,_)+(T?" "+T:"")})}function Ml(u,m){u.info(function(){return"TIMEOUT: "+m})}Zr.prototype.info=function(){};function Ks(u,m){if(!u.g)return m;if(!m)return null;try{const q=JSON.parse(m);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var _=q[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var j=T[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ee=1;ee<T.length;ee++)T[ee]=""}}}}return Gr(q)}catch{return m}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ts={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fl;function vr(){}E(vr,Qr),vr.prototype.g=function(){return new XMLHttpRequest},Fl=new vr;function qn(u){return encodeURIComponent(String(u))}function zi(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function _n(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Kr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ul}function Ul(){this.i=null,this.g="",this.h=!1}var jl={},oa={};function Nn(u,m,_){u.M=1,u.A=Er(vn(m)),u.u=_,u.R=!0,aa(u,null)}function aa(u,m){u.F=Date.now(),Gs(u),u.B=vn(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ya(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ul,u.g=Yl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new bl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(ra[0]=j.toString()),j=ra);for(let q=0;q<j.length;q++){const ee=Ge(_,j[q],T||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),yr(),Vl(u.i,u.v,u.B,u.l,u.S,u.u)}_n.prototype.ba=function(u){u=u.target;const m=this.O;m&&Xn(u)==3?m.j():this.Y(u)},_n.prototype.Y=function(u){try{if(u==this.g)e:{const Ae=Xn(this.g),ht=this.g.ya(),qe=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Gl(this.g)))){this.K||Ae!=4||ht==7||(ht==8||qe<=0?yr(3):yr(2)),$i(this);var m=this.g.ca();this.X=m;var _=Bl(this);if(this.o=m==200,Ll(this.i,this.v,this.B,this.l,this.S,Ae,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,j=this.g;if((T=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var q=T;break t}}q=null}if(u=q)$n(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,it(12),wr(this),Qs(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=$l(this,_),gt==oa){Ae==4&&(this.m=4,it(14),u=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==jl){this.m=4,it(15),$n(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else $n(this.i,this.l,gt,null),Je(this,gt);if(zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)$n(this.i,this.l,_,"[Invalid Chunked Response]"),wr(this),Qs(this);else if(_.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),si(ee),ee.P=!0,it(11))}}else $n(this.i,this.l,_,null),Je(this,_);Ae==4&&wr(this),this.o&&!this.K&&(Ae==4?Zi(this.j,this):(this.o=!1,Gs(this)))}else va(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),wr(this),Qs(this)}}}catch{}finally{}};function Bl(u){if(!zl(u))return u.g.la();const m=Gl(u.g);if(m==="")return"";let _="";const T=m.length,j=Xn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return wr(u),Qs(u),"";u.h.i=new c.TextDecoder}for(let q=0;q<T;q++)u.h.h=!0,_+=u.h.i.decode(m[q],{stream:!(j&&q==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function zl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function $l(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?oa:(_=Number(m.substring(_,T)),isNaN(_)?jl:(T+=1,T+_>m.length?oa:(m=m.slice(T,T+_),u.C=T+_,m)))}_n.prototype.cancel=function(){this.K=!0,wr(this)};function Gs(u){u.T=Date.now()+u.H,la(u,u.H)}function la(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Jr(y(u.aa,u),m)}function $i(u){u.D&&(c.clearTimeout(u.D),u.D=null)}_n.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ml(this.i,this.B),this.M!=2&&(yr(),it(17)),wr(this),this.m=2,Qs(this)):la(this,this.T-u)};function Qs(u){u.j.I==0||u.K||Zi(u.j,u)}function wr(u){$i(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Fi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Je(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ca(_.h,u))){if(!u.L&&ca(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Ji(_),cn(_);else break e;er(_),it(18)}}else _.xa=j[1],0<_.xa-_.K&&j[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Jr(y(_.Va,_),6e3));Ys(_.h)<=1&&_.ta&&(_.ta=void 0)}else hn(_,11)}else if((u.L||_.g==u)&&Ji(_),!C(m))for(j=_.Ba.g.parse(m),m=0;m<j.length;m++){let qe=j[m];const gt=qe[0];if(!(gt<=_.K))if(_.K=gt,qe=qe[1],_.I==2)if(qe[0]=="c"){_.M=qe[1],_.ba=qe[2];const dn=qe[3];dn!=null&&(_.ka=dn,_.j.info("VER="+_.ka));const Rr=qe[4];Rr!=null&&(_.za=Rr,_.j.info("SVER="+_.za));const tr=qe[5];tr!=null&&typeof tr=="number"&&tr>0&&(T=1.5*tr,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const nr=u.g;if(nr){const no=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(no){var q=T.h;q.g||no.indexOf("spdy")==-1&&no.indexOf("quic")==-1&&no.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Hi(q,q.h),q.h=null))}if(T.G){const Ta=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ta&&(T.wa=Ta,Be(T.J,T.G,Ta))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ee=u;if(T.na=Ea(T,T.L?T.ba:null,T.W),ee.L){Xs(T.h,ee);var Ae=ee,ht=T.O;ht&&(Ae.H=ht),Ae.D&&($i(Ae),Gs(Ae)),T.g=ee}else Lt(T);_.i.length>0&&Ar(_)}else qe[0]!="stop"&&qe[0]!="close"||hn(_,7);else _.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?hn(_,7):Yi(_):qe[0]!="noop"&&_.l&&_.l.qa(qe),_.A=0)}}yr(4)}catch{}}var mh=class{constructor(u,m){this.g=u,this.map=m}};function qi(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ua(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ys(u){return u.h?1:u.g?u.g.size:0}function ca(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Hi(u,m){u.g?u.g.add(m):u.h=m}function Xs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}qi.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function an(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return B(u.i)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ln(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let j,q=null;T>=0?(j=u[_].substring(0,T),q=u[_].substring(T+1)):j=u[_],m(j,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Hn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Hn?(this.l=u.l,Js(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,ns(this,_a(u.i)),this.m=u.m):u&&(m=String(u).match(ql))?(this.l=!1,Js(this,m[1]||"",!0),this.o=Zs(m[2]||""),this.g=Zs(m[3]||"",!0),Wn(this,m[4]),this.h=Zs(m[5]||"",!0),ns(this,m[6]||"",!0),this.m=Zs(m[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}Hn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(ei(m,da,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ei(m,da,!0),"@"),u.push(qn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ei(_,_.charAt(0)=="/"?ti:fa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ei(_,pa)),u.join("")},Hn.prototype.resolve=function(u){const m=vn(this);let _=!!u.j;_?Js(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Wn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var j=m.h.lastIndexOf("/");j!=-1&&(T=m.h.slice(0,j+1)+T)}if(j=T,j==".."||j==".")T="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){T=j.lastIndexOf("/",0)==0,j=j.split("/");const q=[];for(let ee=0;ee<j.length;){const Ae=j[ee++];Ae=="."?T&&ee==j.length&&q.push(""):Ae==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),T&&ee==j.length&&q.push("")):(q.push(Ae),T=!0)}T=q.join("/")}else T=j}return _?m.h=T:_=u.i.toString()!=="",_?ns(m,_a(u.i)):_=!!u.m,_&&(m.m=u.m),m};function vn(u){return new Hn(u)}function Js(u,m,_){u.j=_?Zs(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ns(u,m,_){m instanceof Ve?(u.i=m,Ki(u.i,u.l)):(_||(m=ei(m,gh)),u.i=new Ve(m,u.l))}function Be(u,m,_){u.i.set(m,_)}function Er(u){return Be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Zs(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ei(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,ha),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ha(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var da=/[#\/\?@]/g,fa=/[#\?:]/g,ti=/[#\?]/g,gh=/[#\?@]/g,pa=/#/g;function Ve(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Kn(u){u.g||(u.g=new Map,u.h=0,u.i&&ln(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=Ve.prototype,n.add=function(u,m){Kn(this),this.i=null,u=Gn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ma(u,m){Kn(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Wi(u,m){return Kn(u),m=Gn(u,m),u.g.has(m)}n.forEach=function(u,m){Kn(this),this.g.forEach(function(_,T){_.forEach(function(j){u.call(m,j,T,this)},this)},this)};function ga(u,m){Kn(u);let _=[];if(typeof m=="string")Wi(u,m)&&(_=_.concat(u.g.get(Gn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}n.set=function(u,m){return Kn(this),this.i=null,u=Gn(this,u),Wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=ga(this,u),u.length>0?String(u[0]):m):m};function ya(u,m,_){ma(u,m),_.length>0&&(u.i=null,u.g.set(Gn(u,m),B(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const j=qn(_);_=ga(this,_);for(let q=0;q<_.length;q++){let ee=j;_[q]!==""&&(ee+="="+qn(_[q])),u.push(ee)}}return this.i=u.join("&")};function _a(u){const m=new Ve;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ki(u,m){m&&!u.j&&(Kn(u),u.i=null,u.g.forEach(function(_,T){const j=T.toLowerCase();T!=j&&(ma(this,T),ya(this,j,_))},u)),u.j=m}function Qn(u,m){const _=new Zr;if(c.Image){const T=new Image;T.onload=v(kt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=v(kt,_,"TestLoadImage: error",!1,m,T),T.onabort=v(kt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(kt,_,"TestLoadImage: timeout",!1,m,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Yn(u,m){const _=new Zr,T=new AbortController,j=setTimeout(()=>{T.abort(),kt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(j),q.ok?kt(_,"TestPingServer: ok",!0,m):kt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),kt(_,"TestPingServer: error",!1,m)})}function kt(u,m,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function ni(){this.g=new Ws}function Tr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Tr,Qr),Tr.prototype.g=function(){return new un(this.i,this.h)};function un(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(un,mt),n=un.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,bn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||c).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?rs(this):bn(this),this.readyState==3&&Hl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,rs(this))},n.Na=function(u){this.g&&(this.response=u,rs(this))},n.ga=function(){this.g&&rs(this)};function rs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,bn(u)}n.setRequestHeader=function(u,m){this.A.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function bn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wl(u){let m="";return pe(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Gi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Wl(_),typeof u=="string"?_!=null&&qn(_):Be(u,m,_))}function Qe(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Qe,mt);var Kl=/^https?$/i,yh=["POST","PUT"];n=Qe.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fl.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){ss(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),j=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(yh,m,void 0)>=0)||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ee]of _)this.g.setRequestHeader(q,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){ss(this,q)}};function ss(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,is(u),Sr(u)}function is(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Sr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),Qe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ir(this):this.Xa())},n.Xa=function(){Ir(this)};function Ir(u){if(u.h&&typeof l<"u"){if(u.v&&Xn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=q===0){let ee=String(u.D).match(ql)[1]||null;!ee&&c.self&&c.self.location&&(ee=c.self.location.protocol.slice(0,-1)),T=!Kl.test(ee?ee.toLowerCase():"")}_=T}if(_)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var j=Xn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",is(u)}}finally{Sr(u)}}}}function Sr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ct(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Dl(m)}};function Gl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function va(u){const m={};u=(u.g&&Xn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var _=zi(u[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[j]||[];m[j]=q,q.push(_)}ie(m,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Qi(u){this.za=0,this.i=[],this.j=new Zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jn("baseRetryDelayMs",5e3,u),this.Za=Jn("retryDelaySeedMs",1e4,u),this.Ta=Jn("forwardChannelMaxRetries",2,u),this.va=Jn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new qi(u&&u.concurrentRequestLimit),this.Ba=new ni,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qi.prototype,n.ka=8,n.I=1,n.connect=function(u,m,_,T){it(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Ea(this,null,this.W),Ar(this)};function Yi(u){if(Xi(u),u.I==3){var m=u.V++,_=vn(u.J);if(Be(_,"SID",u.M),Be(_,"RID",m),Be(_,"TYPE","terminate"),Zn(u,_),m=new _n(u,u.j,m),m.M=2,m.A=Er(vn(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=m.A,_=!0),_||(m.g=Yl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Gs(m)}ii(u)}function cn(u){u.g&&(si(u),u.g.cancel(),u.g=null)}function Xi(u){cn(u),u.v&&(c.clearTimeout(u.v),u.v=null),Ji(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Ar(u){if(!ua(u.h)&&!u.m){u.m=!0;var m=u.Ea;Pe||A(),ne||(Pe(),ne=!0),k.add(m,u),u.D=0}}function Ql(u,m){return Ys(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Jr(y(u.Ea,u,m),eo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new _n(this,this.j,u);let q=this.o;if(this.U&&(q?(q=V(q),Ie(q,this.U)):q=this.U),this.u!==null||this.R||(j.J=q,q=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=wa(this,j,m),_=vn(this.J),Be(_,"RID",u),Be(_,"CVER",22),this.G&&Be(_,"X-HTTP-Session-Id",this.G),Zn(this,_),q&&(this.R?m="headers="+qn(Wl(q))+"&"+m:this.u&&Gi(_,this.u,q)),Hi(this.h,j),this.Ra&&Be(_,"TYPE","init"),this.S?(Be(_,"$req",m),Be(_,"SID","null"),j.U=!0,Nn(j,_,null)):Nn(j,_,m),this.I=2}}else this.I==3&&(u?ri(this,u):this.i.length==0||ua(this.h)||ri(this))};function ri(u,m){var _;m?_=m.l:_=u.V++;const T=vn(u.J);Be(T,"SID",u.M),Be(T,"RID",_),Be(T,"AID",u.K),Zn(u,T),u.u&&u.o&&Gi(T,u.u,u.o),_=new _n(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=wa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Hi(u.h,_),Nn(_,T,m)}function Zn(u,m){u.H&&pe(u.H,function(_,T){Be(m,T,_)}),u.l&&pe({},function(_,T){Be(m,T,_)})}function wa(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var j=u.i;let Ae=-1;for(;;){const ht=["count="+_];Ae==-1?_>0?(Ae=j[0].g,ht.push("ofs="+Ae)):Ae=0:ht.push("ofs="+Ae);let qe=!0;for(let gt=0;gt<_;gt++){var q=j[gt].g;const dn=j[gt].map;if(q-=Ae,q<0)Ae=Math.max(0,j[gt].g-100),qe=!1;else try{q="req"+q+"_"||"";try{var ee=dn instanceof Map?dn:Object.entries(dn);for(const[Rr,tr]of ee){let nr=tr;f(tr)&&(nr=Gr(tr)),ht.push(q+Rr+"="+encodeURIComponent(nr))}}catch(Rr){throw ht.push(q+"type="+encodeURIComponent("_badmap")),Rr}}catch{T&&T(dn)}}if(qe){ee=ht.join("&");break e}}ee=void 0}return u=u.i.splice(0,_),m.G=u,ee}function Lt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Pe||A(),ne||(Pe(),ne=!0),k.add(m,u),u.A=0}}function er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Jr(y(u.Da,u),eo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,os(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Jr(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),cn(this),os(this))};function si(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function os(u){u.g=new _n(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=vn(u.na);Be(m,"RID","rpc"),Be(m,"SID",u.M),Be(m,"AID",u.K),Be(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Be(m,"TO",u.ia),Be(m,"TYPE","xmlhttp"),Zn(u,m),u.u&&u.o&&Gi(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Er(vn(m)),_.u=null,_.R=!0,aa(_,u)}n.Va=function(){this.C!=null&&(this.C=null,cn(this),er(this),it(19))};function Ji(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function Zi(u,m){var _=null;if(u.g==m){Ji(u),si(u),u.g=null;var T=2}else if(ca(u.h,m))_=m.G,Xs(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;T=Xr(),ct(T,new ia(T,_)),Ar(u)}else Lt(u);else if(j=m.m,j==3||j==0&&m.X>0||!(T==1&&Ql(u,m)||T==2&&er(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),j){case 1:hn(u,5);break;case 4:hn(u,10);break;case 3:hn(u,6);break;default:hn(u,2)}}}function eo(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function hn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const j=!T;T=new Hn(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Js(T,"https"),Er(T),j?Qn(T.toString(),_):Yn(T.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(m),ii(u),Xi(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function ii(u){if(u.I=0,u.ja=[],u.l){const m=an(u.h);(m.length!=0||u.i.length!=0)&&(O(u.ja,m),O(u.ja,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.oa()}}function Ea(u,m,_){var T=_ instanceof Hn?vn(_):new Hn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Wn(T,T.u);else{var j=c.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const q=new Hn(null);T&&Js(q,T),m&&(q.g=m),j&&Wn(q,j),_&&(q.h=_),T=q}return _=u.G,m=u.wa,_&&m&&Be(T,_,m),Be(T,"VER",u.ka),Zn(u,T),T}function Yl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Qe(new Tr({ab:_})):new Qe(u.ma),m.Fa(u.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}n=Xl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function to(){}to.prototype.g=function(u,m){return new xt(u,m)};function xt(u,m){mt.call(this),this.g=new Qi(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new as(this)}E(xt,mt),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Yi(this.g)},xt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Gr(u),u=_);m.i.push(new mh(m.Ya++,u)),m.I==3&&Ar(m)},xt.prototype.N=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,xt.Z.N.call(this)};function Jl(u){Ui.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Jl,Ui);function Zl(){sa.call(this),this.status=1}E(Zl,sa);function as(u){this.g=u}E(as,Xl),as.prototype.ra=function(){ct(this.g,"a")},as.prototype.qa=function(u){ct(this.g,new Jl(u))},as.prototype.pa=function(u){ct(this.g,new Zl)},as.prototype.oa=function(){ct(this.g,"b")},to.prototype.createWebChannel=to.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,Wv=function(){return new to},Hv=function(){return Xr()},qv=xn,mf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,sc=es,ts.COMPLETE="complete",$v=ts,Ol.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Xa=Ol,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,zv=Qe}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore",Dy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Uf("@firebase/firestore");function So(){return Ci.logLevel}function oe(n,...e){if(Ci.logLevel<=be.DEBUG){const t=e.map(Yf);Ci.debug(`Firestore (${Ho}): ${n}`,...t)}}function Br(n,...e){if(Ci.logLevel<=be.ERROR){const t=e.map(Yf);Ci.error(`Firestore (${Ho}): ${n}`,...t)}}function Oo(n,...e){if(Ci.logLevel<=be.WARN){const t=e.map(Yf);Ci.warn(`Firestore (${Ho}): ${n}`,...t)}}function Yf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Kv(n,s,t)}function Kv(n,e,t){let s=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Br(s),new Error(s)}function $e(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||Kv(e,o,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class aA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lA{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Fr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Fr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new Gv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class uA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new uA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=dA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function De(n,e){return n<e?-1:n>e?1:0}function gf(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Yd(o)===Yd(l)?De(o,l):Yd(o)?1:-1}return De(n.length,e.length)}const fA=55296,pA=57343;function Yd(n){const e=n.charCodeAt(0);return e>=fA&&e<=pA}function Vo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="__name__";class lr{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&we(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=lr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const s=lr.isNumericId(e),o=lr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?lr.extractNumericId(e).compare(lr.extractNumericId(t)):gf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class Xe extends lr{construct(e,t,s){return new Xe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new re(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const mA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends lr{construct(e,t,s){return new Ot(e,t,s)}static isValidIdentifier(e){return mA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vy}static keyField(){return new Ot([Vy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new re(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new re(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new re(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Xe.fromString(e))}static fromName(e){return new me(Xe.fromString(e).popFirst(5))}static empty(){return new me(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n,e,t){if(!t)throw new re(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gA(n,e,t,s){if(e===!0&&s===!0)throw new re(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ly(n){if(!me.isDocumentKey(n))throw new re(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function My(n){if(me.isDocumentKey(n))throw new re(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jc(n);throw new re(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tl(n,e){if(!Yv(n))throw new re(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new re(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=-62135596800,Uy=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Uy);return new He(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fy)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uy}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tl(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:wt("string",He._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new He(0,0))}static max(){return new Se(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function yA(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new He(t+1,0):new He(t,s));return new Os(o,me.empty(),e)}function _A(n){return new Os(n.readTime,n.key,cl)}class Os{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Os(Se.min(),me.empty(),cl)}static max(){return new Os(Se.max(),me.empty(),cl)}}function vA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==wA)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(g=>s(g)))})),c=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((o=>o?G.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{c[y]=v,++f,f===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new G(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function TA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=-1;function zc(n){return n==null}function Tc(n){return n===0&&1/n==-1/0}function IA(n){return typeof n=="number"&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="";function SA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jy(e)),e=AA(n.get(t),e);return jy(e)}function AA(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Xv:t+="";break;default:t+=l}}return t}function jy(n){return n+Xv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Dt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new gn([])}unionWith(e){let t=new It(Ot.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Zv("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const RA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=RA.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ls(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="server_timestamp",tw="__type__",nw="__previous_value__",rw="__local_write_time__";function Zf(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[tw])==null?void 0:s.stringValue)===ew}function $c(n){const e=n.mapValue.fields[nw];return Zf(e)?$c(e):e}function hl(n){const e=Vs(n.mapValue.fields[rw].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t,s,o,l,c,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const Ic="(default)";class dl{constructor(e,t){this.projectId=e,this.database=t||Ic}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database===Ic}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__type__",PA="__max__",Yu={mapValue:{}},iw="__vector__",Sc="value";function Ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zf(n)?4:xA(n)?9007199254740991:kA(n)?10:11:we(28295,{value:n})}function gr(n,e){if(n===e)return!0;const t=Ms(n);if(t!==Ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hl(n).isEqual(hl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Vs(o.timestampValue),f=Vs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ls(o.bytesValue).isEqual(Ls(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ft(o.doubleValue),f=ft(l.doubleValue);return c===f?Tc(c)===Tc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Vo(n.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(By(c)!==By(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!gr(c[g],f[g])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function fl(n,e){return(n.values||[]).find((t=>gr(t,e)))!==void 0}function Lo(n,e){if(n===e)return 0;const t=Ms(n),s=Ms(e);if(t!==s)return De(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=ft(l.integerValue||l.doubleValue),g=ft(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return $y(n.timestampValue,e.timestampValue);case 4:return $y(hl(n),hl(e));case 5:return gf(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Ls(l),g=Ls(c);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=De(f[y],g[y]);if(v!==0)return v}return De(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=De(ft(l.latitude),ft(c.latitude));return f!==0?f:De(ft(l.longitude),ft(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qy(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var I,B,O,U;const f=l.fields||{},g=c.fields||{},y=(I=f[Sc])==null?void 0:I.arrayValue,v=(B=g[Sc])==null?void 0:B.arrayValue,E=De(((O=y==null?void 0:y.values)==null?void 0:O.length)||0,((U=v==null?void 0:v.values)==null?void 0:U.length)||0);return E!==0?E:qy(y,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Yu.mapValue&&c===Yu.mapValue)return 0;if(l===Yu.mapValue)return 1;if(c===Yu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=c.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const I=gf(g[E],v[E]);if(I!==0)return I;const B=Lo(f[g[E]],y[v[E]]);if(B!==0)return B}return De(g.length,v.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function $y(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=Vs(n),s=Vs(e),o=De(t.seconds,s.seconds);return o!==0?o:De(t.nanos,s.nanos)}function qy(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Lo(t[o],s[o]);if(l)return l}return De(t.length,s.length)}function Mo(n){return yf(n)}function yf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Vs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ls(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=yf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${yf(t.fields[c])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function ic(n){switch(Ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$c(n);return e?16+ic(e):16;case 5:return 2*n.stringValue.length;case 6:return Ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+ic(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return zs(s.fields,((l,c)=>{o+=l.length+ic(c)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function Hy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _f(n){return!!n&&"integerValue"in n}function ep(n){return!!n&&"arrayValue"in n}function Wy(n){return!!n&&"nullValue"in n}function Ky(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oc(n){return!!n&&"mapValue"in n}function kA(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[sw])==null?void 0:s.stringValue)===iw}function rl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zs(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=rl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(n.arrayValue.values[t]);return e}return{...n}}function xA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!oc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=Ot.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=rl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());oc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];oc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){zs(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new nn(rl(this.value))}}function ow(n){const e=[];return zs(n.fields,((t,s)=>{const o=new Ot([t]);if(oc(s)){const l=ow(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),nn.empty(),0)}static newFoundDocument(e,t,s,o){return new $t(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Se.min(),Se.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Se.min(),Se.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.position=e,this.inclusive=t}}function Gy(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=me.comparator(me.fromName(c.referenceValue),t.key):s=Lo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function NA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{}class vt extends aw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new DA(e,t,s):t==="array-contains"?new LA(e,s):t==="in"?new MA(e,s):t==="not-in"?new FA(e,s):t==="array-contains-any"?new UA(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new OA(e,s):new VA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Lo(t,this.value)):t!==null&&Ms(this.value)===Ms(t)&&this.matchesComparison(Lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends aw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bn(e,t)}matches(e){return lw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lw(n){return n.op==="and"}function uw(n){return bA(n)&&lw(n)}function bA(n){for(const e of n.filters)if(e instanceof Bn)return!1;return!0}function vf(n){if(n instanceof vt)return n.field.canonicalString()+n.op.toString()+Mo(n.value);if(uw(n))return n.filters.map((e=>vf(e))).join(",");{const e=n.filters.map((t=>vf(t))).join(",");return`${n.op}(${e})`}}function cw(n,e){return n instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&gr(s.value,o.value)})(n,e):n instanceof Bn?(function(s,o){return o instanceof Bn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&cw(c,o.filters[f])),!0):!1})(n,e):void we(19439)}function hw(n){return n instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mo(t.value)}`})(n):n instanceof Bn?(function(t){return t.op.toString()+" {"+t.getFilters().map(hw).join(" ,")+"}"})(n):"Filter"}class DA extends vt{constructor(e,t,s){super(e,t,s),this.key=me.fromName(s.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class OA extends vt{constructor(e,t){super(e,"in",t),this.keys=dw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class VA extends vt{constructor(e,t){super(e,"not-in",t),this.keys=dw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>me.fromName(s.referenceValue)))}class LA extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&fl(t.arrayValue,this.value)}}class MA extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}}class FA extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fl(this.value.arrayValue,t)}}class UA extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>fl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Yy(n,e=null,t=[],s=[],o=null,l=null,c=null){return new jA(n,e,t,s,o,l,c)}function tp(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>vf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Mo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Mo(s))).join(",")),e.Te=t}return e.Te}function np(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qy(n.startAt,e.startAt)&&Qy(n.endAt,e.endAt)}function wf(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BA(n,e,t,s,o,l,c,f){return new Go(n,e,t,s,o,l,c,f)}function qc(n){return new Go(n)}function Xy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fw(n){return n.collectionGroup!==null}function sl(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new It(Ot.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pl(l,s))})),t.has(Ot.keyField().canonicalString())||e.Ie.push(new pl(Ot.keyField(),s))}return e.Ie}function hr(n){const e=Re(n);return e.Ee||(e.Ee=zA(e,sl(n))),e.Ee}function zA(n,e){if(n.limitType==="F")return Yy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new pl(o.field,l)}));const t=n.endAt?new Ac(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ac(n.startAt.position,n.startAt.inclusive):null;return Yy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Ef(n,e){const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tf(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hc(n,e){return np(hr(n),hr(e))&&n.limitType===e.limitType}function pw(n){return`${tp(hr(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>hw(o))).join(", ")}]`),zc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Mo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Mo(o))).join(",")),`Target(${s})`})(hr(n))}; limitType=${n.limitType})`}function Wc(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):me.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of sl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,g){const y=Gy(c,f,g);return c.inclusive?y<=0:y<0})(s.startAt,sl(s),o)||s.endAt&&!(function(c,f,g){const y=Gy(c,f,g);return c.inclusive?y>=0:y>0})(s.endAt,sl(s),o))})(n,e)}function $A(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mw(n){return(e,t)=>{let s=!1;for(const o of sl(n)){const l=qA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function qA(n,e,t){const s=n.field.isKeyField()?me.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Lo(g,y):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Jv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=new st(me.comparator);function zr(){return HA}const gw=new st(me.comparator);function Ja(...n){let e=gw;for(const t of n)e=e.insert(t.key,t);return e}function yw(n){let e=gw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function vi(){return il()}function _w(){return il()}function il(){return new bi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const WA=new st(me.comparator),KA=new It(me.comparator);function Oe(...n){let e=KA;for(const t of n)e=e.add(t);return e}const GA=new It(De);function QA(){return GA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function vw(n){return{integerValue:""+n}}function YA(n,e){return IA(e)?vw(e):rp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function XA(n,e,t){return n instanceof Rc?(function(o,l){const c={fields:{[tw]:{stringValue:ew},[rw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Zf(l)&&(l=$c(l)),l&&(c.fields[nw]=l),{mapValue:c}})(t,e):n instanceof Fo?Ew(n,e):n instanceof ml?Tw(n,e):(function(o,l){const c=ww(o,l),f=Jy(c)+Jy(o.Ae);return _f(c)&&_f(o.Ae)?vw(f):rp(o.serializer,f)})(n,e)}function JA(n,e,t){return n instanceof Fo?Ew(n,e):n instanceof ml?Tw(n,e):t}function ww(n,e){return n instanceof Cc?(function(s){return _f(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Rc extends Kc{}class Fo extends Kc{constructor(e){super(),this.elements=e}}function Ew(n,e){const t=Iw(e);for(const s of n.elements)t.some((o=>gr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ml extends Kc{constructor(e){super(),this.elements=e}}function Tw(n,e){let t=Iw(e);for(const s of n.elements)t=t.filter((o=>!gr(o,s)));return{arrayValue:{values:t}}}class Cc extends Kc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Jy(n){return ft(n.integerValue||n.doubleValue)}function Iw(n){return ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.field=e,this.transform=t}}function eR(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Fo&&o instanceof Fo||s instanceof ml&&o instanceof ml?Vo(s.elements,o.elements,gr):s instanceof Cc&&o instanceof Cc?gr(s.Ae,o.Ae):s instanceof Rc&&o instanceof Rc})(n.transform,e.transform)}class tR{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ac(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gc{}function Sw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sp(n.key,Pn.none()):new Il(n.key,n.data,Pn.none());{const t=n.data,s=nn.empty();let o=new It(Ot.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new $s(n.key,s,new gn(o.toArray()),Pn.none())}}function nR(n,e,t){n instanceof Il?(function(o,l,c){const f=o.value.clone(),g=e_(o.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof $s?(function(o,l,c){if(!ac(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=e_(o.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(Aw(o)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ol(n,e,t,s){return n instanceof Il?(function(l,c,f,g){if(!ac(l.precondition,c))return f;const y=l.value.clone(),v=t_(l.fieldTransforms,g,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof $s?(function(l,c,f,g){if(!ac(l.precondition,c))return f;const y=t_(l.fieldTransforms,g,c),v=c.data;return v.setAll(Aw(l)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,f){return ac(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function rR(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=ww(s.transform,o||null);l!=null&&(t===null&&(t=nn.empty()),t.set(s.field,l))}return t||null}function Zy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,((l,c)=>eR(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Il extends Gc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $s extends Gc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Aw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function e_(n,e,t){const s=new Map;$e(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,JA(c,f,t[o]))}return s}function t_(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,XA(l,c,e))}return s}class sp extends Gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sR extends Gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&nR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ol(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ol(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_w();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const g=Sw(c,f);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,s)=>Zy(t,s)))&&Vo(this.baseMutations,e.baseMutations,((t,s)=>Zy(t,s)))}}class ip{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return WA})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new ip(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Me;function lR(n){switch(n){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function Rw(n){if(n===void 0)return Br("GRPC error has no .code"),W.UNKNOWN;switch(n){case _t.OK:return W.OK;case _t.CANCELLED:return W.CANCELLED;case _t.UNKNOWN:return W.UNKNOWN;case _t.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case _t.INTERNAL:return W.INTERNAL;case _t.UNAVAILABLE:return W.UNAVAILABLE;case _t.UNAUTHENTICATED:return W.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case _t.NOT_FOUND:return W.NOT_FOUND;case _t.ALREADY_EXISTS:return W.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return W.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case _t.ABORTED:return W.ABORTED;case _t.OUT_OF_RANGE:return W.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return W.UNIMPLEMENTED;case _t.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:n})}}(Me=_t||(_t={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Ns([4294967295,4294967295],0);function n_(n){const e=uR().encode(n),t=new Bv;return t.update(e),new Uint8Array(t.digest())}function r_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ns([t,s],0),new Ns([o,l],0)]}class op{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Za(`Invalid padding: ${t}`);if(s<0)throw new Za(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Za(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Za(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ns.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ns.fromNumber(s)));return o.compare(cR)===1&&(o=new Ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=n_(e),[s,o]=r_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new op(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=n_(e),[s,o]=r_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qc(Se.min(),o,new st(De),zr(),Oe())}}class Sl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Sl(s,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Cw{constructor(e,t){this.targetId=e,this.Ce=t}}class Pw{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class s_{constructor(){this.ve=0,this.Fe=i_(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),s=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we(38017,{changeType:l})}})),new Sl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=i_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hR{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=Xu(),this.He=Xu(),this.Ye=new st(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(wf(l))if(s===0){const c=new me(l.path);this.et(t,c,$t.newNoDocument(c,Se.min()))}else $e(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Ls(s).toUint8Array()}catch(g){if(g instanceof Zv)return Oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new op(c,o,l)}catch(g){return Oo(g instanceof Za?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&wf(f.target)){const g=new me(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,$t.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Oe();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Qc(e,t,this.Ye,this.je,s);return this.je=zr(),this.Je=Xu(),this.He=Xu(),this.Ye=new st(De),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new s_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new s_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xu(){return new st(me.comparator)}function i_(){return new st(me.comparator)}const dR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pR={and:"AND",or:"OR"};class mR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function If(n,e){return n.useProto3Json||zc(e)?e:{value:e}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gR(n,e){return Pc(n,e.toTimestamp())}function dr(n){return $e(!!n,49232),Se.fromTimestamp((function(t){const s=Vs(t);return new He(s.seconds,s.nanos)})(n))}function ap(n,e){return Sf(n,e).canonicalString()}function Sf(n,e){const t=(function(o){return new Xe(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xw(n){const e=Xe.fromString(n);return $e(Vw(e),10190,{key:e.toString()}),e}function Af(n,e){return ap(n.databaseId,e.path)}function Xd(n,e){const t=xw(e);if(t.get(1)!==n.databaseId.projectId)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(bw(t))}function Nw(n,e){return ap(n.databaseId,e)}function yR(n){const e=xw(n);return e.length===4?Xe.emptyPath():bw(e)}function Rf(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bw(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function o_(n,e,t){return{name:Af(n,e),fields:t.value.mapValue.fields}}function _R(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?($e(v===void 0||typeof v=="string",58123),Vt.fromBase64String(v||"")):($e(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Vt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const v=y.code===void 0?W.UNKNOWN:Rw(y.code);return new re(v,y.message||"")})(c);t=new Pw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xd(n,s.document.name),l=dr(s.document.updateTime),c=s.document.createTime?dr(s.document.createTime):Se.min(),f=new nn({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(o,l,c,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new lc(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xd(n,s.document),l=s.readTime?dr(s.readTime):Se.min(),c=$t.newNoDocument(o,l),f=s.removedTargetIds||[];t=new lc([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xd(n,s.document),l=s.removedTargetIds||[];t=new lc([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new aR(o,l),f=s.targetId;t=new Cw(f,c)}}return t}function vR(n,e){let t;if(e instanceof Il)t={update:o_(n,e.key,e.value)};else if(e instanceof sp)t={delete:Af(n,e.key)};else if(e instanceof $s)t={update:o_(n,e.key,e.data),updateMask:PR(e.fieldMask)};else{if(!(e instanceof sR))return we(16599,{Vt:e.type});t={verify:Af(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof Rc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Fo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ml)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Cc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw we(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:gR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function wR(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?dr(o.updateTime):dr(l);return c.isEqual(Se.min())&&(c=dr(l)),new tR(c,o.transformResults||[])})(t,e)))):[]}function ER(n,e){return{documents:[Nw(n,e.path)]}}function TR(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Nw(n,o);const l=(function(y){if(y.length!==0)return Ow(Bn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((v=>(function(I){return{field:Ro(I.field),direction:AR(I.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=If(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function IR(n){let e=yR(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){$e(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const I=Dw(E);return I instanceof Bn&&uw(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((I=>(function(O){return new pl(Co(O.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,zc(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,B=E.values||[];return new Ac(B,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,B=E.values||[];return new Ac(B,I)})(t.endAt)),BA(e,o,c,l,f,"F",g,y)}function SR(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Dw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Co(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Co(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Co(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Co(t.unaryFilter.field);return vt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vt.create(Co(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Bn.create(t.compositeFilter.filters.map((s=>Dw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function AR(n){return dR[n]}function RR(n){return fR[n]}function CR(n){return pR[n]}function Ro(n){return{fieldPath:n.canonicalString()}}function Co(n){return Ot.fromServerFormat(n.fieldPath)}function Ow(n){return n instanceof vt?(function(t){if(t.op==="=="){if(Ky(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(Wy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ky(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(Wy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:RR(t.op),value:t.value}}})(n):n instanceof Bn?(function(t){const s=t.getFilters().map((o=>Ow(o)));return s.length===1?s[0]:{compositeFilter:{op:CR(t.op),filters:s}}})(n):we(54877,{filter:n})}function PR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Vw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t,s,o,l=Se.min(),c=Se.min(),f=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.yt=e}}function xR(n){const e=IR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.Cn=new bR}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Os.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class bR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new It(Xe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new It(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lw=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(Lw,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uo(0)}static cr(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="LruGarbageCollector",DR=1048576;function u_([n,e],[t,s]){const o=De(n,t);return o===0?De(e,s):o}class OR{constructor(e){this.Ir=e,this.buffer=new It(u_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();u_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(l_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?oe(l_,"Ignoring IndexedDB error during garbage collection: ",t):await Wo(t)}await this.Vr(3e5)}))}}class LR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Bc.ce);const s=new OR(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(a_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),So()<=be.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function MR(n,e){return new LR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.changes=new bi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&ol(s.mutation,o,gn.empty(),He.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Oe()){const o=vi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Ja();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=vi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Oe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=zr();const c=il(),f=(function(){return il()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof $s)?l=l.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),ol(v.mutation,y,v.mutation.getFieldMask(),He.now())):c.set(y.key,gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>c.set(y,v))),t.forEach(((y,v)=>f.set(y,new UR(v,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=il();let o=new st(((c,f)=>c-f)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||gn.empty();v=f.applyToLocalView(y,v),s.set(g,v);const E=(o.get(f.batchId)||Oe()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=_w();v.forEach((I=>{if(!l.has(I)){const B=Sw(t.get(I),s.get(I));B!==null&&E.set(I,B),l=l.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(vi());let f=cl,g=l;return c.next((y=>G.forEach(y,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?G.resolve():this.remoteDocumentCache.getEntry(e,v).next((I=>{g=g.insert(v,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Oe()))).next((v=>({batchId:f,changes:yw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((s=>{let o=Ja();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Ja();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(g=>{const y=(function(E,I){return new Go(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((E,I)=>{c=c.insert(E,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((g,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,$t.newInvalidDocument(v)))}));let f=Ja();return c.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&ol(v.mutation,y,gn.empty(),He.now()),Wc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:dr(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:xR(o.bundledQuery),readTime:dr(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.overlays=new st(me.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=vi();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=vi(),l=t.length+1,c=new me(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((y,v)=>y-v));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=vi(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=vi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return G.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new oR(t,s));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.Qr=new It(Pt.$r),this.Ur=new It(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Pt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Pt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new me(new Xe([])),s=new Pt(t,e),o=new Pt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new Xe([])),s=new Pt(t,e),o=new Pt(t,e+1);let l=Oe();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Pt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(Pt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new iR(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Zr=this.Zr.add(new Pt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(c)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Jf:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const f=this.Xr(c.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new It(De);return t.forEach((o=>{const l=new Pt(o,0),c=new Pt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;me.isDocumentKey(l)||(l=l.child(""));const c=new Pt(new me(l),0);let f=new It(De);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),c),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(t.mutations,(o=>{const l=new Pt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Pt(t,0),o=this.Zr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.ri=e,this.docs=(function(){return new st(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=zr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=zr();const c=t.path,f=new me(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||vA(_A(v),s)<=0||(o.has(v.key)||Wc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){we(9500)}ii(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new WR(this)}getSize(e){return G.resolve(this.size)}}class WR extends FR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.persistence=e,this.si=new bi((t=>tp(t)),np),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new lp,this.targetCount=0,this.ai=Uo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bc(0),this.li=!1,this.li=!0,this.hi=new $R,this.referenceDelegate=e(this),this.Pi=new KR(this),this.indexManager=new NR,this.remoteDocumentCache=(function(o){return new HR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new kR(t),this.Ii=new BR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new qR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new GR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class GR extends EA{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new lp,this.Vi=null}static mi(e){return new up(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(s=>{const o=me.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class kc{constructor(e,t){this.persistence=e,this.pi=new bi((s=>SA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=MR(this,t)}static mi(e,t){return new kc(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ic(e.data.value)),t}br(e,t,s){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new cp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AT()?8:TA(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new QR;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(So()<=be.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(So()<=be.DEBUG&&oe("QueryEngine","Query:",Ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(So()<=be.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):G.resolve())}ys(e,t){if(Xy(t))return G.resolve(null);let s=hr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Tf(t,null,"F"),s=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Oe(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,c,g.readTime)?this.ys(e,Tf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Xy(t)||o.isEqual(Se.min())?G.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?G.resolve(null):(So()<=be.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.vs(e,c,t,yA(o,cl)).next((f=>f)))}))}Ds(e,t){let s=new It(mw(e));return t.forEach(((o,l)=>{Wc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return So()<=be.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.ps.getDocumentsMatchingQuery(e,t,Os.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",XR=3e8;class JR{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(De),this.xs=new bi((l=>tp(l)),np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ZR(n,e,t,s){return new JR(n,e,t,s)}async function Fw(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let g=Oe();for(const y of o){c.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function eC(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const E=y.batch,I=E.keys();let B=G.resolve();return I.forEach((O=>{B=B.next((()=>v.getEntry(g,O))).next((U=>{const L=y.docVersions.get(O);$e(L!==null,48541),U.version.compareTo(L)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),B.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Oe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Uw(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function tC(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let B=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?B=B.withResumeToken(Vt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(v.resumeToken,s)),o=o.insert(E,B),(function(U,L,te){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=XR?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(I,B,v)&&f.push(t.Pi.updateTargetData(l,B))}));let g=zr(),y=Oe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(nC(l,c,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Se.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return G.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function nC(n,e,t){let s=Oe(),o=Oe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=zr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):oe(hp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function rC(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Jf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function sC(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Cs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Cf(n,e,t){const s=Re(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ko(c))throw c;oe(hp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function c_(n,e,t){const s=Re(n);let o=Se.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,v){const E=Re(g),I=E.xs.get(v);return I!==void 0?G.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,v)})(s,c,hr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:Oe()))).next((f=>(iC(s,$A(e),f),{documents:f,Qs:l})))))}function iC(n,e,t){let s=n.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class h_{constructor(){this.activeTargetIds=QA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oC{constructor(){this.Mo=new h_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new h_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="ConnectivityMonitor";class f_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(d_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(d_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function Pf(){return Ju===null?Ju=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="RestConnection",lC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ic?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=Pf(),f=this.zo(e,t.toUriEncodedString());oe(Jd,`Sending RPC '${e}' ${c}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),v=zo(y);return this.Jo(e,f,g,s,v).then((E=>(oe(Jd,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Oo(Jd,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=lC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class hC extends uC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=Pf();return new Promise(((f,g)=>{const y=new zv;y.setWithCredentials(!0),y.listenOnce($v.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case sc.NO_ERROR:const E=y.getResponseJson();oe(Bt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case sc.TIMEOUT:oe(Bt,`RPC '${e}' ${c} timed out`),g(new re(W.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const I=y.getStatus();if(oe(Bt,`RPC '${e}' ${c} failed with status:`,I,"response text:",y.getResponseText()),I>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const O=B==null?void 0:B.error;if(O&&O.status&&O.message){const U=(function(te){const ue=te.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ue)>=0?ue:W.UNKNOWN})(O.status);g(new re(U,O.message))}else g(new re(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new re(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{oe(Bt,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);oe(Bt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=Pf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Wv(),f=Hv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");oe(Bt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=c.createWebChannel(v,g);this.I_(E);let I=!1,B=!1;const O=new cC({Yo:L=>{B?oe(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(I||(oe(Bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),oe(Bt,`RPC '${e}' stream ${o} sending:`,L),E.send(L))},Zo:()=>E.close()}),U=(L,te,ue)=>{L.listen(te,(ae=>{try{ue(ae)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return U(E,Xa.EventType.OPEN,(()=>{B||(oe(Bt,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),U(E,Xa.EventType.CLOSE,(()=>{B||(B=!0,oe(Bt,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(E))})),U(E,Xa.EventType.ERROR,(L=>{B||(B=!0,Oo(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),O.a_(new re(W.UNAVAILABLE,"The operation could not be completed")))})),U(E,Xa.EventType.MESSAGE,(L=>{var te;if(!B){const ue=L.data[0];$e(!!ue,16349);const ae=ue,ge=(ae==null?void 0:ae.error)||((te=ae[0])==null?void 0:te.error);if(ge){oe(Bt,`RPC '${e}' stream ${o} received error:`,ge);const Pe=ge.status;let ne=(function(P){const D=_t[P];if(D!==void 0)return Rw(D)})(Pe),k=ge.message;ne===void 0&&(ne=W.INTERNAL,k="Unknown error status: "+Pe+" with message "+ge.message),B=!0,O.a_(new re(ne,k)),E.close()}else oe(Bt,`RPC '${e}' stream ${o} received:`,ue),O.u_(ue)}})),U(f,qv.STAT_EVENT,(L=>{L.stat===mf.PROXY?oe(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===mf.NOPROXY&&oe(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){return new mR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="PersistentStream";class Bw{constructor(e,t,s,o,l,c,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new re(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(p_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(p_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dC extends Bw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_R(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?dr(c.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Rf(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=wf(g)?{documents:ER(l,g)}:{query:TR(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=kw(l,c.resumeToken);const y=If(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Se.min())>0){f.readTime=Pc(l,c.snapshotVersion.toTimestamp());const y=If(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=SR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Rf(this.serializer),t.removeTarget=e,this.q_(t)}}class fC extends Bw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=wR(e.writeResults,e.commitTime),s=dr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Rf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>vR(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{}class mC extends pC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Sf(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(W.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Sf(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new re(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Br(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="RemoteStore";class yC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Di(this)&&(oe(Pi,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await Al(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Xc(y)})(this))}))})),this.Ra=new gC(s,o)}}async function Xc(n){if(Di(n))for(const e of n.da)await e(!0)}async function Al(n){for(const e of n.da)await e(!1)}function zw(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),mp(t)?pp(t):Qo(t).O_()&&fp(t,e))}function dp(n,e){const t=Re(n),s=Qo(t);t.Ia.delete(e),s.O_()&&$w(t,e),t.Ia.size===0&&(s.O_()?s.L_():Di(t)&&t.Ra.set("Unknown"))}function fp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(n).Y_(e)}function $w(n,e){n.Va.Ue(e),Qo(n).Z_(e)}function pp(n){n.Va=new hR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Qo(n).start(),n.Ra.ua()}function mp(n){return Di(n)&&!Qo(n).x_()&&n.Ia.size>0}function Di(n){return Re(n).Ea.size===0}function qw(n){n.Va=void 0}async function _C(n){n.Ra.set("Online")}async function vC(n){n.Ia.forEach(((e,t)=>{fp(n,e)}))}async function wC(n,e){qw(n),mp(n)?(n.Ra.ha(e),pp(n)):n.Ra.set("Unknown")}async function EC(n,e,t){if(n.Ra.set("Online"),e instanceof Pw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(s){oe(Pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xc(n,s)}else if(e instanceof lc?n.Va.Ze(e):e instanceof Cw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const s=await Uw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),$w(l,g);const E=new Cs(v.target,g,y,v.sequenceNumber);fp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){oe(Pi,"Failed to raise snapshot:",s),await xc(n,s)}}async function xc(n,e,t){if(!Ko(e))throw e;n.Ea.add(1),await Al(n),n.Ra.set("Offline"),t||(t=()=>Uw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{oe(Pi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xc(n)}))}function Hw(n,e){return e().catch((t=>xc(n,t,e)))}async function Jc(n){const e=Re(n),t=Fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jf;for(;TC(e);)try{const o=await rC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,IC(e,o)}catch(o){await xc(e,o)}Ww(e)&&Kw(e)}function TC(n){return Di(n)&&n.Ta.length<10}function IC(n,e){n.Ta.push(e);const t=Fs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ww(n){return Di(n)&&!Fs(n).x_()&&n.Ta.length>0}function Kw(n){Fs(n).start()}async function SC(n){Fs(n).ra()}async function AC(n){const e=Fs(n);for(const t of n.Ta)e.ea(t.mutations)}async function RC(n,e,t){const s=n.Ta.shift(),o=ip.from(s,e,t);await Hw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Jc(n)}async function CC(n,e){e&&Fs(n).X_&&await(async function(s,o){if((function(c){return lR(c)&&c!==W.ABORTED})(o.code)){const l=s.Ta.shift();Fs(s).B_(),await Hw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Jc(s)}})(n,e),Ww(n)&&Kw(n)}async function m_(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),oe(Pi,"RemoteStore received new credentials");const s=Di(t);t.Ea.add(3),await Al(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xc(t)}async function PC(n,e){const t=Re(n);e?(t.Ea.delete(2),await Xc(t)):e||(t.Ea.add(2),await Al(t),t.Ra.set("Unknown"))}function Qo(n){return n.ma||(n.ma=(function(t,s,o){const l=Re(t);return l.sa(),new dC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:_C.bind(null,n),t_:vC.bind(null,n),r_:wC.bind(null,n),H_:EC.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),mp(n)?pp(n):n.Ra.set("Unknown")):(await n.ma.stop(),qw(n))}))),n.ma}function Fs(n){return n.fa||(n.fa=(function(t,s,o){const l=Re(t);return l.sa(),new fC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:SC.bind(null,n),r_:CC.bind(null,n),ta:AC.bind(null,n),na:RC.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Jc(n)):(await n.fa.stop(),n.Ta.length>0&&(oe(Pi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new gp(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Ko(n))return new re(W.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{static emptySet(e){return new bo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||me.comparator(t.key,s.key):(t,s)=>me.comparator(t.key,s.key),this.keyedMap=Ja(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new bo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.ga=new st(me.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class jo{constructor(e,t,s,o,l,c,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new jo(e,t,bo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xC{constructor(){this.queries=y_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=y_(),l.forEach(((c,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new re(W.ABORTED,"Firestore shutting down"))}}function y_(){return new bi((n=>pw(n)),Hc)}async function _p(n,e){const t=Re(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new kC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=yp(c,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&wp(t)}async function vp(n,e){const t=Re(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function NC(n,e){const t=Re(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(o)&&(s=!0);c.wa=o}}s&&wp(t)}function bC(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function wp(n){n.Ca.forEach((e=>{e.next()}))}var kf,__;(__=kf||(kf={})).Ma="default",__.Cache="cache";class Ep{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.key=e}}class Qw{constructor(e){this.key=e}}class DC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=mw(e),this.tu=new bo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new g_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const I=o.get(v),B=Wc(this.query,E)?E:null,O=!!I&&this.mutatedKeys.has(I.key),U=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let L=!1;I&&B?I.data.isEqual(B.data)?O!==U&&(s.track({type:3,doc:B}),L=!0):this.su(I,B)||(s.track({type:2,doc:B}),L=!0,(g&&this.eu(B,g)>0||y&&this.eu(B,y)<0)&&(f=!0)):!I&&B?(s.track({type:0,doc:B}),L=!0):I&&!B&&(s.track({type:1,doc:I}),L=!0,(g||y)&&(f=!0)),L&&(B?(c=c.add(B),l=U?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(B,O){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:L})}};return U(B)-U(O)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new jo(this.query,e.tu,l,c,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Qw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Gw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tp="SyncEngine";class OC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class VC{constructor(e){this.key=e,this.hu=!1}}class LC{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new bi((f=>pw(f)),Hc),this.Iu=new Map,this.Eu=new Set,this.du=new st(me.comparator),this.Au=new Map,this.Ru=new lp,this.Vu={},this.mu=new Map,this.fu=Uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MC(n,e,t=!0){const s=tE(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Yw(s,e,t,!0),o}async function FC(n,e){const t=tE(n);await Yw(t,e,!0,!1)}async function Yw(n,e,t,s){const o=await sC(n.localStore,hr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await UC(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&zw(n.remoteStore,o),f}async function UC(n,e,t,s,o){n.pu=(E,I,B)=>(async function(U,L,te,ue){let ae=L.view.ru(te);ae.Cs&&(ae=await c_(U.localStore,L.query,!1).then((({documents:k})=>L.view.ru(k,ae))));const ge=ue&&ue.targetChanges.get(L.targetId),Pe=ue&&ue.targetMismatches.get(L.targetId)!=null,ne=L.view.applyChanges(ae,U.isPrimaryClient,ge,Pe);return w_(U,L.targetId,ne.au),ne.snapshot})(n,E,I,B);const l=await c_(n.localStore,e,!0),c=new DC(e,l.Qs),f=c.ru(l.documents),g=Sl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,g);w_(n,t,y.au);const v=new OC(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function jC(n,e,t){const s=Re(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!Hc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Cf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&dp(s.remoteStore,o.targetId),xf(s,o.targetId)})).catch(Wo)):(xf(s,o.targetId),await Cf(s.localStore,o.targetId,!0))}async function BC(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),dp(t.remoteStore,s.targetId))}async function zC(n,e,t){const s=QC(n);try{const o=await(function(c,f){const g=Re(c),y=He.now(),v=f.reduce(((B,O)=>B.add(O.key)),Oe());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let O=zr(),U=Oe();return g.Ns.getEntries(B,v).next((L=>{O=L,O.forEach(((te,ue)=>{ue.isValidDocument()||(U=U.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(B,O))).next((L=>{E=L;const te=[];for(const ue of f){const ae=rR(ue,E.get(ue.key).overlayedDocument);ae!=null&&te.push(new $s(ue.key,ae,ow(ae.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(B,y,te,f)})).next((L=>{I=L;const te=L.applyToLocalDocumentSet(E,U);return g.documentOverlayCache.saveOverlays(B,L.batchId,te)}))})).then((()=>({batchId:I.batchId,changes:yw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,g){let y=c.Vu[c.currentUser.toKey()];y||(y=new st(De)),y=y.insert(f,g),c.Vu[c.currentUser.toKey()]=y})(s,o.batchId,t),await Rl(s,o.changes),await Jc(s.remoteStore)}catch(o){const l=yp(o,"Failed to persist write");t.reject(l)}}async function Xw(n,e){const t=Re(n);try{const s=await tC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?$e(c.hu,14607):o.removedDocuments.size>0&&($e(c.hu,42227),c.hu=!1))})),await Rl(t,s,e)}catch(s){await Wo(s)}}function v_(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const g=Re(c);g.onlineState=f;let y=!1;g.queries.forEach(((v,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&wp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function $C(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new st(me.comparator);c=c.insert(l,$t.newNoDocument(l,Se.min()));const f=Oe().add(l),g=new Qc(Se.min(),new Map,new st(De),c,f);await Xw(s,g),s.du=s.du.remove(l),s.Au.delete(e),Ip(s)}else await Cf(s.localStore,e,!1).then((()=>xf(s,e,t))).catch(Wo)}async function qC(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await eC(t.localStore,e);Zw(t,s,null),Jw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Rl(t,o)}catch(o){await Wo(o)}}async function HC(n,e,t){const s=Re(n);try{const o=await(function(c,f){const g=Re(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>($e(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);Zw(s,e,t),Jw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Rl(s,o)}catch(o){await Wo(o)}}function Jw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Zw(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function xf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||eE(n,s)}))}function eE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(dp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ip(n))}function w_(n,e,t){for(const s of t)s instanceof Gw?(n.Ru.addReference(s.key,e),WC(n,s)):s instanceof Qw?(oe(Tp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||eE(n,s.key)):we(19791,{wu:s})}function WC(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(oe(Tp,"New document in limbo: "+t),n.Eu.add(s),Ip(n))}function Ip(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new me(Xe.fromString(e)),s=n.fu.next();n.Au.set(s,new VC(t)),n.du=n.du.insert(t,s),zw(n.remoteStore,new Cs(hr(qc(t.path)),s,"TargetPurposeLimboResolution",Bc.ce))}}async function Rl(n,e,t){const s=Re(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{c.push(s.pu(g,e,t).then((y=>{var v;if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=cp.As(g.targetId,y);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(g,y){const v=Re(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(y,(I=>G.forEach(I.Es,(B=>v.persistence.referenceDelegate.addReference(E,I.targetId,B))).next((()=>G.forEach(I.ds,(B=>v.persistence.referenceDelegate.removeReference(E,I.targetId,B)))))))))}catch(E){if(!Ko(E))throw E;oe(hp,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const B=v.Ms.get(I),O=B.snapshotVersion,U=B.withLastLimboFreeSnapshotVersion(O);v.Ms=v.Ms.insert(I,U)}}})(s.localStore,l))}async function KC(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){oe(Tp,"User change. New user:",e.toKey());const s=await Fw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new re(W.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Rl(t,s.Ls)}}function GC(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function tE(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$C.bind(null,e),e.Pu.H_=NC.bind(null,e.eventManager),e.Pu.yu=bC.bind(null,e.eventManager),e}function QC(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HC.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ZR(this.persistence,new YR,e.initialUser,this.serializer)}Cu(e){return new Mw(up.mi,this.serializer)}Du(e){return new oC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class YC extends Nc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof kc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new VR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Mw((s=>kc.mi(s,t)),this.serializer)}}class Nf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>v_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=KC.bind(null,this.syncEngine),await PC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xC})()}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),s=(function(l){return new hC(l)})(e.databaseInfo);return(function(l,c,f,g){return new mC(l,c,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new yC(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>v_(this.syncEngine,t,0)),(function(){return f_.v()?new f_:new aC})())}createSyncEngine(e,t){return(function(o,l,c,f,g,y,v){const E=new LC(o,l,c,f,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);oe(Pi,"RemoteStore shutting down."),l.Ea.add(5),await Al(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Nf.provider={build:()=>new Nf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="FirestoreClient";class XC{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Xf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{oe(Us,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(oe(Us,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=yp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ef(n,e){n.asyncQueue.verifyOperationInProgress(),oe(Us,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Fw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function E_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JC(n);oe(Us,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>m_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>m_(e.remoteStore,o))),n._onlineComponents=e}async function JC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(Us,"Using user provided OfflineComponentProvider");try{await ef(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Oo("Error using user provided cache. Falling back to memory cache: "+t),await ef(n,new Nc)}}else oe(Us,"Using default OfflineComponentProvider"),await ef(n,new YC(void 0));return n._offlineComponents}async function nE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(Us,"Using user provided OnlineComponentProvider"),await E_(n,n._uninitializedComponentsProvider._online)):(oe(Us,"Using default OnlineComponentProvider"),await E_(n,new Nf))),n._onlineComponents}function ZC(n){return nE(n).then((e=>e.syncEngine))}async function bc(n){const e=await nE(n),t=e.eventManager;return t.onListen=MC.bind(null,e.syncEngine),t.onUnlisten=jC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BC.bind(null,e.syncEngine),t}function eP(n,e,t={}){const s=new Fr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,y){const v=new Sp({next:I=>{v.Nu(),c.enqueueAndForget((()=>vp(l,E)));const B=I.docs.has(f);!B&&I.fromCache?y.reject(new re(W.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&I.fromCache&&g&&g.source==="server"?y.reject(new re(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new Ep(qc(f.path),v,{includeMetadataChanges:!0,qa:!0});return _p(l,E)})(await bc(n),n.asyncQueue,e,t,s))),s.promise}function tP(n,e,t={}){const s=new Fr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,y){const v=new Sp({next:I=>{v.Nu(),c.enqueueAndForget((()=>vp(l,E))),I.fromCache&&g.source==="server"?y.reject(new re(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new Ep(f,v,{includeMetadataChanges:!0,qa:!0});return _p(l,E)})(await bc(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="firestore.googleapis.com",I_=!0;class S_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sE,this.ssl=I_}else this.host=e.host,this.ssl=e.ssl??I_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DR)throw new re(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new oA;switch(s.type){case"firstParty":return new cA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=T_.get(t);s&&(oe("ComponentProvider","Removing Datastore"),T_.delete(t),s.terminate())})(this),Promise.resolve()}}function nP(n,e,t,s={}){var y;n=rn(n,Zc);const o=zo(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(Z_(`https://${f}`),ev("Firestore",!0)),l.host!==sE&&l.host!==f&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!Ds(g,c)&&(n._setSettings(g),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=zt.MOCK_USER;else{v=gT(s.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new re(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new zt(I)}n._authCredentials=new aA(new Gv(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class at{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Tl(t,at._jsonSchema))return new at(e,s||null,new me(Xe.fromString(t.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:wt("string",at._jsonSchemaVersion),referencePath:wt("string")};class bs extends qs{constructor(e,t,s){super(e,t,qc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new me(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function yn(n,e,...t){if(n=St(n),Qv("collection","path",e),n instanceof Zc){const s=Xe.fromString(e,...t);return My(s),new bs(n,null,s)}{if(!(n instanceof at||n instanceof bs))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xe.fromString(e,...t));return My(s),new bs(n.firestore,null,s)}}function fr(n,e,...t){if(n=St(n),arguments.length===1&&(e=Xf.newId()),Qv("doc","path",e),n instanceof Zc){const s=Xe.fromString(e,...t);return Ly(s),new at(n,null,new me(s))}{if(!(n instanceof at||n instanceof bs))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xe.fromString(e,...t));return Ly(s),new at(n.firestore,n instanceof bs?n.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="AsyncQueue";class R_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jw(this,"async_queue_retry"),this._c=()=>{const s=Zd();s&&oe(A_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Zd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ko(e))throw e;oe(A_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Br("INTERNAL UNHANDLED ERROR: ",C_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=gp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:C_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function C_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class $r extends Zc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new R_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R_(e),this._firestoreClient=void 0,await e}}}function rP(n,e){const t=typeof n=="object"?n:sv(),s=typeof n=="string"?n:Ic,o=Bf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=pT("firestore");l&&nP(o,...l)}return o}function eh(n){if(n._terminated)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sP(n),n._firestoreClient}function sP(n){var s,o,l;const e=n._freezeSettings(),t=(function(f,g,y,v){return new CA(f,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,rE(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new XC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cn(Vt.fromBase64String(e))}catch(t){throw new re(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tl(e,Cn._jsonSchema))return Cn.fromBase64String(e.bytes)}}Cn._jsonSchemaVersion="firestore/bytes/1.0",Cn._jsonSchema={type:wt("string",Cn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(Tl(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:wt("string",pr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tl(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new mr(e.vectorValues);throw new re(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:wt("string",mr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=/^__.*__$/;class oP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new $s(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class iE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new $s(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class rh{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oE(this.Ac)&&iP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Yc(e)}Cc(e,t,s,o=!1){return new rh({Ac:e,methodName:t,Dc:s,path:Ot.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sh(n){const e=n._freezeSettings(),t=Yc(n._databaseId);return new aP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aE(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);Rp("Data must be an object, but it was:",c,s);const f=lE(s,c);let g,y;if(l.merge)g=new gn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const I=bf(e,E,t);if(!c.contains(I))throw new re(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);cE(v,I)||v.push(I)}g=new gn(v),y=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=c.fieldTransforms;return new oP(new nn(f),g,y)}class ih extends nh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function lP(n,e,t){return new rh({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ap extends nh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=lP(this,e,!0),s=this.vc.map((l=>Yo(l,t))),o=new Fo(s);return new ZA(e.path,o)}isEqual(e){return e instanceof Ap&&Ds(this.vc,e.vc)}}function uP(n,e,t,s){const o=n.Cc(1,e,t);Rp("Data must be an object, but it was:",o,s);const l=[],c=nn.empty();zs(s,((g,y)=>{const v=Cp(e,g,t);y=St(y);const E=o.yc(v);if(y instanceof ih)l.push(v);else{const I=Yo(y,E);I!=null&&(l.push(v),c.set(v,I))}}));const f=new gn(l);return new iE(c,f,o.fieldTransforms)}function cP(n,e,t,s,o,l){const c=n.Cc(1,e,t),f=[bf(e,s,t)],g=[o];if(l.length%2!=0)throw new re(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(bf(e,l[I])),g.push(l[I+1]);const y=[],v=nn.empty();for(let I=f.length-1;I>=0;--I)if(!cE(y,f[I])){const B=f[I];let O=g[I];O=St(O);const U=c.yc(B);if(O instanceof ih)y.push(B);else{const L=Yo(O,U);L!=null&&(y.push(B),v.set(B,L))}}const E=new gn(y);return new iE(v,E,c.fieldTransforms)}function hP(n,e,t,s=!1){return Yo(t,n.Cc(s?4:3,e))}function Yo(n,e){if(uE(n=St(n)))return Rp("Unsupported field value:",e,n),lE(n,e);if(n instanceof nh)return(function(s,o){if(!oE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let g=Yo(f,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return YA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=He.fromDate(s);return{timestampValue:Pc(o.serializer,l)}}if(s instanceof He){const l=new He(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,l)}}if(s instanceof pr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Cn)return{bytesValue:kw(o.serializer,s._byteString)};if(s instanceof at){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ap(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof mr)return(function(c,f){return{mapValue:{fields:{[sw]:{stringValue:iw},[Sc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return rp(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${jc(s)}`)})(n,e)}function lE(n,e){const t={};return Jv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(n,((s,o)=>{const l=Yo(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function uE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof pr||n instanceof Cn||n instanceof at||n instanceof nh||n instanceof mr)}function Rp(n,e,t){if(!uE(t)||!Yv(t)){const s=jc(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function bf(n,e,t){if((e=St(e))instanceof th)return e._internalPath;if(typeof e=="string")return Cp(n,e);throw Dc("Field path arguments must be of type string or ",n,!1,void 0,t)}const dP=new RegExp("[~\\*/\\[\\]]");function Cp(n,e,t){if(e.search(dP)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new th(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dc(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new re(W.INVALID_ARGUMENT,f+n+g)}function cE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fP extends hE{data(){return super.data()}}function oh(n,e){return typeof e=="string"?Cp(n,e):e instanceof th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pp{}class fE extends Pp{}function Oi(n,e,...t){let s=[];e instanceof Pp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof kp)).length,f=l.filter((g=>g instanceof ah)).length;if(c>1||c>0&&f>0)throw new re(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class ah extends fE{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ah(e,t,s)}_apply(e){const t=this._parse(e);return mE(e._query,t),new qs(e.firestore,e.converter,Ef(e._query,t))}_parse(e){const t=sh(e.firestore);return(function(l,c,f,g,y,v,E){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new re(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){x_(E,v);const O=[];for(const U of E)O.push(k_(g,l,U));I={arrayValue:{values:O}}}else I=k_(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||x_(E,v),I=hP(f,c,E,v==="in"||v==="not-in");return vt.create(y,v,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ki(n,e,t){const s=e,o=oh("where",n);return ah._create(o,s,t)}class kp extends Pp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const g of f)mE(c,g),c=Ef(c,g)})(e._query,t),new qs(e.firestore,e.converter,Ef(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends fE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xp(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new re(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new re(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(l,c)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new Go(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function pE(n,e="asc"){const t=e,s=oh("orderBy",n);return xp._create(s,t)}function k_(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new re(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fw(e)&&t.indexOf("/")!==-1)throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Xe.fromString(t));if(!me.isDocumentKey(s))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Hy(n,new me(s))}if(t instanceof at)return Hy(n,t._key);throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(t)}.`)}function x_(n,e){if(!Array.isArray(n)||n.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mE(n,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pP{convertValue(e,t="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return zs(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Sc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>ft(c.doubleValue)));return new mr(t)}convertGeoPoint(e){return new pr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$c(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Xe.fromString(e);$e(Vw(s),9688,{name:e});const o=new dl(s.get(1),s.get(3)),l=new me(s.popFirst(5));return o.isEqual(t)||Br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class el{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends hE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(oh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ei._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:wt("string",Ei._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class uc extends Ei{data(e={}){return super.data(e)}}class Ti{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new el(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new uc(this._firestore,this._userDataWriter,s.key,s,new el(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const g=new uc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new el(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new uc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new el(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:mP(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ti._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n){n=rn(n,at);const e=rn(n.firestore,$r);return eP(eh(e),n._key).then((t=>_E(e,n,t)))}Ti._jsonSchemaVersion="firestore/querySnapshot/1.0",Ti._jsonSchema={type:wt("string",Ti._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Np extends pP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}function yP(n){n=rn(n,qs);const e=rn(n.firestore,$r),t=eh(e),s=new Np(e);return dE(n._query),tP(t,n._query).then((o=>new Ti(e,s,n,o)))}function _P(n,e,t){n=rn(n,at);const s=rn(n.firestore,$r),o=gE(n.converter,e);return uh(s,[aE(sh(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pn.none())])}function cc(n,e,t,...s){n=rn(n,at);const o=rn(n.firestore,$r),l=sh(o);let c;return c=typeof(e=St(e))=="string"||e instanceof th?cP(l,"updateDoc",n._key,e,t,s):uP(l,"updateDoc",n._key,e),uh(o,[c.toMutation(n._key,Pn.exists(!0))])}function yE(n){return uh(rn(n.firestore,$r),[new sp(n._key,Pn.none())])}function lh(n,e){const t=rn(n.firestore,$r),s=fr(n),o=gE(n.converter,e);return uh(t,[aE(sh(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then((()=>s))}function Hr(n,...e){var g,y,v;n=St(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||P_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(P_(e[s])){const E=e[s];e[s]=(g=E.next)==null?void 0:g.bind(E),e[s+1]=(y=E.error)==null?void 0:y.bind(E),e[s+2]=(v=E.complete)==null?void 0:v.bind(E)}let l,c,f;if(n instanceof at)c=rn(n.firestore,$r),f=qc(n._key.path),l={next:E=>{e[s]&&e[s](_E(c,n,E))},error:e[s+1],complete:e[s+2]};else{const E=rn(n,qs);c=rn(E.firestore,$r),f=E._query;const I=new Np(c);l={next:B=>{e[s]&&e[s](new Ti(c,I,E,B))},error:e[s+1],complete:e[s+2]},dE(n._query)}return(function(I,B,O,U){const L=new Sp(U),te=new Ep(B,L,O);return I.asyncQueue.enqueueAndForget((async()=>_p(await bc(I),te))),()=>{L.Nu(),I.asyncQueue.enqueueAndForget((async()=>vp(await bc(I),te)))}})(eh(c),f,o,l)}function uh(n,e){return(function(s,o){const l=new Fr;return s.asyncQueue.enqueueAndForget((async()=>zC(await ZC(s),o,l))),l.promise})(eh(n),e)}function _E(n,e,t){const s=t.docs.get(e._key),o=new Np(n);return new Ei(n,o,e._key,s,new el(t.hasPendingWrites,t.fromCache),e.converter)}function vP(...n){return new Ap("arrayUnion",n)}(function(e,t=!0){(function(o){Ho=o})($o),Do(new Si("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new $r(new lA(s.getProvider("auth-internal")),new hA(c,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new re(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(y.options.projectId,v)})(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),xs(by,Dy,e),xs(by,Dy,"esm2020")})();function vE(n,e){return function(){return n.apply(e,arguments)}}const{toString:wP}=Object.prototype,{getPrototypeOf:bp}=Object,{iterator:ch,toStringTag:wE}=Symbol,hh=(n=>e=>{const t=wP.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),zn=n=>(n=n.toLowerCase(),e=>hh(e)===n),dh=n=>e=>typeof e===n,{isArray:Xo}=Array,Bo=dh("undefined");function Cl(n){return n!==null&&!Bo(n)&&n.constructor!==null&&!Bo(n.constructor)&&sn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const EE=zn("ArrayBuffer");function EP(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&EE(n.buffer),e}const TP=dh("string"),sn=dh("function"),TE=dh("number"),Pl=n=>n!==null&&typeof n=="object",IP=n=>n===!0||n===!1,hc=n=>{if(hh(n)!=="object")return!1;const e=bp(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(wE in n)&&!(ch in n)},SP=n=>{if(!Pl(n)||Cl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},AP=zn("Date"),RP=zn("File"),CP=zn("Blob"),PP=zn("FileList"),kP=n=>Pl(n)&&sn(n.pipe),xP=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||sn(n.append)&&((e=hh(n))==="formdata"||e==="object"&&sn(n.toString)&&n.toString()==="[object FormData]"))},NP=zn("URLSearchParams"),[bP,DP,OP,VP]=["ReadableStream","Request","Response","Headers"].map(zn),LP=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,o;if(typeof n!="object"&&(n=[n]),Xo(n))for(s=0,o=n.length;s<o;s++)e.call(null,n[s],s,n);else{if(Cl(n))return;const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let f;for(s=0;s<c;s++)f=l[s],e.call(null,n[f],f,n)}}function IE(n,e){if(Cl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,o;for(;s-- >0;)if(o=t[s],e===o.toLowerCase())return o;return null}const wi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,SE=n=>!Bo(n)&&n!==wi;function Df(){const{caseless:n,skipUndefined:e}=SE(this)&&this||{},t={},s=(o,l)=>{const c=n&&IE(t,l)||l;hc(t[c])&&hc(o)?t[c]=Df(t[c],o):hc(o)?t[c]=Df({},o):Xo(o)?t[c]=o.slice():(!e||!Bo(o))&&(t[c]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&kl(arguments[o],s);return t}const MP=(n,e,t,{allOwnKeys:s}={})=>(kl(e,(o,l)=>{t&&sn(o)?n[l]=vE(o,t):n[l]=o},{allOwnKeys:s}),n),FP=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),UP=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},jP=(n,e,t,s)=>{let o,l,c;const f={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),l=o.length;l-- >0;)c=o[l],(!s||s(c,n,e))&&!f[c]&&(e[c]=n[c],f[c]=!0);n=t!==!1&&bp(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},BP=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},zP=n=>{if(!n)return null;if(Xo(n))return n;let e=n.length;if(!TE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},$P=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&bp(Uint8Array)),qP=(n,e)=>{const s=(n&&n[ch]).call(n);let o;for(;(o=s.next())&&!o.done;){const l=o.value;e.call(n,l[0],l[1])}},HP=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},WP=zn("HTMLFormElement"),KP=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,o){return s.toUpperCase()+o}),N_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),GP=zn("RegExp"),AE=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};kl(t,(o,l)=>{let c;(c=e(o,l,n))!==!1&&(s[l]=c||o)}),Object.defineProperties(n,s)},QP=n=>{AE(n,(e,t)=>{if(sn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(sn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},YP=(n,e)=>{const t={},s=o=>{o.forEach(l=>{t[l]=!0})};return Xo(n)?s(n):s(String(n).split(e)),t},XP=()=>{},JP=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function ZP(n){return!!(n&&sn(n.append)&&n[wE]==="FormData"&&n[ch])}const ek=n=>{const e=new Array(10),t=(s,o)=>{if(Pl(s)){if(e.indexOf(s)>=0)return;if(Cl(s))return s;if(!("toJSON"in s)){e[o]=s;const l=Xo(s)?[]:{};return kl(s,(c,f)=>{const g=t(c,o+1);!Bo(g)&&(l[f]=g)}),e[o]=void 0,l}}return s};return t(n,0)},tk=zn("AsyncFunction"),nk=n=>n&&(Pl(n)||sn(n))&&sn(n.then)&&sn(n.catch),RE=((n,e)=>n?setImmediate:e?((t,s)=>(wi.addEventListener("message",({source:o,data:l})=>{o===wi&&l===t&&s.length&&s.shift()()},!1),o=>{s.push(o),wi.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",sn(wi.postMessage)),rk=typeof queueMicrotask<"u"?queueMicrotask.bind(wi):typeof process<"u"&&process.nextTick||RE,sk=n=>n!=null&&sn(n[ch]),H={isArray:Xo,isArrayBuffer:EE,isBuffer:Cl,isFormData:xP,isArrayBufferView:EP,isString:TP,isNumber:TE,isBoolean:IP,isObject:Pl,isPlainObject:hc,isEmptyObject:SP,isReadableStream:bP,isRequest:DP,isResponse:OP,isHeaders:VP,isUndefined:Bo,isDate:AP,isFile:RP,isBlob:CP,isRegExp:GP,isFunction:sn,isStream:kP,isURLSearchParams:NP,isTypedArray:$P,isFileList:PP,forEach:kl,merge:Df,extend:MP,trim:LP,stripBOM:FP,inherits:UP,toFlatObject:jP,kindOf:hh,kindOfTest:zn,endsWith:BP,toArray:zP,forEachEntry:qP,matchAll:HP,isHTMLForm:WP,hasOwnProperty:N_,hasOwnProp:N_,reduceDescriptors:AE,freezeMethods:QP,toObjectSet:YP,toCamelCase:KP,noop:XP,toFiniteNumber:JP,findKey:IE,global:wi,isContextDefined:SE,isSpecCompliantForm:ZP,toJSONObject:ek,isAsyncFn:tk,isThenable:nk,setImmediate:RE,asap:rk,isIterable:sk};function Ce(n,e,t,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const CE=Ce.prototype,PE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{PE[n]={value:n}});Object.defineProperties(Ce,PE);Object.defineProperty(CE,"isAxiosError",{value:!0});Ce.from=(n,e,t,s,o,l)=>{const c=Object.create(CE);H.toFlatObject(n,c,function(v){return v!==Error.prototype},y=>y!=="isAxiosError");const f=n&&n.message?n.message:"Error",g=e==null&&n?n.code:e;return Ce.call(c,f,g,t,s,o),n&&c.cause==null&&Object.defineProperty(c,"cause",{value:n,configurable:!0}),c.name=n&&n.name||"Error",l&&Object.assign(c,l),c};const ik=null;function Of(n){return H.isPlainObject(n)||H.isArray(n)}function kE(n){return H.endsWith(n,"[]")?n.slice(0,-2):n}function b_(n,e,t){return n?n.concat(e).map(function(o,l){return o=kE(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function ok(n){return H.isArray(n)&&!n.some(Of)}const ak=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function fh(n,e,t){if(!H.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,L){return!H.isUndefined(L[U])});const s=t.metaTokens,o=t.visitor||v,l=t.dots,c=t.indexes,g=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function y(O){if(O===null)return"";if(H.isDate(O))return O.toISOString();if(H.isBoolean(O))return O.toString();if(!g&&H.isBlob(O))throw new Ce("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(O)||H.isTypedArray(O)?g&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function v(O,U,L){let te=O;if(O&&!L&&typeof O=="object"){if(H.endsWith(U,"{}"))U=s?U:U.slice(0,-2),O=JSON.stringify(O);else if(H.isArray(O)&&ok(O)||(H.isFileList(O)||H.endsWith(U,"[]"))&&(te=H.toArray(O)))return U=kE(U),te.forEach(function(ae,ge){!(H.isUndefined(ae)||ae===null)&&e.append(c===!0?b_([U],ge,l):c===null?U:U+"[]",y(ae))}),!1}return Of(O)?!0:(e.append(b_(L,U,l),y(O)),!1)}const E=[],I=Object.assign(ak,{defaultVisitor:v,convertValue:y,isVisitable:Of});function B(O,U){if(!H.isUndefined(O)){if(E.indexOf(O)!==-1)throw Error("Circular reference detected in "+U.join("."));E.push(O),H.forEach(O,function(te,ue){(!(H.isUndefined(te)||te===null)&&o.call(e,te,H.isString(ue)?ue.trim():ue,U,I))===!0&&B(te,U?U.concat(ue):[ue])}),E.pop()}}if(!H.isObject(n))throw new TypeError("data must be an object");return B(n),e}function D_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Dp(n,e){this._pairs=[],n&&fh(n,this,e)}const xE=Dp.prototype;xE.append=function(e,t){this._pairs.push([e,t])};xE.toString=function(e){const t=e?function(s){return e.call(this,s,D_)}:D_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function lk(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function NE(n,e,t){if(!e)return n;const s=t&&t.encode||lk;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=H.isURLSearchParams(e)?e.toString():new Dp(e,t).toString(s),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class O_{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(s){s!==null&&e(s)})}}const bE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uk=typeof URLSearchParams<"u"?URLSearchParams:Dp,ck=typeof FormData<"u"?FormData:null,hk=typeof Blob<"u"?Blob:null,dk={isBrowser:!0,classes:{URLSearchParams:uk,FormData:ck,Blob:hk},protocols:["http","https","file","blob","url","data"]},Op=typeof window<"u"&&typeof document<"u",Vf=typeof navigator=="object"&&navigator||void 0,fk=Op&&(!Vf||["ReactNative","NativeScript","NS"].indexOf(Vf.product)<0),pk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mk=Op&&window.location.href||"http://localhost",gk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Op,hasStandardBrowserEnv:fk,hasStandardBrowserWebWorkerEnv:pk,navigator:Vf,origin:mk},Symbol.toStringTag,{value:"Module"})),qt={...gk,...dk};function yk(n,e){return fh(n,new qt.classes.URLSearchParams,{visitor:function(t,s,o,l){return qt.isNode&&H.isBuffer(t)?(this.append(s,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function _k(n){return H.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vk(n){const e={},t=Object.keys(n);let s;const o=t.length;let l;for(s=0;s<o;s++)l=t[s],e[l]=n[l];return e}function DE(n){function e(t,s,o,l){let c=t[l++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),g=l>=t.length;return c=!c&&H.isArray(o)?o.length:c,g?(H.hasOwnProp(o,c)?o[c]=[o[c],s]:o[c]=s,!f):((!o[c]||!H.isObject(o[c]))&&(o[c]=[]),e(t,s,o[c],l)&&H.isArray(o[c])&&(o[c]=vk(o[c])),!f)}if(H.isFormData(n)&&H.isFunction(n.entries)){const t={};return H.forEachEntry(n,(s,o)=>{e(_k(s),o,t,0)}),t}return null}function wk(n,e,t){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const xl={transitional:bE,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",o=s.indexOf("application/json")>-1,l=H.isObject(e);if(l&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(DE(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return yk(e,this.formSerializer).toString();if((f=H.isFileList(e))||s.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return fh(f?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),wk(e)):e}],transformResponse:[function(e){const t=this.transitional||xl.transitional,s=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(s&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(f){if(c)throw f.name==="SyntaxError"?Ce.from(f,Ce.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],n=>{xl.headers[n]={}});const Ek=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tk=n=>{const e={};let t,s,o;return n&&n.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),s=c.substring(o+1).trim(),!(!t||e[t]&&Ek[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},V_=Symbol("internals");function Ga(n){return n&&String(n).trim().toLowerCase()}function dc(n){return n===!1||n==null?n:H.isArray(n)?n.map(dc):String(n)}function Ik(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const Sk=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function tf(n,e,t,s,o){if(H.isFunction(s))return s.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(s))return e.indexOf(s)!==-1;if(H.isRegExp(s))return s.test(e)}}function Ak(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function Rk(n,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(o,l,c){return this[s].call(this,e,o,l,c)},configurable:!0})})}let on=class{constructor(e){e&&this.set(e)}set(e,t,s){const o=this;function l(f,g,y){const v=Ga(g);if(!v)throw new Error("header name must be a non-empty string");const E=H.findKey(o,v);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||g]=dc(f))}const c=(f,g)=>H.forEach(f,(y,v)=>l(y,v,g));if(H.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(H.isString(e)&&(e=e.trim())&&!Sk(e))c(Tk(e),t);else if(H.isObject(e)&&H.isIterable(e)){let f={},g,y;for(const v of e){if(!H.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[y=v[0]]=(g=f[y])?H.isArray(g)?[...g,v[1]]:[g,v[1]]:v[1]}c(f,t)}else e!=null&&l(t,e,s);return this}get(e,t){if(e=Ga(e),e){const s=H.findKey(this,e);if(s){const o=this[s];if(!t)return o;if(t===!0)return Ik(o);if(H.isFunction(t))return t.call(this,o,s);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ga(e),e){const s=H.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||tf(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let o=!1;function l(c){if(c=Ga(c),c){const f=H.findKey(s,c);f&&(!t||tf(s,s[f],f,t))&&(delete s[f],o=!0)}}return H.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let s=t.length,o=!1;for(;s--;){const l=t[s];(!e||tf(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,s={};return H.forEach(this,(o,l)=>{const c=H.findKey(s,l);if(c){t[c]=dc(o),delete t[l];return}const f=e?Ak(l):String(l).trim();f!==l&&delete t[l],t[f]=dc(o),s[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(s,o)=>{s!=null&&s!==!1&&(t[o]=e&&H.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(o=>s.set(o)),s}static accessor(e){const s=(this[V_]=this[V_]={accessors:{}}).accessors,o=this.prototype;function l(c){const f=Ga(c);s[f]||(Rk(o,c),s[f]=!0)}return H.isArray(e)?e.forEach(l):l(e),this}};on.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(on.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});H.freezeMethods(on);function nf(n,e){const t=this||xl,s=e||t,o=on.from(s.headers);let l=s.data;return H.forEach(n,function(f){l=f.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function OE(n){return!!(n&&n.__CANCEL__)}function Jo(n,e,t){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(Jo,Ce,{__CANCEL__:!0});function VE(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new Ce("Request failed with status code "+t.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ck(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Pk(n,e){n=n||10;const t=new Array(n),s=new Array(n);let o=0,l=0,c;return e=e!==void 0?e:1e3,function(g){const y=Date.now(),v=s[l];c||(c=y),t[o]=g,s[o]=y;let E=l,I=0;for(;E!==o;)I+=t[E++],E=E%n;if(o=(o+1)%n,o===l&&(l=(l+1)%n),y-c<e)return;const B=v&&y-v;return B?Math.round(I*1e3/B):void 0}}function kk(n,e){let t=0,s=1e3/e,o,l;const c=(y,v=Date.now())=>{t=v,o=null,l&&(clearTimeout(l),l=null),n(...y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=s?c(y,v):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},s-E)))},()=>o&&c(o)]}const Oc=(n,e,t=3)=>{let s=0;const o=Pk(50,250);return kk(l=>{const c=l.loaded,f=l.lengthComputable?l.total:void 0,g=c-s,y=o(g),v=c<=f;s=c;const E={loaded:c,total:f,progress:f?c/f:void 0,bytes:g,rate:y||void 0,estimated:y&&f&&v?(f-c)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(E)},t)},L_=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},M_=n=>(...e)=>H.asap(()=>n(...e)),xk=qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,Nk=qt.hasStandardBrowserEnv?{write(n,e,t,s,o,l){const c=[n+"="+encodeURIComponent(e)];H.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),H.isString(s)&&c.push("path="+s),H.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bk(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Dk(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function LE(n,e,t){let s=!bk(e);return n&&(s||t==!1)?Dk(n,e):e}const F_=n=>n instanceof on?{...n}:n;function xi(n,e){e=e||{};const t={};function s(y,v,E,I){return H.isPlainObject(y)&&H.isPlainObject(v)?H.merge.call({caseless:I},y,v):H.isPlainObject(v)?H.merge({},v):H.isArray(v)?v.slice():v}function o(y,v,E,I){if(H.isUndefined(v)){if(!H.isUndefined(y))return s(void 0,y,E,I)}else return s(y,v,E,I)}function l(y,v){if(!H.isUndefined(v))return s(void 0,v)}function c(y,v){if(H.isUndefined(v)){if(!H.isUndefined(y))return s(void 0,y)}else return s(void 0,v)}function f(y,v,E){if(E in e)return s(y,v);if(E in n)return s(void 0,y)}const g={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(y,v,E)=>o(F_(y),F_(v),E,!0)};return H.forEach(Object.keys({...n,...e}),function(v){const E=g[v]||o,I=E(n[v],e[v],v);H.isUndefined(I)&&E!==f||(t[v]=I)}),t}const ME=n=>{const e=xi({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:f}=e;if(e.headers=c=on.from(c),e.url=NE(LE(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),H.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(H.isFunction(t.getHeaders)){const g=t.getHeaders(),y=["content-type","content-length"];Object.entries(g).forEach(([v,E])=>{y.includes(v.toLowerCase())&&c.set(v,E)})}}if(qt.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(e)),s||s!==!1&&xk(e.url))){const g=o&&l&&Nk.read(l);g&&c.set(o,g)}return e},Ok=typeof XMLHttpRequest<"u",Vk=Ok&&function(n){return new Promise(function(t,s){const o=ME(n);let l=o.data;const c=on.from(o.headers).normalize();let{responseType:f,onUploadProgress:g,onDownloadProgress:y}=o,v,E,I,B,O;function U(){B&&B(),O&&O(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let L=new XMLHttpRequest;L.open(o.method.toUpperCase(),o.url,!0),L.timeout=o.timeout;function te(){if(!L)return;const ae=on.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),Pe={data:!f||f==="text"||f==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:ae,config:n,request:L};VE(function(k){t(k),U()},function(k){s(k),U()},Pe),L=null}"onloadend"in L?L.onloadend=te:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(te)},L.onabort=function(){L&&(s(new Ce("Request aborted",Ce.ECONNABORTED,n,L)),L=null)},L.onerror=function(ge){const Pe=ge&&ge.message?ge.message:"Network Error",ne=new Ce(Pe,Ce.ERR_NETWORK,n,L);ne.event=ge||null,s(ne),L=null},L.ontimeout=function(){let ge=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Pe=o.transitional||bE;o.timeoutErrorMessage&&(ge=o.timeoutErrorMessage),s(new Ce(ge,Pe.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,L)),L=null},l===void 0&&c.setContentType(null),"setRequestHeader"in L&&H.forEach(c.toJSON(),function(ge,Pe){L.setRequestHeader(Pe,ge)}),H.isUndefined(o.withCredentials)||(L.withCredentials=!!o.withCredentials),f&&f!=="json"&&(L.responseType=o.responseType),y&&([I,O]=Oc(y,!0),L.addEventListener("progress",I)),g&&L.upload&&([E,B]=Oc(g),L.upload.addEventListener("progress",E),L.upload.addEventListener("loadend",B)),(o.cancelToken||o.signal)&&(v=ae=>{L&&(s(!ae||ae.type?new Jo(null,n,L):ae),L.abort(),L=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const ue=Ck(o.url);if(ue&&qt.protocols.indexOf(ue)===-1){s(new Ce("Unsupported protocol "+ue+":",Ce.ERR_BAD_REQUEST,n));return}L.send(l||null)})},Lk=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,o;const l=function(y){if(!o){o=!0,f();const v=y instanceof Error?y:this.reason;s.abort(v instanceof Ce?v:new Jo(v instanceof Error?v.message:v))}};let c=e&&setTimeout(()=>{c=null,l(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const f=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:g}=s;return g.unsubscribe=()=>H.asap(f),g}},Mk=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,o;for(;s<t;)o=s+e,yield n.slice(s,o),s=o},Fk=async function*(n,e){for await(const t of Uk(n))yield*Mk(t,e)},Uk=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},U_=(n,e,t,s)=>{const o=Fk(n,e);let l=0,c,f=g=>{c||(c=!0,s&&s(g))};return new ReadableStream({async pull(g){try{const{done:y,value:v}=await o.next();if(y){f(),g.close();return}let E=v.byteLength;if(t){let I=l+=E;t(I)}g.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(g){return f(g),o.return()}},{highWaterMark:2})},j_=64*1024,{isFunction:Zu}=H,jk=(({Request:n,Response:e})=>({Request:n,Response:e}))(H.global),{ReadableStream:B_,TextEncoder:z_}=H.global,$_=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Bk=n=>{n=H.merge.call({skipUndefined:!0},jk,n);const{fetch:e,Request:t,Response:s}=n,o=e?Zu(e):typeof fetch=="function",l=Zu(t),c=Zu(s);if(!o)return!1;const f=o&&Zu(B_),g=o&&(typeof z_=="function"?(O=>U=>O.encode(U))(new z_):async O=>new Uint8Array(await new t(O).arrayBuffer())),y=l&&f&&$_(()=>{let O=!1;const U=new t(qt.origin,{body:new B_,method:"POST",get duplex(){return O=!0,"half"}}).headers.has("Content-Type");return O&&!U}),v=c&&f&&$_(()=>H.isReadableStream(new s("").body)),E={stream:v&&(O=>O.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(O=>{!E[O]&&(E[O]=(U,L)=>{let te=U&&U[O];if(te)return te.call(U);throw new Ce(`Response type '${O}' is not supported`,Ce.ERR_NOT_SUPPORT,L)})});const I=async O=>{if(O==null)return 0;if(H.isBlob(O))return O.size;if(H.isSpecCompliantForm(O))return(await new t(qt.origin,{method:"POST",body:O}).arrayBuffer()).byteLength;if(H.isArrayBufferView(O)||H.isArrayBuffer(O))return O.byteLength;if(H.isURLSearchParams(O)&&(O=O+""),H.isString(O))return(await g(O)).byteLength},B=async(O,U)=>{const L=H.toFiniteNumber(O.getContentLength());return L??I(U)};return async O=>{let{url:U,method:L,data:te,signal:ue,cancelToken:ae,timeout:ge,onDownloadProgress:Pe,onUploadProgress:ne,responseType:k,headers:A,withCredentials:P="same-origin",fetchOptions:D}=ME(O),N=e||fetch;k=k?(k+"").toLowerCase():"text";let M=Lk([ue,ae&&ae.toAbortSignal()],ge),C=null;const Le=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let ut;try{if(ne&&y&&L!=="get"&&L!=="head"&&(ut=await B(A,te))!==0){let V=new t(U,{method:"POST",body:te,duplex:"half"}),K;if(H.isFormData(te)&&(K=V.headers.get("content-type"))&&A.setContentType(K),V.body){const[Ie,Ee]=L_(ut,Oc(M_(ne)));te=U_(V.body,j_,Ie,Ee)}}H.isString(P)||(P=P?"include":"omit");const We=l&&"credentials"in t.prototype,Ke={...D,signal:M,method:L.toUpperCase(),headers:A.normalize().toJSON(),body:te,duplex:"half",credentials:We?P:void 0};C=l&&new t(U,Ke);let Z=await(l?N(C,D):N(U,Ke));const pe=v&&(k==="stream"||k==="response");if(v&&(Pe||pe&&Le)){const V={};["status","statusText","headers"].forEach(ke=>{V[ke]=Z[ke]});const K=H.toFiniteNumber(Z.headers.get("content-length")),[Ie,Ee]=Pe&&L_(K,Oc(M_(Pe),!0))||[];Z=new s(U_(Z.body,j_,Ie,()=>{Ee&&Ee(),Le&&Le()}),V)}k=k||"text";let ie=await E[H.findKey(E,k)||"text"](Z,O);return!pe&&Le&&Le(),await new Promise((V,K)=>{VE(V,K,{data:ie,headers:on.from(Z.headers),status:Z.status,statusText:Z.statusText,config:O,request:C})})}catch(We){throw Le&&Le(),We&&We.name==="TypeError"&&/Load failed|fetch/i.test(We.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,O,C),{cause:We.cause||We}):Ce.from(We,We&&We.code,O,C)}}},zk=new Map,FE=n=>{let e=n?n.env:{};const{fetch:t,Request:s,Response:o}=e,l=[s,o,t];let c=l.length,f=c,g,y,v=zk;for(;f--;)g=l[f],y=v.get(g),y===void 0&&v.set(g,y=f?new Map:Bk(e)),v=y;return y};FE();const Lf={http:ik,xhr:Vk,fetch:{get:FE}};H.forEach(Lf,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const q_=n=>`- ${n}`,$k=n=>H.isFunction(n)||n===null||n===!1,UE={getAdapter:(n,e)=>{n=H.isArray(n)?n:[n];const{length:t}=n;let s,o;const l={};for(let c=0;c<t;c++){s=n[c];let f;if(o=s,!$k(s)&&(o=Lf[(f=String(s)).toLowerCase()],o===void 0))throw new Ce(`Unknown adapter '${f}'`);if(o&&(H.isFunction(o)||(o=o.get(e))))break;l[f||"#"+c]=o}if(!o){const c=Object.entries(l).map(([g,y])=>`adapter ${g} `+(y===!1?"is not supported by the environment":"is not available in the build"));let f=t?c.length>1?`since :
`+c.map(q_).join(`
`):" "+q_(c[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return o},adapters:Lf};function rf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Jo(null,n)}function H_(n){return rf(n),n.headers=on.from(n.headers),n.data=nf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),UE.getAdapter(n.adapter||xl.adapter,n)(n).then(function(s){return rf(n),s.data=nf.call(n,n.transformResponse,s),s.headers=on.from(s.headers),s},function(s){return OE(s)||(rf(n),s&&s.response&&(s.response.data=nf.call(n,n.transformResponse,s.response),s.response.headers=on.from(s.response.headers))),Promise.reject(s)})}const jE="1.12.2",ph={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ph[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const W_={};ph.transitional=function(e,t,s){function o(l,c){return"[Axios v"+jE+"] Transitional option '"+l+"'"+c+(s?". "+s:"")}return(l,c,f)=>{if(e===!1)throw new Ce(o(c," has been removed"+(t?" in "+t:"")),Ce.ERR_DEPRECATED);return t&&!W_[c]&&(W_[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,f):!0}};ph.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function qk(n,e,t){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let o=s.length;for(;o-- >0;){const l=s[o],c=e[l];if(c){const f=n[l],g=f===void 0||c(f,l,n);if(g!==!0)throw new Ce("option "+l+" must be "+g,Ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ce("Unknown option "+l,Ce.ERR_BAD_OPTION)}}const fc={assertOptions:qk,validators:ph},ar=fc.validators;let Ii=class{constructor(e){this.defaults=e||{},this.interceptors={request:new O_,response:new O_}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=xi(this.defaults,t);const{transitional:s,paramsSerializer:o,headers:l}=t;s!==void 0&&fc.assertOptions(s,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:fc.assertOptions(o,{encode:ar.function,serialize:ar.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),fc.assertOptions(t,{baseUrl:ar.spelling("baseURL"),withXsrfToken:ar.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&H.merge(l.common,l[t.method]);l&&H.forEach(["delete","get","head","post","put","patch","common"],O=>{delete l[O]}),t.headers=on.concat(c,l);const f=[];let g=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(g=g&&U.synchronous,f.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let v,E=0,I;if(!g){const O=[H_.bind(this),void 0];for(O.unshift(...f),O.push(...y),I=O.length,v=Promise.resolve(t);E<I;)v=v.then(O[E++],O[E++]);return v}I=f.length;let B=t;for(;E<I;){const O=f[E++],U=f[E++];try{B=O(B)}catch(L){U.call(this,L);break}}try{v=H_.call(this,B)}catch(O){return Promise.reject(O)}for(E=0,I=y.length;E<I;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=xi(this.defaults,e);const t=LE(e.baseURL,e.url,e.allowAbsoluteUrls);return NE(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){Ii.prototype[e]=function(t,s){return this.request(xi(s||{},{method:e,url:t,data:(s||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(s){return function(l,c,f){return this.request(xi(f||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Ii.prototype[e]=t(),Ii.prototype[e+"Form"]=t(!0)});let Hk=class BE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const s=this;this.promise.then(o=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](o);s._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(f=>{s.subscribe(f),l=f}).then(o);return c.cancel=function(){s.unsubscribe(l)},c},e(function(l,c,f){s.reason||(s.reason=new Jo(l,c,f),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new BE(function(o){e=o}),cancel:e}}};function Wk(n){return function(t){return n.apply(null,t)}}function Kk(n){return H.isObject(n)&&n.isAxiosError===!0}const Mf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mf).forEach(([n,e])=>{Mf[e]=n});function zE(n){const e=new Ii(n),t=vE(Ii.prototype.request,e);return H.extend(t,Ii.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return zE(xi(n,o))},t}const pt=zE(xl);pt.Axios=Ii;pt.CanceledError=Jo;pt.CancelToken=Hk;pt.isCancel=OE;pt.VERSION=jE;pt.toFormData=fh;pt.AxiosError=Ce;pt.Cancel=pt.CanceledError;pt.all=function(e){return Promise.all(e)};pt.spread=Wk;pt.isAxiosError=Kk;pt.mergeConfig=xi;pt.AxiosHeaders=on;pt.formToJSON=n=>DE(H.isHTMLForm(n)?new FormData(n):n);pt.getAdapter=UE.getAdapter;pt.HttpStatusCode=Mf;pt.default=pt;const{Axios:gx,AxiosError:yx,CanceledError:_x,isCancel:vx,CancelToken:wx,VERSION:Ex,all:Tx,Cancel:Ix,isAxiosError:Sx,spread:Ax,toFormData:Rx,AxiosHeaders:Cx,HttpStatusCode:Px,formToJSON:kx,getAdapter:xx,mergeConfig:Nx}=pt,Gk={apiKey:"AIzaSyAZUuc2ai03Grqs1NhfsNucOJBz0aLdO0k",authDomain:"message-app-6d5b6.firebaseapp.com",projectId:"message-app-6d5b6",storageBucket:"message-app-6d5b6.appspot.com",messagingSenderId:"340686910459",appId:"1:340686910459:web:554db54fe1979c31da115e"},Qk="dsbkiljpf",Yk="message-app-preset",$E=rv(Gk),Vc=sA($E),lt=rP($E),sf="sharmaishan74481@gmail.com",Vp=async n=>{const t=n.type.startsWith("video/")?"video":"image",s=`https://api.cloudinary.com/v1_1/${Qk}/${t}/upload`,o=new FormData;o.append("file",n),o.append("upload_preset",Yk);try{return{url:(await pt.post(s,o)).data.secure_url,resourceType:t}}catch(l){return console.error("Error uploading to Cloudinary:",l),null}},Lp=()=>R.jsx("div",{className:"flex justify-center items-center h-full w-full",children:R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}),Xk=()=>R.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-100",children:R.jsx(Lp,{})}),Jk=({message:n,type:e="success"})=>{if(!n)return null;const t=e==="error"?"bg-red-500":"bg-green-500";return R.jsx("div",{className:`fixed top-5 right-5 px-4 py-2 text-white rounded-md shadow-lg ${t} z-[100] animate-fade-in-out`,children:n})},Mp=({file:n,onClose:e})=>!n||!n.url?null:R.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-[100]",onClick:e,children:[R.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white text-4xl font-bold hover:text-gray-300",children:""}),R.jsx("div",{className:"relative p-4",onClick:t=>t.stopPropagation(),children:n.type==="image"?R.jsx("img",{src:n.url,alt:"Enlarged view",className:"max-w-[90vw] max-h-[90vh] rounded-lg shadow-2xl"}):R.jsx("video",{src:n.url,controls:!0,autoPlay:!0,className:"max-w-[90vw] max-h-[90vh] rounded-lg shadow-2xl"})})]}),Zk=({setView:n,setNotification:e})=>{const[t,s]=de.useState(""),[o,l]=de.useState(""),[c,f]=de.useState(""),[g,y]=de.useState(!1),v=async E=>{E.preventDefault(),f(""),y(!0);try{await $S(Vc,t,o),e("Logged in successfully!")}catch(I){I.code==="auth/invalid-credential"||I.code==="auth/user-not-found"||I.code==="auth/wrong-password"?f("Incorrect email or password. Please try again or sign up."):(f("An unknown error occurred. Please try again."),console.error("Login Error:",I))}finally{y(!1)}};return R.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-indigo-500 to-purple-600 p-4",children:R.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl",children:[R.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Welcome Back!"}),R.jsxs("form",{onSubmit:v,className:"space-y-6",children:[R.jsx("input",{type:"email",value:t,onChange:E=>s(E.target.value),placeholder:"Email",className:"w-full px-4 py-3 bg-white/20 text-white placeholder-gray-300 border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400",required:!0}),R.jsx("input",{type:"password",value:o,onChange:E=>l(E.target.value),placeholder:"Password",className:"w-full px-4 py-3 bg-white/20 text-white placeholder-gray-300 border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400",required:!0}),c&&R.jsx("p",{className:"text-red-300 text-sm text-center",children:c}),R.jsx("button",{type:"submit",disabled:g,className:"w-full px-4 py-3 text-lg font-bold text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 transition-all duration-300 transform hover:scale-105",children:g?"Logging in...":"Login"})]}),R.jsxs("p",{className:"text-sm text-center text-gray-200",children:["Don't have an account? ",R.jsx("button",{onClick:()=>n("signup"),className:"font-bold text-white hover:underline",children:"Sign up"})]})]})})},ex=({setView:n,setNotification:e})=>{const[t,s]=de.useState(""),[o,l]=de.useState(""),[c,f]=de.useState(""),[g,y]=de.useState(null),[v,E]=de.useState(""),[I,B]=de.useState(!1),O=async U=>{var L;if(U.preventDefault(),!c.trim()){E("Nickname is required.");return}E(""),B(!0);try{let te="https://placehold.co/100x100/EBF8FF/3182CE?text=User";g&&(te=((L=await Vp(g))==null?void 0:L.url)||te);const ae=(await zS(Vc,t,o)).user;await _P(fr(lt,"users",ae.uid),{uid:ae.uid,email:ae.email,nickname:c,photoURL:te}),e("Account created successfully!")}catch(te){E(te.message)}finally{B(!1)}};return R.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-purple-600 to-indigo-500 p-4",children:R.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl",children:[R.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Create Your Account"}),R.jsxs("form",{onSubmit:O,className:"space-y-4",children:[R.jsx("input",{type:"text",value:c,onChange:U=>f(U.target.value),placeholder:"Nickname",className:"w-full px-4 py-3 bg-white/20 text-white placeholder-gray-300 border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-400",required:!0}),R.jsx("input",{type:"email",value:t,onChange:U=>s(U.target.value),placeholder:"Email",className:"w-full px-4 py-3 bg-white/20 text-white placeholder-gray-300 border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-400",required:!0}),R.jsx("input",{type:"password",value:o,onChange:U=>l(U.target.value),placeholder:"Password (min. 6 characters)",className:"w-full px-4 py-3 bg-white/20 text-white placeholder-gray-300 border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-400",required:!0}),R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-200",children:"Profile Picture (Optional)"}),R.jsx("input",{type:"file",accept:"image/*",onChange:U=>y(U.target.files[0]),className:"w-full text-sm text-gray-200 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-white/20 file:text-white hover:file:bg-white/30 cursor-pointer"})]}),v&&R.jsx("p",{className:"text-red-300 text-sm text-center",children:v}),R.jsx("button",{type:"submit",disabled:I,className:"w-full px-4 py-3 text-lg font-bold text-white bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 transition-all duration-300 transform hover:scale-105",children:I?"Creating Account...":"Sign Up"})]}),R.jsxs("p",{className:"text-sm text-center text-gray-200",children:["Already have an account? ",R.jsx("button",{onClick:()=>n("login"),className:"font-bold text-white hover:underline",children:"Login"})]})]})})},tx=({user:n,userData:e,setNotification:t,handleLogout:s})=>{const[o,l]=de.useState([]),[c,f]=de.useState(null),[g,y]=de.useState(!0),[v,E]=de.useState(null);return de.useEffect(()=>{y(!0);const I=Oi(yn(lt,"spaces"),ki("members","array-contains",n.uid)),B=Hr(I,O=>{l(O.docs.map(U=>({id:U.id,...U.data()}))),y(!1)});return()=>B()},[n.uid]),R.jsxs(R.Fragment,{children:[R.jsx(Mp,{file:v,onClose:()=>E(null)}),R.jsxs("div",{className:"flex h-screen w-full bg-gray-100 overflow-hidden",children:[R.jsx("div",{className:`transition-transform duration-300 ease-in-out w-full md:w-1/3 lg:w-1/4 flex-shrink-0 ${c?"-translate-x-full md:translate-x-0":"translate-x-0"}`,children:R.jsx(nx,{user:n,userData:e,spaces:o,loading:g,activeSpace:c,setActiveSpace:f,setNotification:t,handleLogout:s,setViewingFile:E})}),R.jsx("div",{className:"flex-1 flex flex-col",children:R.jsx(ix,{user:n,userData:e,activeSpace:c,setActiveSpace:f,setNotification:t})})]})]})},nx=({user:n,userData:e,spaces:t,loading:s,activeSpace:o,setActiveSpace:l,setNotification:c,handleLogout:f,setViewingFile:g})=>{const[y,v]=de.useState(!1),[E,I]=de.useState(!1),[B,O]=de.useState(0);return de.useEffect(()=>{const U=Oi(yn(lt,"invitations"),ki("inviteeId","==",n.uid),ki("status","==","pending")),L=Hr(U,te=>{O(te.size)});return()=>L()},[n.uid]),R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"w-full h-full bg-gray-50 border-r border-gray-200 flex flex-col",children:[R.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-white flex-shrink-0",children:[R.jsx("img",{src:e.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full cursor-pointer transition-transform hover:scale-110",onClick:()=>g({url:e.photoURL,type:"image"})}),R.jsx("span",{className:"font-semibold text-gray-800 flex-1 mx-3 truncate",children:e.nickname}),R.jsx("div",{className:"relative",children:R.jsxs("button",{onClick:()=>I(!0),className:"p-2 rounded-full hover:bg-gray-200 relative transition-colors",title:"View Invitations",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),B>0&&R.jsx("span",{className:"absolute top-0 right-0 block h-4 w-4 rounded-full bg-red-500 text-white text-xs flex items-center justify-center animate-pulse",children:B})]})}),R.jsx("button",{onClick:()=>v(!0),className:"p-2 rounded-full hover:bg-gray-200 transition-colors",title:"Create New Space",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),R.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-red-200 text-red-600 transition-colors",title:"Logout",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}),R.jsx("div",{className:"flex-1 overflow-y-auto",children:s?R.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading Spaces..."}):t.map(U=>R.jsxs("div",{onClick:()=>l(U),className:`flex items-center p-3 cursor-pointer transition-all duration-200 border-l-4 ${(o==null?void 0:o.id)===U.id?"bg-indigo-100 border-indigo-500":"border-transparent hover:bg-gray-100"}`,children:[R.jsx("img",{src:U.photoURL||"https://placehold.co/100x100/A0AEC0/FFFFFF?text=Sp",alt:U.spaceName,className:"w-12 h-12 rounded-full bg-gray-300 mr-3"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-semibold text-gray-900",children:U.spaceName}),R.jsx("p",{className:"text-sm text-gray-500",children:"Click to open chat"})]})]},U.id))})]}),y&&R.jsx(rx,{user:n,onClose:()=>v(!1),setNotification:c}),E&&R.jsx(sx,{user:n,onClose:()=>I(!1),setNotification:c})]})},rx=({user:n,onClose:e,setNotification:t})=>{const[s,o]=de.useState(""),[l,c]=de.useState(null),[f,g]=de.useState(!1),y=async v=>{var E;if(v.preventDefault(),!!s.trim()){g(!0);try{let I="https://placehold.co/100x100/A0AEC0/FFFFFF?text=Sp";l&&(I=((E=await Vp(l))==null?void 0:E.url)||I),await lh(yn(lt,"space_requests"),{spaceName:s,photoURL:I,requestedBy:n.email,userId:n.uid,status:"pending",createdAt:He.now()}),t("Space request sent to admin!"),e()}catch{t("Failed to send request.","error")}finally{g(!1)}}};return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4",children:[R.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create a New Space"}),R.jsxs("form",{onSubmit:y,children:[R.jsx("input",{type:"text",value:s,onChange:v=>o(v.target.value),placeholder:"Enter space name",className:"w-full px-4 py-2 border rounded-md mb-4",required:!0}),R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Space Profile Picture (Optional)"}),R.jsx("input",{type:"file",accept:"image/*",onChange:v=>c(v.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 mt-1 mb-4"})]}),R.jsxs("div",{className:"flex justify-end gap-3",children:[R.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),R.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",children:f?"Sending...":"Send Request"})]})]})]})})},sx=({user:n,onClose:e,setNotification:t})=>{const[s,o]=de.useState([]);de.useEffect(()=>{const f=Oi(yn(lt,"invitations"),ki("inviteeId","==",n.uid),ki("status","==","pending"));return Hr(f,y=>o(y.docs.map(v=>({id:v.id,...v.data()}))))},[n.uid]);const l=async f=>{try{await cc(fr(lt,"spaces",f.spaceId),{members:vP(n.uid)}),await cc(fr(lt,"invitations",f.id),{status:"accepted"}),t(`You have joined ${f.spaceName}!`)}catch{t("Failed to join space.","error")}},c=async f=>{try{await cc(fr(lt,"invitations",f),{status:"declined"})}catch{t("Failed to decline invite.","error")}};return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4",children:[R.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Invitations"}),R.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.length>0?s.map(f=>R.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[R.jsxs("p",{children:[R.jsx("span",{className:"font-bold",children:f.inviterNickname})," invited you to ",R.jsx("span",{className:"font-bold",children:f.spaceName})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("button",{onClick:()=>l(f),className:"px-3 py-1 text-xs bg-green-500 text-white rounded",children:"Accept"}),R.jsx("button",{onClick:()=>c(f.id),className:"px-3 py-1 text-xs bg-red-500 text-white rounded",children:"Decline"})]})]},f.id)):R.jsx("p",{children:"No pending invitations."})}),R.jsx("div",{className:"flex justify-end mt-4",children:R.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Close"})})]})})},ix=({user:n,userData:e,activeSpace:t,setActiveSpace:s,setNotification:o})=>{const[l,c]=de.useState([]),[f,g]=de.useState(""),[y,v]=de.useState(null),[E,I]=de.useState(!1),[B,O]=de.useState(!1),[U,L]=de.useState(null),[te,ue]=de.useState(!1),ae=de.useRef(null);if(de.useEffect(()=>{if(!t){c([]);return}const ne=Oi(yn(lt,"spaces",t.id,"messages"),pE("createdAt","asc")),k=Hr(ne,A=>c(A.docs.map(P=>({...P.data(),id:P.id}))));return()=>k()},[t]),de.useEffect(()=>{var ne;(ne=ae.current)==null||ne.scrollIntoView({behavior:"smooth"})},[l]),!t)return R.jsx("div",{className:"hidden md:flex flex-1 flex-col items-center justify-center bg-gray-200 p-4 text-center chat-bg",children:R.jsxs("div",{className:"text-center",children:[R.jsx("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),R.jsxs("h2",{className:"text-2xl text-gray-600 mt-4",children:["Welcome, ",e.nickname,"!"]}),R.jsx("p",{className:"text-gray-500 mt-2",children:"Select a space from the left to start a conversation."})]})});const ge=async ne=>{if(ne.preventDefault(),!(!f.trim()&&!y)){I(!0);try{let k=null;y&&(k=await Vp(y)),await lh(yn(lt,"spaces",t.id,"messages"),{text:f,fileUrl:(k==null?void 0:k.url)||null,fileType:(k==null?void 0:k.resourceType)||null,senderId:n.uid,senderNickname:e.nickname,senderPhotoURL:e.photoURL,createdAt:He.now()}),g(""),v(null),ne.target.reset()}catch{o("Failed to send message","error")}finally{I(!1)}}},Pe=t.ownerId===n.uid;return R.jsxs(R.Fragment,{children:[R.jsx(Mp,{file:U,onClose:()=>L(null)}),R.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[R.jsxs("header",{className:"flex items-center justify-between p-3 bg-white border-b border-gray-200 shadow-sm flex-shrink-0",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("button",{onClick:()=>s(null),className:"p-2 rounded-full hover:bg-gray-200 md:hidden",children:R.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),R.jsx("div",{className:"cursor-pointer",onClick:()=>ue(!0),children:R.jsx("img",{src:t.photoURL,className:"w-10 h-10 rounded-full"})}),R.jsxs("div",{onClick:()=>ue(!0),className:"cursor-pointer",children:[R.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t.spaceName}),R.jsxs("p",{className:"text-xs text-gray-500",children:[t.members.length," members"]})]})]}),Pe&&R.jsx("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Invite User"})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 chat-bg",children:[l.map(ne=>{var k;return R.jsxs("div",{className:`flex items-end gap-2 my-2 max-w-lg ${ne.senderId===n.uid?"ml-auto":"mr-auto"}`,children:[R.jsx("img",{src:ne.senderPhotoURL,alt:"avatar",className:`w-8 h-8 rounded-full cursor-pointer ${ne.senderId===n.uid?"order-2":"order-1"}`,onClick:()=>L({url:ne.senderPhotoURL,type:"image"})}),R.jsxs("div",{className:`relative px-4 py-2 rounded-xl shadow ${ne.senderId===n.uid?"bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-br-none":"bg-white text-gray-800 rounded-bl-none"}`,children:[R.jsx("p",{className:"font-bold text-sm mb-1",children:ne.senderNickname}),ne.text&&R.jsx("p",{className:"text-sm",children:ne.text}),ne.fileUrl&&ne.fileType==="image"&&R.jsx("img",{src:ne.fileUrl,alt:"sent content",className:"mt-2 rounded-lg max-h-60 cursor-pointer",onClick:()=>L({url:ne.fileUrl,type:"image"})}),ne.fileUrl&&ne.fileType==="video"&&R.jsx("video",{src:ne.fileUrl,controls:!0,className:"mt-2 rounded-lg max-h-60 cursor-pointer",onClick:()=>L({url:ne.fileUrl,type:"video"})}),R.jsx("p",{className:"text-xs opacity-70 mt-1 text-right",children:new Date((k=ne.createdAt)==null?void 0:k.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},ne.id)})," ",R.jsx("div",{ref:ae})]}),R.jsxs("div",{className:"p-4 bg-white border-t border-gray-200",children:[R.jsxs("form",{onSubmit:ge,className:"flex items-center gap-2",children:[R.jsxs("label",{className:"cursor-pointer p-2 rounded-full hover:bg-gray-200 transition-colors",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:R.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),R.jsx("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:ne=>v(ne.target.files[0])})]}),R.jsx("input",{type:"text",value:f,onChange:ne=>g(ne.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-400"}),R.jsx("button",{type:"submit",disabled:E,className:"p-3 text-white bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full hover:from-indigo-600 hover:to-purple-700 disabled:opacity-50 transition-all transform hover:scale-110",children:E?R.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),y&&R.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Selected: ",y.name]})]})]}),B&&R.jsx(ox,{user:n,userData:e,activeSpace:t,onClose:()=>O(!1),setNotification:o}),te&&R.jsx(qE,{space:t,onClose:()=>ue(!1)})]})},qE=({space:n,onClose:e})=>{const[t,s]=de.useState([]),[o,l]=de.useState(!0);return de.useEffect(()=>{(async()=>{l(!0);const f=n.members.map(v=>gP(fr(lt,"users",v))),y=(await Promise.all(f)).map(v=>v.data()).filter(Boolean);s(y),l(!1)})()},[n.members]),R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4",children:[R.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Members of ",n.spaceName]}),R.jsx("div",{className:"max-h-80 overflow-y-auto",children:o?R.jsx(Lp,{}):t.map(c=>R.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-100 rounded-md",children:[R.jsx("img",{src:c.photoURL,className:"w-10 h-10 rounded-full mr-3"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-semibold",children:c.nickname}),R.jsx("p",{className:"text-sm text-gray-500",children:c.email})]})]},c.uid))}),R.jsx("div",{className:"flex justify-end mt-4",children:R.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})})},ox=({user:n,userData:e,activeSpace:t,onClose:s,setNotification:o})=>{const[l,c]=de.useState([]),[f,g]=de.useState(!0);de.useEffect(()=>{(async()=>{const E=Oi(yn(lt,"users"),ki("uid","!=",n.uid)),B=(await yP(E)).docs.map(O=>O.data());c(B.filter(O=>!t.members.includes(O.uid))),g(!1)})()},[n.uid,t.members]);const y=async v=>{try{await lh(yn(lt,"invitations"),{inviterId:n.uid,inviterNickname:e.nickname,inviteeId:v.uid,spaceId:t.id,spaceName:t.spaceName,spacePhotoURL:t.photoURL,status:"pending",createdAt:He.now()}),o(`Invitation sent to ${v.nickname}!`),c(l.filter(E=>E.uid!==v.uid))}catch{o("Failed to send invitation.","error")}};return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md mx-4",children:[R.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Invite Users to ",t.spaceName]}),R.jsx("div",{className:"max-h-80 overflow-y-auto",children:f?R.jsx(Lp,{}):l.map(v=>R.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-100 rounded-md",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("img",{src:v.photoURL,className:"w-8 h-8 rounded-full"}),R.jsx("span",{children:v.nickname})]}),R.jsx("button",{onClick:()=>y(v),className:"px-3 py-1 bg-green-500 text-white text-sm rounded-md",children:"Invite"})]},v.uid))}),R.jsx("div",{className:"flex justify-end mt-4",children:R.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})})},ax=({setNotification:n,handleLogout:e})=>{const[t,s]=de.useState("requests"),[o,l]=de.useState(!1),c=()=>{switch(t){case"users":return R.jsx(ux,{setNotification:n});case"spaces":return R.jsx(cx,{setNotification:n});case"requests":default:return R.jsx(lx,{setNotification:n})}};return R.jsxs("div",{className:"flex h-screen",children:[R.jsxs("div",{className:`fixed inset-y-0 left-0 w-64 bg-gray-800 text-white flex flex-col transform ${o?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 ease-in-out z-30`,children:[R.jsxs("div",{className:"p-4 text-xl font-bold border-b border-gray-700 flex justify-between items-center",children:[R.jsx("span",{children:"Admin Panel"}),R.jsx("button",{onClick:()=>l(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-700",children:R.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),R.jsxs("nav",{className:"flex-1 p-2 space-y-2",children:[R.jsx("a",{onClick:()=>{s("requests"),l(!1)},className:`block p-2 rounded-md cursor-pointer ${t==="requests"?"bg-gray-900":"hover:bg-gray-700"}`,children:"Pending Requests"}),R.jsx("a",{onClick:()=>{s("users"),l(!1)},className:`block p-2 rounded-md cursor-pointer ${t==="users"?"bg-gray-900":"hover:bg-gray-700"}`,children:"Manage Users"}),R.jsx("a",{onClick:()=>{s("spaces"),l(!1)},className:`block p-2 rounded-md cursor-pointer ${t==="spaces"?"bg-gray-900":"hover:bg-gray-700"}`,children:"Manage Spaces"})]}),R.jsx("div",{className:"p-2 border-t border-gray-700",children:R.jsx("button",{onClick:e,className:"w-full p-2 text-left rounded-md hover:bg-red-500",children:"Logout"})})]}),R.jsxs("div",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto md:ml-64",children:[R.jsx("button",{onClick:()=>l(!0),className:"md:hidden mb-4 p-2 bg-gray-800 text-white rounded-md",children:R.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c()]})]})},lx=({setNotification:n})=>{const[e,t]=de.useState([]);de.useEffect(()=>{const o=Oi(yn(lt,"space_requests"),ki("status","==","pending"));return Hr(o,c=>t(c.docs.map(f=>({id:f.id,...f.data()}))))},[]);const s=async o=>{try{await lh(yn(lt,"spaces"),{spaceName:o.spaceName,photoURL:o.photoURL,ownerId:o.userId,ownerEmail:o.requestedBy,createdAt:He.now(),status:"approved",members:[o.userId]}),await cc(fr(lt,"space_requests",o.id),{status:"approved"}),n("Request Approved!")}catch{n("Failed to approve.","error")}};return R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Pending Space Requests"}),R.jsx("div",{className:"space-y-4",children:e.length>0?e.map(o=>R.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 bg-white rounded-lg shadow",children:[R.jsxs("div",{className:"flex items-center gap-3 mb-2 sm:mb-0",children:[R.jsx("img",{src:o.photoURL,className:"w-10 h-10 rounded-full"}),R.jsxs("p",{children:[o.spaceName," by ",o.requestedBy]})]}),R.jsx("div",{className:"flex gap-2",children:R.jsx("button",{onClick:()=>s(o),className:"px-3 py-1 bg-green-500 text-white rounded",children:"Approve"})})]},o.id)):R.jsx("p",{children:"No pending requests."})})]})},ux=({setNotification:n})=>{const[e,t]=de.useState([]);de.useEffect(()=>Hr(yn(lt,"users"),l=>t(l.docs.map(c=>c.data()))),[]);const s=async o=>{if(window.confirm("This will delete the user's data from the database. Are you sure?"))try{await yE(fr(lt,"users",o)),n("User data deleted.")}catch{n("Failed to delete user data.","error")}};return R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Manage Users"}),R.jsx("div",{className:"space-y-2 bg-white p-4 rounded-lg shadow",children:e.map(o=>R.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-2 border-b",children:[R.jsxs("p",{className:"mb-2 sm:mb-0",children:[o.nickname," (",o.email,")"]}),R.jsx("button",{onClick:()=>s(o.uid),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Delete Data"})]},o.uid))})]})},cx=({setNotification:n})=>{const[e,t]=de.useState([]),[s,o]=de.useState(null);if(de.useEffect(()=>Hr(yn(lt,"spaces"),f=>t(f.docs.map(g=>({id:g.id,...g.data()})))),[]),s)return R.jsx(hx,{space:s,onBack:()=>o(null)});const l=async c=>{if(window.confirm("Are you sure? This will delete the space and all its messages."))try{await yE(fr(lt,"spaces",c)),n("Space deleted.")}catch{n("Failed to delete space.","error")}};return R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Manage Spaces"}),R.jsx("div",{className:"space-y-2 bg-white p-4 rounded-lg shadow",children:e.map(c=>R.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-2 border-b",children:[R.jsxs("p",{className:"mb-2 sm:mb-0",children:[c.spaceName," by ",c.ownerEmail]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("button",{onClick:()=>o(c),className:"px-3 py-1 bg-blue-500 text-white rounded",children:"View Chat"}),R.jsx("button",{onClick:()=>l(c.id),className:"px-3 py-1 bg-red-500 text-white rounded",children:"Delete"})]})]},c.id))})]})},hx=({space:n,onBack:e})=>{const[t,s]=de.useState([]),[o,l]=de.useState(null),[c,f]=de.useState(!1),g=de.useRef(null);return de.useEffect(()=>{const y=Oi(yn(lt,"spaces",n.id,"messages"),pE("createdAt","asc"));return Hr(y,E=>s(E.docs.map(I=>({id:I.id,...I.data()}))))},[n.id]),de.useEffect(()=>{var y;(y=g.current)==null||y.scrollIntoView({behavior:"smooth"})},[t]),R.jsxs(R.Fragment,{children:[R.jsx(Mp,{file:o,onClose:()=>l(null)}),R.jsxs("div",{children:[R.jsx("button",{onClick:e,className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:" Back to Spaces"}),R.jsxs("div",{className:"flex items-center gap-3 mb-4 cursor-pointer",onClick:()=>f(!0),children:[R.jsx("img",{src:n.photoURL,className:"w-12 h-12 rounded-full"}),R.jsxs("div",{children:[R.jsxs("h2",{className:"text-2xl font-bold",children:["Viewing Chat: ",n.spaceName]}),R.jsxs("p",{className:"text-sm text-gray-600",children:[n.members.length," members"]})]})]}),R.jsx("div",{className:"bg-white rounded-lg shadow flex flex-col h-[65vh]",children:R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-100",children:[t.map(y=>{var v;return R.jsxs("div",{className:`flex items-start gap-3 my-2 ${y.senderId===n.ownerId?"justify-end":""}`,children:[R.jsx("img",{src:y.senderPhotoURL,alt:"avatar",className:`w-8 h-8 rounded-full cursor-pointer ${y.senderId===n.ownerId?"order-2":"order-1"}`,onClick:()=>l({url:y.senderPhotoURL,type:"image"})}),R.jsxs("div",{className:`p-3 rounded-lg max-w-xs lg:max-w-md ${y.senderId===n.ownerId?"bg-blue-500 text-white order-1":"bg-white order-2"}`,children:[R.jsx("p",{className:"font-bold text-sm mb-1",children:y.senderNickname}),y.text&&R.jsx("p",{children:y.text}),y.fileUrl&&y.fileType==="image"&&R.jsx("img",{src:y.fileUrl,alt:"sent content",className:"mt-2 rounded-lg max-h-60 cursor-pointer",onClick:()=>l({url:y.fileUrl,type:"image"})}),y.fileUrl&&y.fileType==="video"&&R.jsx("video",{src:y.fileUrl,controls:!0,className:"mt-2 rounded-lg max-h-60 cursor-pointer",onClick:()=>l({url:y.fileUrl,type:"video"})}),R.jsx("p",{className:"text-xs opacity-70 mt-1 text-right",children:new Date((v=y.createdAt)==null?void 0:v.toDate()).toLocaleTimeString()})]})]},y.id)}),R.jsx("div",{ref:g})]})})]}),c&&R.jsx(qE,{space:n,onClose:()=>f(!1)})]})};function dx(){const[n,e]=de.useState("loading"),[t,s]=de.useState(null),[o,l]=de.useState(null),[c,f]=de.useState("");de.useEffect(()=>{if(c){const E=setTimeout(()=>f(""),3e3);return()=>clearTimeout(E)}},[c]),de.useEffect(()=>{const E=WS(Vc,I=>{if(I)if(s(I),I.email===sf)l({nickname:"Admin",email:sf,photoURL:"https://placehold.co/100x100/2D3748/FFFFFF?text=A"}),e("admin_dashboard");else{e("loading_user");const B=fr(lt,"users",I.uid),O=Hr(B,U=>{U.exists()&&(l(U.data()),e("user_app"))});return()=>O()}else s(null),l(null),e("login")});return()=>E()},[]);const g=async()=>{await KS(Vc),f("Logged out successfully!")},y=()=>{if(n==="loading"||t&&t.email!==sf&&!o)return R.jsx(Xk,{});switch(n){case"signup":return R.jsx(ex,{setView:e,setNotification:f});case"user_app":return R.jsx(tx,{user:t,userData:o,setNotification:f,handleLogout:g});case"admin_dashboard":return R.jsx(ax,{setNotification:f,handleLogout:g});case"login":default:return R.jsx(Zk,{setView:e,setNotification:f})}};return R.jsxs(R.Fragment,{children:[R.jsx("style",{children:`
    .chat-bg {
      background-color: #e5ddd5;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
  `}),R.jsx(Jk,{message:c}),y()]})}iT.createRoot(document.getElementById("root")).render(R.jsx(de.StrictMode,{children:R.jsx(dx,{})}));
